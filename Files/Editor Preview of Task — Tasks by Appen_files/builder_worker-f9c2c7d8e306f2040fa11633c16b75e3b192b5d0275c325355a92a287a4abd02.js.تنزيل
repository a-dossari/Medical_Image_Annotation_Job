/*!
 * jQuery JavaScript Library v3.2.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2017-03-20T18:59Z
 */

/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */

/*!
 * jQuery Migrate - v1.4.1 - 2016-05-19
 * Copyright jQuery Foundation and other contributors
 */

/*!
   * jQuery Migrate - v3.0.1 - 2017-09-26
   * Copyright jQuery Foundation and other contributors
   */

//     Underscore.js 1.3.3
//     (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
//     Underscore is freely distributable under the MIT license.
//     Portions of Underscore are inspired or borrowed from Prototype,
//     Oliver Steele's Functional, and John Resig's Micro-Templating.
//     For all details and documentation:
//     http://documentcloud.github.com/underscore

/* ==========================================================
 * bootstrap-alert.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#alerts
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/* ============================================================
 * bootstrap-dropdown.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#dropdowns
 * ============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =============================================================
 * bootstrap-collapse.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#collapse
 * =============================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ============================================================ */

/* =========================================================
 * bootstrap-modal.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#modals
 * =========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

/* ===================================================
 * bootstrap-transition.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#transitions
 * ===================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */

/* ==========================================================
 * bootstrap-carousel.js v2.0.2
 * http://twitter.github.com/bootstrap/javascript.html#carousel
 * ==========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */

/*!
   * Paper.js v0.8 - The Swiss Army Knife of Vector Graphics Scripting.
   * http://paperjs.org/
   *
   * Copyright (c) 2011 - 2013, Juerg Lehni & Jonathan Puckey
   * http://lehni.org/ & http://jonathanpuckey.com/
   *
   * Distributed under the MIT license. See LICENSE file for details.
   *
   * All rights reserved.
   *
   * Date: Mon May 13 18:57:17 2013 -0700
   *
   ***
   *
   * Straps.js - Inheritance library with support for bean-style accessors and
   * AOP patterns.
   *
   * Copyright (c) 2006 - 2013 Juerg Lehni
   * http://lehni.org/
   *
   * Distributed under the MIT license.
   *
   ***
   *
   * Acorn.js
   * http://marijnhaverbeke.nl/acorn/
   *
   * Acorn is a tiny, fast JavaScript parser written in JavaScript,
   * created by Marijn Haverbeke and released under an MIT license.
   *
   */

/*
   * Paper.js - The Swiss Army Knife of Vector Graphics Scripting.
   * http://paperjs.org/
   *
   * Copyright (c) 2011 - 2013, Juerg Lehni & Jonathan Puckey
   * http://lehni.org/ & http://jonathanpuckey.com/
   *
   * Distributed under the MIT license. See LICENSE file for details.
   *
   * All rights reserved.
   */

/* http://keith-wood.name/countdown.html
   Countdown for jQuery v1.6.1.
   Written by Keith Wood (kbwood{at}iinet.com.au) January 2008.
   Available under the MIT (https://github.com/jquery/jquery/blob/master/MIT-LICENSE.txt) license. 
   Please attribute the author if you use it. */

/**
 * guiders.js
 *
 * version 1.3.0
 *
 * Developed at Optimizely. (www.optimizely.com)
 * We make A/B testing you'll actually use.
 *
 * Released under the Apache License 2.0.
 * www.apache.org/licenses/LICENSE-2.0.html
 *
 * Questions about Guiders?
 * You may email me (Jeff Pickhardt) at pickhardt+guiders@gmail.com
 *
 * Questions about Optimizely should be sent to:
 * sales@optimizely.com or support@optimizely.com
 *
 * Enjoy!
 */

/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */

define("jquery-noconflict",[],function(){return function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){e=e||nt;var n=e.createElement("script");n.text=t,e.head.appendChild(n).parentNode.removeChild(n)}function i(t){var e=!!t&&"length"in t&&t.length,n=pt.type(t);return"function"!==n&&!pt.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function s(t,e,n){return pt.isFunction(e)?pt.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?pt.grep(t,function(t){return t===e!==n}):"string"!=typeof e?pt.grep(t,function(t){return at.call(e,t)>-1!==n}):St.test(e)?pt.filter(e,t,n):(e=pt.filter(e,t),pt.grep(t,function(t){return at.call(e,t)>-1!==n&&1===t.nodeType}))}function o(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){var e={};return pt.each(t.match(At)||[],function(t,n){e[n]=!0}),e}function u(t){return t}function l(t){throw t}function c(t,e,n,i){var r;try{t&&pt.isFunction(r=t.promise)?r.call(t).done(e).fail(n):t&&pt.isFunction(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}function h(){nt.removeEventListener("DOMContentLoaded",h),t.removeEventListener("load",h),pt.ready()}function d(){this.expando=pt.expando+d.uid++}function f(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Lt.test(t)?JSON.parse(t):t)}function p(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(Ot,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=f(n)}catch(t){}Bt.set(t,e,n)}else n=void 0;return n}function g(t,e,n,i){var r,s=1,o=20,a=i?function(){return i.cur()}:function(){return pt.css(t,e,"")},u=a(),l=n&&n[3]||(pt.cssNumber[e]?"":"px"),c=(pt.cssNumber[e]||"px"!==l&&+u)&&Ft.exec(pt.css(t,e));if(c&&c[3]!==l){l=l||c[3],n=n||[],c=+u||1;do{s=s||".5",c/=s,pt.style(t,e,c+l)}while(s!==(s=a()/u)&&1!==s&&--o)}return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function m(t){var e,n=t.ownerDocument,i=t.nodeName,r=Gt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=pt.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),Gt[i]=r,r)}function v(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)i=t[s],i.style&&(n=i.style.display,e?("none"===n&&(r[s]=Nt.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&qt(i)&&(r[s]=m(i))):"none"!==n&&(r[s]="none",Nt.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}function _(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&r(t,e)?pt.merge([t],n):n}function y(t,e){for(var n=0,i=t.length;n<i;n++)Nt.set(t[n],"globalEval",!e||Nt.get(e[n],"globalEval"))}function w(t,e,n,i,r){for(var s,o,a,u,l,c,h=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((s=t[f])||0===s)if("object"===pt.type(s))pt.merge(d,s.nodeType?[s]:s);else if(Qt.test(s)){for(o=o||h.appendChild(e.createElement("div")),a=(Vt.exec(s)||["",""])[1].toLowerCase(),u=Ut[a]||Ut._default,o.innerHTML=u[1]+pt.htmlPrefilter(s)+u[2],c=u[0];c--;)o=o.lastChild;pt.merge(d,o.childNodes),o=h.firstChild,o.textContent=""}else d.push(e.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(i&&pt.inArray(s,i)>-1)r&&r.push(s);else if(l=pt.contains(s.ownerDocument,s),o=_(h.appendChild(s),"script"),l&&y(o),n)for(c=0;s=o[c++];)Wt.test(s.type||"")&&n.push(s);return h}function b(){return!0}function x(){return!1}function C(){try{return nt.activeElement}catch(t){}}function S(t,e,n,i,r,s){var o,a;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=void 0);for(a in e)S(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=x;else if(!r)return t;return 1===s&&(o=r,r=function(t){return pt().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=pt.guid++)),t.each(function(){pt.event.add(this,e,r,i,n)})}function k(t,e){return r(t,"table")&&r(11!==e.nodeType?e:e.firstChild,"tr")?pt(">tbody",t)[0]||t:t}function T(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function P(t){var e=ne.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function j(t,e){var n,i,r,s,o,a,u,l;if(1===e.nodeType){if(Nt.hasData(t)&&(s=Nt.access(t),o=Nt.set(e,s),l=s.events)){delete o.handle,o.events={};for(r in l)for(n=0,i=l[r].length;n<i;n++)pt.event.add(e,r,l[r][n])}Bt.hasData(t)&&(a=Bt.access(t),u=pt.extend({},a),Bt.set(e,u))}}function A(t,e){var n=e.nodeName.toLowerCase();"input"===n&&$t.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function E(t,e,i,r){e=st.apply([],e);var s,o,a,u,l,c,h=0,d=t.length,f=d-1,p=e[0],g=pt.isFunction(p);if(g||d>1&&"string"==typeof p&&!ft.checkClone&&ee.test(p))return t.each(function(n){var s=t.eq(n);g&&(e[0]=p.call(this,n,s.html())),E(s,e,i,r)});if(d&&(s=w(e,t[0].ownerDocument,!1,t,r),o=s.firstChild,1===s.childNodes.length&&(s=o),o||r)){for(a=pt.map(_(s,"script"),T),u=a.length;h<d;h++)l=s,h!==f&&(l=pt.clone(l,!0,!0),u&&pt.merge(a,_(l,"script"))),i.call(t[h],l,h);if(u)for(c=a[a.length-1].ownerDocument,pt.map(a,P),h=0;h<u;h++)l=a[h],Wt.test(l.type||"")&&!Nt.access(l,"globalEval")&&pt.contains(c,l)&&(l.src?pt._evalUrl&&pt._evalUrl(l.src):n(l.textContent.replace(ie,""),c))}return t}function D(t,e,n){for(var i,r=e?pt.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||pt.cleanData(_(i)),i.parentNode&&(n&&pt.contains(i.ownerDocument,i)&&y(_(i,"script")),i.parentNode.removeChild(i));return t}function M(t,e,n){var i,r,s,o,a=t.style;return n=n||oe(t),n&&(o=n.getPropertyValue(e)||n[e],""!==o||pt.contains(t.ownerDocument,t)||(o=pt.style(t,e)),!ft.pixelMarginRight()&&se.test(o)&&re.test(e)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function I(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function N(t){if(t in de)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=he.length;n--;)if((t=he[n]+e)in de)return t}function B(t){var e=pt.cssProps[t];return e||(e=pt.cssProps[t]=N(t)||t),e}function L(t,e,n){var i=Ft.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function O(t,e,n,i,r){var s,o=0;for(s=n===(i?"border":"content")?4:"width"===e?1:0;s<4;s+=2)"margin"===n&&(o+=pt.css(t,n+Rt[s],!0,r)),i?("content"===n&&(o-=pt.css(t,"padding"+Rt[s],!0,r)),"margin"!==n&&(o-=pt.css(t,"border"+Rt[s]+"Width",!0,r))):(o+=pt.css(t,"padding"+Rt[s],!0,r),"padding"!==n&&(o+=pt.css(t,"border"+Rt[s]+"Width",!0,r)));return o}function z(t,e,n){var i,r=oe(t),s=M(t,e,r),o="border-box"===pt.css(t,"boxSizing",!1,r);return se.test(s)?s:(i=o&&(ft.boxSizingReliable()||s===t.style[e]),"auto"===s&&(s=t["offset"+e[0].toUpperCase()+e.slice(1)]),(s=parseFloat(s)||0)+O(t,e,n||(o?"border":"content"),i,r)+"px")}function F(t,e,n,i,r){return new F.prototype.init(t,e,n,i,r)}function R(){pe&&(!1===nt.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(R):t.setTimeout(R,pt.fx.interval),pt.fx.tick())}function q(){return t.setTimeout(function(){fe=void 0}),fe=pt.now()}function H(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)n=Rt[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function G(t,e,n){for(var i,r=(W.tweeners[e]||[]).concat(W.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function $(t,e,n){var i,r,s,o,a,u,l,c,h="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&qt(t),m=Nt.get(t,"fxshow");n.queue||(o=pt._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,pt.queue(t,"fx").length||o.empty.fire()})}));for(i in e)if(r=e[i],ge.test(r)){if(delete e[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||pt.style(t,i)}if((u=!pt.isEmptyObject(e))||!pt.isEmptyObject(f)){h&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],l=m&&m.display,null==l&&(l=Nt.get(t,"display")),c=pt.css(t,"display"),"none"===c&&(l?c=l:(v([t],!0),l=t.style.display||l,c=pt.css(t,"display"),v([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===pt.css(t,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),u=!1;for(i in f)u||(m?"hidden"in m&&(g=m.hidden):m=Nt.access(t,"fxshow",{display:l}),s&&(m.hidden=!g),g&&v([t],!0),d.done(function(){g||v([t]),Nt.remove(t,"fxshow");for(i in f)pt.style(t,i,f[i])})),u=G(g?m[i]:0,i,d),i in m||(m[i]=u.start,g&&(u.end=u.start,u.start=0))}}function V(t,e){var n,i,r,s,o;for(n in t)if(i=pt.camelCase(n),r=e[i],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=pt.cssHooks[i])&&"expand"in o){s=o.expand(s),delete t[i];for(n in s)n in t||(t[n]=s[n],e[n]=r)}else e[i]=r}function W(t,e,n){var i,r,s=0,o=W.prefilters.length,a=pt.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var e=fe||q(),n=Math.max(0,l.startTime+l.duration-e),i=n/l.duration||0,s=1-i,o=0,u=l.tweens.length;o<u;o++)l.tweens[o].run(s);return a.notifyWith(t,[l,s,n]),s<1&&u?n:(u||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:pt.extend({},e),opts:pt.extend(!0,{specialEasing:{},easing:pt.easing._default},n),originalProperties:e,originalOptions:n,startTime:fe||q(),duration:n.duration,tweens:[],createTween:function(e,n){var i=pt.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(i),i},stop:function(e){var n=0,i=e?l.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(V(c,l.opts.specialEasing);s<o;s++)if(i=W.prefilters[s].call(l,t,c,l.opts))return pt.isFunction(i.stop)&&(pt._queueHooks(l.elem,l.opts.queue).stop=pt.proxy(i.stop,i)),i;return pt.map(c,G,l),pt.isFunction(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),pt.fx.timer(pt.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}function U(t){return(t.match(At)||[]).join(" ")}function Q(t){return t.getAttribute&&t.getAttribute("class")||""}function X(t,e,n,i){var r;if(Array.isArray(e))pt.each(e,function(e,r){n||Te.test(t)?i(t,r):X(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==pt.type(e))i(t,e);else for(r in e)X(t+"["+r+"]",e[r],n,i)}function Y(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(At)||[];if(pt.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function J(t,e,n,i){function r(a){var u;return s[a]=!0,pt.each(t[a]||[],function(t,a){var l=a(e,n,i);return"string"!=typeof l||o||s[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),r(l),!1)}),u}var s={},o=t===ze;return r(e.dataTypes[0])||!s["*"]&&r("*")}function Z(t,e){var n,i,r=pt.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&pt.extend(!0,t,i),t}function K(t,e,n){for(var i,r,s,o,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){u.unshift(r);break}if(u[0]in n)s=u[0];else{for(r in n){if(!u[0]||t.converters[r+" "+u[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==u[0]&&u.unshift(s),n[s]}function tt(t,e,n,i){var r,s,o,a,u,l={},c=t.dataTypes.slice();if(c[1])for(o in t.converters)l[o.toLowerCase()]=t.converters[o];for(s=c.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!u&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=s,s=c.shift())if("*"===s)s=u;else if("*"!==u&&u!==s){if(!(o=l[u+" "+s]||l["* "+s]))for(r in l)if(a=r.split(" "),a[1]===s&&(o=l[u+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[r]:!0!==l[r]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+u+" to "+s}}}return{state:"success",data:e}}var et=[],nt=t.document,it=Object.getPrototypeOf,rt=et.slice,st=et.concat,ot=et.push,at=et.indexOf,ut={},lt=ut.toString,ct=ut.hasOwnProperty,ht=ct.toString,dt=ht.call(Object),ft={},pt=function(t,e){return new pt.fn.init(t,e)},gt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,mt=/^-ms-/,vt=/-([a-z])/g,_t=function(t,e){return e.toUpperCase()};pt.fn=pt.prototype={jquery:"3.2.1",constructor:pt,length:0,toArray:function(){return rt.call(this)},get:function(t){return null==t?rt.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=pt.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return pt.each(this,t)},map:function(t){return this.pushStack(pt.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(rt.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ot,sort:et.sort,splice:et.splice},pt.extend=pt.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[a]||{},a++),"object"==typeof o||pt.isFunction(o)||(o={}),a===u&&(o=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)n=o[e],i=t[e],o!==i&&(l&&i&&(pt.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,s=n&&Array.isArray(n)?n:[]):s=n&&pt.isPlainObject(n)?n:{},o[e]=pt.extend(l,s,i)):void 0!==i&&(o[e]=i));return o},pt.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===pt.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=pt.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==lt.call(t))&&(!(e=it(t))||"function"==typeof(n=ct.call(e,"constructor")&&e.constructor)&&ht.call(n)===dt)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?ut[lt.call(t)]||"object":typeof t},globalEval:function(t){n(t)},camelCase:function(t){return t.replace(mt,"ms-").replace(vt,_t)},each:function(t,e){var n,r=0;if(i(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(gt,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?pt.merge(n,"string"==typeof t?[t]:t):ot.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:at.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var r,s,o=0,a=[];if(i(t))for(r=t.length;o<r;o++)null!=(s=e(t[o],o,n))&&a.push(s);else for(o in t)null!=(s=e(t[o],o,n))&&a.push(s);return st.apply([],a)},guid:1,proxy:function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),pt.isFunction(t))return i=rt.call(arguments,2),r=function(){return t.apply(e||this,i.concat(rt.call(arguments)))},r.guid=t.guid=t.guid||pt.guid++,r},now:Date.now,support:ft}),"function"==typeof Symbol&&(pt.fn[Symbol.iterator]=et[Symbol.iterator]),pt.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){ut["[object "+e+"]"]=e.toLowerCase()});var yt=function(t){function e(t,e,n,i){var r,s,o,a,u,c,d,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!i&&((e?e.ownerDocument||e:F)!==D&&E(e),e=e||D,I)){if(11!==p&&(u=gt.exec(t)))if(r=u[1]){if(9===p){if(!(o=e.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(f&&(o=f.getElementById(r))&&O(e,o)&&o.id===r)return n.push(o),n}else{if(u[2])return Y.apply(n,e.getElementsByTagName(t)),n;if((r=u[3])&&w.getElementsByClassName&&e.getElementsByClassName)return Y.apply(n,e.getElementsByClassName(r)),n}if(w.qsa&&!$[t+" "]&&(!N||!N.test(t))){if(1!==p)f=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((a=e.getAttribute("id"))?a=a.replace(yt,wt):e.setAttribute("id",a=z),c=S(t),s=c.length;s--;)c[s]="#"+a+" "+h(c[s]);d=c.join(","),f=mt.test(t)&&l(e.parentNode)||e}if(d)try{return Y.apply(n,f.querySelectorAll(d)),n}catch(t){}finally{a===z&&e.removeAttribute("id")}}}return T(t.replace(st,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>b.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[z]=!0,t}function r(t){var e=D.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function s(t,e){for(var n=t.split("|"),i=n.length;i--;)b.attrHandle[n[i]]=e}function o(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function a(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&xt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function c(){}function h(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function d(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=q++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,u){var l,c,h,d=[R,a];if(u){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,u))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(h=e[z]||(e[z]={}),c=h[e.uniqueID]||(h[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((l=c[s])&&l[0]===R&&l[1]===a)return d[2]=l[2];if(c[s]=d,d[2]=t(e,n,u))return!0}return!1}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function p(t,n,i){for(var r=0,s=n.length;r<s;r++)e(t,n[r],i);return i}function g(t,e,n,i,r){for(var s,o=[],a=0,u=t.length,l=null!=e;a<u;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),l&&e.push(a)));return o}function m(t,e,n,r,s,o){return r&&!r[z]&&(r=m(r)),s&&!s[z]&&(s=m(s,o)),i(function(i,o,a,u){var l,c,h,d=[],f=[],m=o.length,v=i||p(e||"*",a.nodeType?[a]:a,[]),_=!t||!i&&e?v:g(v,d,t,a,u),y=n?s||(i?t:m||r)?[]:o:_;if(n&&n(_,y,a,u),r)for(l=g(y,f),r(l,[],a,u),c=l.length;c--;)(h=l[c])&&(y[f[c]]=!(_[f[c]]=h));if(i){if(s||t){if(s){for(l=[],c=y.length;c--;)(h=y[c])&&l.push(_[c]=h);s(null,y=[],l,u)}for(c=y.length;c--;)(h=y[c])&&(l=s?Z(i,h):d[c])>-1&&(i[l]=!(o[l]=h))}}else y=g(y===o?y.splice(m,y.length):y),s?s(null,o,y,u):Y.apply(o,y)})}function v(t){for(var e,n,i,r=t.length,s=b.relative[t[0].type],o=s||b.relative[" "],a=s?1:0,u=d(function(t){return t===e},o,!0),l=d(function(t){return Z(e,t)>-1},o,!0),c=[function(t,n,i){var r=!s&&(i||n!==P)||((e=n).nodeType?u(t,n,i):l(t,n,i));return e=null,r}];a<r;a++)if(n=b.relative[t[a].type])c=[d(f(c),n)];else{if(n=b.filter[t[a].type].apply(null,t[a].matches),n[z]){for(i=++a;i<r&&!b.relative[t[i].type];i++);return m(a>1&&f(c),a>1&&h(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(st,"$1"),n,a<i&&v(t.slice(a,i)),i<r&&v(t=t.slice(i)),i<r&&h(t))}c.push(n)}return f(c)}function _(t,n){var r=n.length>0,s=t.length>0,o=function(i,o,a,u,l){var c,h,d,f=0,p="0",m=i&&[],v=[],_=P,y=i||s&&b.find.TAG("*",l),w=R+=null==_?1:Math.random()||.1,x=y.length;for(l&&(P=o===D||o||l);p!==x&&null!=(c=y[p]);p++){if(s&&c){for(h=0,o||c.ownerDocument===D||(E(c),a=!I);d=t[h++];)if(d(c,o||D,a)){u.push(c);break}l&&(R=w)}r&&((c=!d&&c)&&f--,i&&m.push(c))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(m,v,o,a);if(i){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=Q.call(u));v=g(v)}Y.apply(u,v),l&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(u)}return l&&(R=w,P=_),m};return r?i(o):o}var y,w,b,x,C,S,k,T,P,j,A,E,D,M,I,N,B,L,O,z="sizzle"+1*new Date,F=t.document,R=0,q=0,H=n(),G=n(),$=n(),V=function(t,e){return t===e&&(A=!0),0},W={}.hasOwnProperty,U=[],Q=U.pop,X=U.push,Y=U.push,J=U.slice,Z=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",tt="[\\x20\\t\\r\\n\\f]",et="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",nt="\\["+tt+"*("+et+")(?:"+tt+"*([*^$|!~]?=)"+tt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+et+"))|)"+tt+"*\\]",it=":("+et+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",rt=new RegExp(tt+"+","g"),st=new RegExp("^"+tt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+tt+"+$","g"),ot=new RegExp("^"+tt+"*,"+tt+"*"),at=new RegExp("^"+tt+"*([>+~]|"+tt+")"+tt+"*"),ut=new RegExp("="+tt+"*([^\\]'\"]*?)"+tt+"*\\]","g"),lt=new RegExp(it),ct=new RegExp("^"+et+"$"),ht={ID:new RegExp("^#("+et+")"),CLASS:new RegExp("^\\.("+et+")"),TAG:new RegExp("^("+et+"|[*])"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+tt+"*(even|odd|(([+-]|)(\\d*)n|)"+tt+"*(?:([+-]|)"+tt+"*(\\d+)|))"+tt+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+tt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+tt+"*((?:-\\d)?\\d*)"+tt+"*\\)|)(?=[^-]|$)","i")},dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,gt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,mt=/[+~]/,vt=new RegExp("\\\\([\\da-f]{1,6}"+tt+"?|("+tt+")|.)","ig"),_t=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},yt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,wt=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},bt=function(){E()},xt=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{Y.apply(U=J.call(F.childNodes),F.childNodes),U[F.childNodes.length].nodeType}catch(t){Y={apply:U.length?function(t,e){X.apply(t,J.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},E=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:F;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,M=D.documentElement,I=!C(D),F!==D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",bt,!1):n.attachEvent&&n.attachEvent("onunload",bt)),w.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=r(function(t){return t.appendChild(D.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=pt.test(D.getElementsByClassName),w.getById=r(function(t){return M.appendChild(t).id=z,!D.getElementsByName||!D.getElementsByName(z).length}),w.getById?(b.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n=e.getElementById(t);return n?[n]:[]}}):(b.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),b.find.TAG=w.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},b.find.CLASS=w.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&I)return e.getElementsByClassName(t)},B=[],N=[],(w.qsa=pt.test(D.querySelectorAll))&&(r(function(t){M.appendChild(t).innerHTML="<a id='"+z+"'></a><select id='"+z+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+tt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+tt+"*(?:value|"+K+")"),t.querySelectorAll("[id~="+z+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+z+"+*").length||N.push(".#.+[+~]")}),r(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=D.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+tt+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&N.push(":enabled",":disabled"),M.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(w.matchesSelector=pt.test(L=M.matches||M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&r(function(t){w.disconnectedMatch=L.call(t,"*"),L.call(t,"[s!='']:x"),B.push("!=",it)}),N=N.length&&new RegExp(N.join("|")),B=B.length&&new RegExp(B.join("|")),e=pt.test(M.compareDocumentPosition),O=e||pt.test(M.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return A=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===D||t.ownerDocument===F&&O(F,t)?-1:e===D||e.ownerDocument===F&&O(F,e)?1:j?Z(j,t)-Z(j,e):0:4&n?-1:1)}:function(t,e){if(t===e)return A=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,a=[t],u=[e];if(!r||!s)return t===D?-1:e===D?1:r?-1:s?1:j?Z(j,t)-Z(j,e):0;if(r===s)return o(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;a[i]===u[i];)i++;return i?o(a[i],u[i]):a[i]===F?-1:u[i]===F?1:0},D):D},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==D&&E(t),n=n.replace(ut,"='$1']"),w.matchesSelector&&I&&!$[n+" "]&&(!B||!B.test(n))&&(!N||!N.test(n)))try{var i=L.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return e(n,D,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==D&&E(t),O(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==D&&E(t);var n=b.attrHandle[e.toLowerCase()],i=n&&W.call(b.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:w.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.escape=function(t){return(t+"").replace(yt,wt)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(A=!w.detectDuplicates,j=!w.sortStable&&t.slice(0),t.sort(V),A){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return j=null,t},x=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=x(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=x(e);return n},b=e.selectors={cacheLength:50,createPseudo:i,match:ht,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return ht.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&lt.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+tt+")"+t+"("+tt+"|$)"))&&H(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var s=e.attr(r,t);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(rt," ")+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,u){var l,c,h,d,f,p,g=s!==o?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),_=!u&&!a,y=!1;if(m){if(s){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&_){for(d=m,h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],f=l[0]===R&&l[1],y=f&&l[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(y=f=0)||p.pop();)if(1===d.nodeType&&++y&&d===e){c[t]=[R,f,y];break}}else if(_&&(d=e,h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),l=c[t]||[],f=l[0]===R&&l[1],y=f),!1===y)for(;(d=++f&&d&&d[g]||(y=f=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++y||(_&&(h=d[z]||(d[z]={}),c=h[d.uniqueID]||(h[d.uniqueID]={}),c[t]=[R,y]),d!==e)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,n){var r,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return s[z]?s(n):s.length>1?(r=[t,t,"",n],b.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=s(t,n),o=r.length;o--;)i=Z(t,r[o]),t[i]=!(e[i]=r[o])}):function(t){return s(t,0,r)}):s}},pseudos:{not:i(function(t){var e=[],n=[],r=k(t.replace(st,"$1"));return r[z]?i(function(t,e,n,i){for(var s,o=r(t,null,i,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))}):function(t,i,s){return e[0]=t,r(e,null,s,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(vt,_t),function(e){return(e.textContent||e.innerText||x(e)).indexOf(t)>-1}}),lang:i(function(t){return ct.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,_t).toLowerCase(),function(e){var n;do{if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:a(!1),disabled:a(!0),checked:function(t){
var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[n<0?n+e:n]}),even:u(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}},b.pseudos.nth=b.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[y]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(y);for(y in{submit:!0,reset:!0})b.pseudos[y]=function(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}(y);return c.prototype=b.filters=b.pseudos,b.setFilters=new c,S=e.tokenize=function(t,n){var i,r,s,o,a,u,l,c=G[t+" "];if(c)return n?0:c.slice(0);for(a=t,u=[],l=b.preFilter;a;){i&&!(r=ot.exec(a))||(r&&(a=a.slice(r[0].length)||a),u.push(s=[])),i=!1,(r=at.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(st," ")}),a=a.slice(i.length));for(o in b.filter)!(r=ht[o].exec(a))||l[o]&&!(r=l[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?e.error(t):G(t,u).slice(0)},k=e.compile=function(t,e){var n,i=[],r=[],s=$[t+" "];if(!s){for(e||(e=S(t)),n=e.length;n--;)s=v(e[n]),s[z]?i.push(s):r.push(s);s=$(t,_(r,i)),s.selector=t}return s},T=e.select=function(t,e,n,i){var r,s,o,a,u,c="function"==typeof t&&t,d=!i&&S(t=c.selector||t);if(n=n||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===e.nodeType&&I&&b.relative[s[1].type]){if(!(e=(b.find.ID(o.matches[0].replace(vt,_t),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(s.shift().value.length)}for(r=ht.needsContext.test(t)?0:s.length;r--&&(o=s[r],!b.relative[a=o.type]);)if((u=b.find[a])&&(i=u(o.matches[0].replace(vt,_t),mt.test(s[0].type)&&l(e.parentNode)||e))){if(s.splice(r,1),!(t=i.length&&h(s)))return Y.apply(n,i),n;break}}return(c||k(t,d))(i,e,!I,n,!e||mt.test(t)&&l(e.parentNode)||e),n},w.sortStable=z.split("").sort(V).join("")===z,w.detectDuplicates=!!A,E(),w.sortDetached=r(function(t){return 1&t.compareDocumentPosition(D.createElement("fieldset"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||s("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||s("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||s(K,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);pt.find=yt,pt.expr=yt.selectors,pt.expr[":"]=pt.expr.pseudos,pt.uniqueSort=pt.unique=yt.uniqueSort,pt.text=yt.getText,pt.isXMLDoc=yt.isXML,pt.contains=yt.contains,pt.escapeSelector=yt.escape;var wt=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&pt(t).is(n))break;i.push(t)}return i},bt=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},xt=pt.expr.match.needsContext,Ct=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,St=/^.[^:#\[\.,]*$/;pt.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?pt.find.matchesSelector(i,t)?[i]:[]:pt.find.matches(t,pt.grep(e,function(t){return 1===t.nodeType}))},pt.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(pt(t).filter(function(){for(e=0;e<i;e++)if(pt.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)pt.find(t,r[e],n);return i>1?pt.uniqueSort(n):n},filter:function(t){return this.pushStack(s(this,t||[],!1))},not:function(t){return this.pushStack(s(this,t||[],!0))},is:function(t){return!!s(this,"string"==typeof t&&xt.test(t)?pt(t):t||[],!1).length}});var kt,Tt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(pt.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||kt,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:Tt.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof pt?e[0]:e,pt.merge(this,pt.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:nt,!0)),Ct.test(i[1])&&pt.isPlainObject(e))for(i in e)pt.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return r=nt.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):pt.isFunction(t)?void 0!==n.ready?n.ready(t):t(pt):pt.makeArray(t,this)}).prototype=pt.fn,kt=pt(nt);var Pt=/^(?:parents|prev(?:Until|All))/,jt={children:!0,contents:!0,next:!0,prev:!0};pt.fn.extend({has:function(t){var e=pt(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(pt.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&pt(t);if(!xt.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&pt.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?pt.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?at.call(pt(t),this[0]):at.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(pt.uniqueSort(pt.merge(this.get(),pt(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),pt.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return wt(t,"parentNode")},parentsUntil:function(t,e,n){return wt(t,"parentNode",n)},next:function(t){return o(t,"nextSibling")},prev:function(t){return o(t,"previousSibling")},nextAll:function(t){return wt(t,"nextSibling")},prevAll:function(t){return wt(t,"previousSibling")},nextUntil:function(t,e,n){return wt(t,"nextSibling",n)},prevUntil:function(t,e,n){return wt(t,"previousSibling",n)},siblings:function(t){return bt((t.parentNode||{}).firstChild,t)},children:function(t){return bt(t.firstChild)},contents:function(t){return r(t,"iframe")?t.contentDocument:(r(t,"template")&&(t=t.content||t),pt.merge([],t.childNodes))}},function(t,e){pt.fn[t]=function(n,i){var r=pt.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=pt.filter(i,r)),this.length>1&&(jt[t]||pt.uniqueSort(r),Pt.test(t)&&r.reverse()),this.pushStack(r)}});var At=/[^\x20\t\r\n\f]+/g;pt.Callbacks=function(t){t="string"==typeof t?a(t):pt.extend({},t);var e,n,i,r,s=[],o=[],u=-1,l=function(){for(r=r||t.once,i=e=!0;o.length;u=-1)for(n=o.shift();++u<s.length;)!1===s[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},c={add:function(){return s&&(n&&!e&&(u=s.length-1,o.push(n)),function e(n){pt.each(n,function(n,i){pt.isFunction(i)?t.unique&&c.has(i)||s.push(i):i&&i.length&&"string"!==pt.type(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return pt.each(arguments,function(t,e){for(var n;(n=pt.inArray(e,s,n))>-1;)s.splice(n,1),n<=u&&u--}),this},has:function(t){return t?pt.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=n||[],n=[t,n.slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},pt.extend({Deferred:function(e){var n=[["notify","progress",pt.Callbacks("memory"),pt.Callbacks("memory"),2],["resolve","done",pt.Callbacks("once memory"),pt.Callbacks("once memory"),0,"resolved"],["reject","fail",pt.Callbacks("once memory"),pt.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return pt.Deferred(function(e){pt.each(n,function(n,i){var r=pt.isFunction(t[i[4]])&&t[i[4]];s[i[1]](function(){var t=r&&r.apply(this,arguments);t&&pt.isFunction(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){function s(e,n,i,r){return function(){var a=this,c=arguments,h=function(){var t,h;if(!(e<o)){if((t=i.apply(a,c))===n.promise())throw new TypeError("Thenable self-resolution");h=t&&("object"==typeof t||"function"==typeof t)&&t.then,pt.isFunction(h)?r?h.call(t,s(o,n,u,r),s(o,n,l,r)):(o++,h.call(t,s(o,n,u,r),s(o,n,l,r),s(o,n,u,n.notifyWith))):(i!==u&&(a=void 0,c=[t]),(r||n.resolveWith)(a,c))}},d=r?h:function(){try{h()}catch(t){pt.Deferred.exceptionHook&&pt.Deferred.exceptionHook(t,d.stackTrace),e+1>=o&&(i!==l&&(a=void 0,c=[t]),n.rejectWith(a,c))}};e?d():(pt.Deferred.getStackHook&&(d.stackTrace=pt.Deferred.getStackHook()),t.setTimeout(d))}}var o=0;return pt.Deferred(function(t){n[0][3].add(s(0,t,pt.isFunction(r)?r:u,t.notifyWith)),n[1][3].add(s(0,t,pt.isFunction(e)?e:u)),n[2][3].add(s(0,t,pt.isFunction(i)?i:l))}).promise()},promise:function(t){return null!=t?pt.extend(t,r):r}},s={};return pt.each(n,function(t,e){var o=e[2],a=e[5];r[e[1]]=o.add,a&&o.add(function(){i=a},n[3-t][2].disable,n[0][2].lock),o.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=rt.call(arguments),s=pt.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?rt.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(c(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||pt.isFunction(r[n]&&r[n].then)))return s.then();for(;n--;)c(r[n],o(n),s.reject);return s.promise()}});var Et=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;pt.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&Et.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},pt.readyException=function(e){t.setTimeout(function(){throw e})};var Dt=pt.Deferred();pt.fn.ready=function(t){return Dt.then(t).catch(function(t){pt.readyException(t)}),this},pt.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--pt.readyWait:pt.isReady)||(pt.isReady=!0,!0!==t&&--pt.readyWait>0||Dt.resolveWith(nt,[pt]))}}),pt.ready.then=Dt.then,"complete"===nt.readyState||"loading"!==nt.readyState&&!nt.documentElement.doScroll?t.setTimeout(pt.ready):(nt.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h));var Mt=function(t,e,n,i,r,s,o){var a=0,u=t.length,l=null==n;if("object"===pt.type(n)){r=!0;for(a in n)Mt(t,e,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,pt.isFunction(i)||(o=!0),l&&(o?(e.call(t,i),e=null):(l=e,e=function(t,e,n){return l.call(pt(t),n)})),e))for(;a<u;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:l?e.call(t):u?e(t[0],n):s},It=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};d.uid=1,d.prototype={cache:function(t){var e=t[this.expando];return e||(e={},It(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[pt.camelCase(e)]=n;else for(i in e)r[pt.camelCase(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][pt.camelCase(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){Array.isArray(e)?e=e.map(pt.camelCase):(e=pt.camelCase(e),e=e in i?[e]:e.match(At)||[]),n=e.length;for(;n--;)delete i[e[n]]}(void 0===e||pt.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!pt.isEmptyObject(e)}};var Nt=new d,Bt=new d,Lt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ot=/[A-Z]/g;pt.extend({hasData:function(t){return Bt.hasData(t)||Nt.hasData(t)},data:function(t,e,n){return Bt.access(t,e,n)},removeData:function(t,e){Bt.remove(t,e)},_data:function(t,e,n){return Nt.access(t,e,n)},_removeData:function(t,e){Nt.remove(t,e)}}),pt.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=Bt.get(s),1===s.nodeType&&!Nt.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=pt.camelCase(i.slice(5)),p(s,i,r[i])));Nt.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){Bt.set(this,t)}):Mt(this,function(e){var n;if(s&&void 0===e){if(void 0!==(n=Bt.get(s,t)))return n;if(void 0!==(n=p(s,t)))return n}else this.each(function(){Bt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){Bt.remove(this,t)})}}),pt.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=Nt.get(t,e),n&&(!i||Array.isArray(n)?i=Nt.access(t,e,pt.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=pt.queue(t,e),i=n.length,r=n.shift(),s=pt._queueHooks(t,e),o=function(){pt.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Nt.get(t,n)||Nt.access(t,n,{empty:pt.Callbacks("once memory").add(function(){Nt.remove(t,[e+"queue",n])})})}}),pt.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?pt.queue(this[0],t):void 0===e?this:this.each(function(){var n=pt.queue(this,t,e);pt._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&pt.dequeue(this,t)})},dequeue:function(t){return this.each(function(){pt.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=pt.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=Nt.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var zt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ft=new RegExp("^(?:([+-])=|)("+zt+")([a-z%]*)$","i"),Rt=["Top","Right","Bottom","Left"],qt=function(t,e){return t=e||t,"none"===t.style.display||""===t.style.display&&pt.contains(t.ownerDocument,t)&&"none"===pt.css(t,"display")},Ht=function(t,e,n,i){var r,s,o={};for(s in e)o[s]=t.style[s],t.style[s]=e[s];r=n.apply(t,i||[]);for(s in e)t.style[s]=o[s];return r},Gt={};pt.fn.extend({show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){qt(this)?pt(this).show():pt(this).hide()})}});var $t=/^(?:checkbox|radio)$/i,Vt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Wt=/^$|\/(?:java|ecma)script/i,Ut={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ut.optgroup=Ut.option,Ut.tbody=Ut.tfoot=Ut.colgroup=Ut.caption=Ut.thead,Ut.th=Ut.td;var Qt=/<|&#?\w+;/;!function(){var t=nt.createDocumentFragment(),e=t.appendChild(nt.createElement("div")),n=nt.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ft.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",ft.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Xt=nt.documentElement,Yt=/^key/,Jt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Zt=/^([^.]*)(?:\.(.+)|)/;pt.event={global:{},add:function(t,e,n,i,r){var s,o,a,u,l,c,h,d,f,p,g,m=Nt.get(t);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),r&&pt.find.matchesSelector(Xt,r),n.guid||(n.guid=pt.guid++),(u=m.events)||(u=m.events={}),(o=m.handle)||(o=m.handle=function(e){return void 0!==pt&&pt.event.triggered!==e.type?pt.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(At)||[""],l=e.length;l--;)a=Zt.exec(e[l])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f&&(h=pt.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=pt.event.special[f]||{},c=pt.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&pt.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=u[f])||(d=u[f]=[],d.delegateCount=0,h.setup&&!1!==h.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),h.add&&(h.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),pt.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,o,a,u,l,c,h,d,f,p,g,m=Nt.hasData(t)&&Nt.get(t);if(m&&(u=m.events)){for(e=(e||"").match(At)||[""],l=e.length;l--;)if(a=Zt.exec(e[l])||[],f=g=a[1],p=(a[2]||"").split(".").sort(),f){for(h=pt.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=u[f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)c=d[s],!r&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(d.splice(s,1),c.selector&&d.delegateCount--,h.remove&&h.remove.call(t,c));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,m.handle)||pt.removeEvent(t,f,m.handle),delete u[f])}else for(f in u)pt.event.remove(t,f+e[l],n,i,!0);pt.isEmptyObject(u)&&Nt.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=pt.event.fix(t),u=new Array(arguments.length),l=(Nt.get(this,"events")||{})[a.type]||[],c=pt.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(o=pt.event.handlers.call(this,a,l),e=0;(r=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,void 0!==(i=((pt.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,u))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,i,r,s,o,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(s=[],o={},n=0;n<u;n++)i=e[n],r=i.selector+" ",void 0===o[r]&&(o[r]=i.needsContext?pt(r,this).index(l)>-1:pt.find(r,this,null,[l]).length),o[r]&&s.push(i);s.length&&a.push({elem:l,handlers:s})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(pt.Event.prototype,t,{enumerable:!0,configurable:!0,get:pt.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[pt.expando]?t:new pt.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==C()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===C()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&r(this,"input"))return this.click(),!1},_default:function(t){return r(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},pt.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},pt.Event=function(t,e){if(!(this instanceof pt.Event))return new pt.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?b:x,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&pt.extend(this,e),this.timeStamp=t&&t.timeStamp||pt.now(),this[pt.expando]=!0},pt.Event.prototype={constructor:pt.Event,isDefaultPrevented:x,isPropagationStopped:x,isImmediatePropagationStopped:x,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=b,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=b,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=b,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},pt.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Yt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Jt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},pt.event.addProp),pt.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){pt.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,s=t.handleObj;return r&&(r===i||pt.contains(i,r))||(t.type=s.origType,n=s.handler.apply(this,arguments),t.type=e),n}}}),pt.fn.extend({on:function(t,e,n,i){return S(this,t,e,n,i)},one:function(t,e,n,i){return S(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,pt(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=x),this.each(function(){pt.event.remove(this,t,n,e)})}});var Kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,te=/<script|<style|<link/i,ee=/checked\s*(?:[^=]|=\s*.checked.)/i,ne=/^true\/(.*)/,ie=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;pt.extend({htmlPrefilter:function(t){return t.replace(Kt,"<$1></$2>")},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),u=pt.contains(t.ownerDocument,t);if(!(ft.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||pt.isXMLDoc(t)))for(o=_(a),s=_(t),i=0,r=s.length;i<r;i++)A(s[i],o[i]);if(e)if(n)for(s=s||_(t),o=o||_(a),i=0,r=s.length;i<r;i++)j(s[i],o[i]);else j(t,a);return o=_(a,"script"),o.length>0&&y(o,!u&&_(t,"script")),a},cleanData:function(t){for(var e,n,i,r=pt.event.special,s=0;void 0!==(n=t[s]);s++)if(It(n)){if(e=n[Nt.expando]){if(e.events)for(i in e.events)r[i]?pt.event.remove(n,i):pt.removeEvent(n,i,e.handle);n[Nt.expando]=void 0}n[Bt.expando]&&(n[Bt.expando]=void 0)}}}),pt.fn.extend({detach:function(t){return D(this,t,!0)},remove:function(t){return D(this,t)},text:function(t){return Mt(this,function(t){return void 0===t?pt.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){k(this,t).appendChild(t)}})},prepend:function(){return E(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=k(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return E(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(pt.cleanData(_(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return pt.clone(this,t,e)})},html:function(t){return Mt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!te.test(t)&&!Ut[(Vt.exec(t)||["",""])[1].toLowerCase()]){t=pt.htmlPrefilter(t);try{for(;n<i;n++)e=this[n]||{},1===e.nodeType&&(pt.cleanData(_(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return E(this,arguments,function(e){var n=this.parentNode;pt.inArray(this,t)<0&&(pt.cleanData(_(this)),n&&n.replaceChild(e,this))},t)}}),pt.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){pt.fn[t]=function(t){for(var n,i=[],r=pt(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),pt(r[o])[e](n),ot.apply(i,n.get());return this.pushStack(i)}});var re=/^margin/,se=new RegExp("^("+zt+")(?!px)[a-z%]+$","i"),oe=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",Xt.appendChild(o);var e=t.getComputedStyle(a);n="1%"!==e.top,s="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,Xt.removeChild(o),a=null}}var n,i,r,s,o=nt.createElement("div"),a=nt.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",ft.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),pt.extend(ft,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),s}}))}();var ae=/^(none|table(?!-c[ea]).+)/,ue=/^--/,le={position:"absolute",visibility:"hidden",display:"block"},ce={letterSpacing:"0",fontWeight:"400"},he=["Webkit","Moz","ms"],de=nt.createElement("div").style;pt.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=M(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=pt.camelCase(e),u=ue.test(e),l=t.style;if(u||(e=B(a)),o=pt.cssHooks[e]||pt.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:l[e];s=typeof n,"string"===s&&(r=Ft.exec(n))&&r[1]&&(n=g(t,e,r),s="number"),null!=n&&n===n&&("number"===s&&(n+=r&&r[3]||(pt.cssNumber[a]?"":"px")),ft.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,i){var r,s,o,a=pt.camelCase(e);return ue.test(e)||(e=B(a)),o=pt.cssHooks[e]||pt.cssHooks[a],o&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=M(t,e,i)),"normal"===r&&e in ce&&(r=ce[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),pt.each(["height","width"],function(t,e){pt.cssHooks[e]={get:function(t,n,i){if(n)return!ae.test(pt.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?z(t,e,i):Ht(t,le,function(){return z(t,e,i)})},set:function(t,n,i){var r,s=i&&oe(t),o=i&&O(t,e,i,"border-box"===pt.css(t,"boxSizing",!1,s),s);return o&&(r=Ft.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=pt.css(t,e)),L(t,n,o)}}}),pt.cssHooks.marginLeft=I(ft.reliableMarginLeft,function(t,e){if(e)return(parseFloat(M(t,"marginLeft"))||t.getBoundingClientRect().left-Ht(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),pt.each({margin:"",padding:"",border:"Width"},function(t,e){pt.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+Rt[i]+e]=s[i]||s[i-2]||s[0];return r}},re.test(t)||(pt.cssHooks[t+e].set=L)}),pt.fn.extend({css:function(t,e){return Mt(this,function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=oe(t),r=e.length;o<r;o++)s[e[o]]=pt.css(t,e[o],!1,i);return s}return void 0!==n?pt.style(t,e,n):pt.css(t,e)},t,e,arguments.length>1)}}),pt.Tween=F,F.prototype={constructor:F,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||pt.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(pt.cssNumber[n]?"":"px")},cur:function(){var t=F.propHooks[this.prop];return t&&t.get?t.get(this):F.propHooks._default.get(this)},run:function(t){var e,n=F.propHooks[this.prop];return this.options.duration?this.pos=e=pt.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):F.propHooks._default.set(this),this}},F.prototype.init.prototype=F.prototype,F.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=pt.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){pt.fx.step[t.prop]?pt.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[pt.cssProps[t.prop]]&&!pt.cssHooks[t.prop]?t.elem[t.prop]=t.now:pt.style(t.elem,t.prop,t.now+t.unit)}}},F.propHooks.scrollTop=F.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},pt.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},pt.fx=F.prototype.init,pt.fx.step={};var fe,pe,ge=/^(?:toggle|show|hide)$/,me=/queueHooks$/;pt.Animation=pt.extend(W,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return g(n.elem,t,Ft.exec(e),n),n}]},tweener:function(t,e){pt.isFunction(t)?(e=t,t=["*"]):t=t.match(At);for(var n,i=0,r=t.length;i<r;i++)n=t[i],W.tweeners[n]=W.tweeners[n]||[],W.tweeners[n].unshift(e)},prefilters:[$],prefilter:function(t,e){e?W.prefilters.unshift(t):W.prefilters.push(t)}}),pt.speed=function(t,e,n){var i=t&&"object"==typeof t?pt.extend({},t):{complete:n||!n&&e||pt.isFunction(t)&&t,duration:t,easing:n&&e||e&&!pt.isFunction(e)&&e};return pt.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in pt.fx.speeds?i.duration=pt.fx.speeds[i.duration]:i.duration=pt.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){pt.isFunction(i.old)&&i.old.call(this),i.queue&&pt.dequeue(this,i.queue)},i},pt.fn.extend({fadeTo:function(t,e,n,i){return this.filter(qt).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=pt.isEmptyObject(t),s=pt.speed(e,n,i),o=function(){var e=W(this,pt.extend({},t),s);(r||Nt.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=pt.timers,o=Nt.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&me.test(r)&&i(o[r])
;for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||pt.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=Nt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=pt.timers,o=i?i.length:0;for(n.finish=!0,pt.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),pt.each(["toggle","show","hide"],function(t,e){var n=pt.fn[e];pt.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(H(e,!0),t,i,r)}}),pt.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){pt.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),pt.timers=[],pt.fx.tick=function(){var t,e=0,n=pt.timers;for(fe=pt.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||pt.fx.stop(),fe=void 0},pt.fx.timer=function(t){pt.timers.push(t),pt.fx.start()},pt.fx.interval=13,pt.fx.start=function(){pe||(pe=!0,R())},pt.fx.stop=function(){pe=null},pt.fx.speeds={slow:600,fast:200,_default:400},pt.fn.delay=function(e,n){return e=pt.fx?pt.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=nt.createElement("input"),e=nt.createElement("select"),n=e.appendChild(nt.createElement("option"));t.type="checkbox",ft.checkOn=""!==t.value,ft.optSelected=n.selected,t=nt.createElement("input"),t.value="t",t.type="radio",ft.radioValue="t"===t.value}();var ve,_e=pt.expr.attrHandle;pt.fn.extend({attr:function(t,e){return Mt(this,pt.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){pt.removeAttr(this,t)})}}),pt.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?pt.prop(t,e,n):(1===s&&pt.isXMLDoc(t)||(r=pt.attrHooks[e.toLowerCase()]||(pt.expr.match.bool.test(e)?ve:void 0)),void 0!==n?null===n?void pt.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:(i=pt.find.attr(t,e),null==i?void 0:i))},attrHooks:{type:{set:function(t,e){if(!ft.radioValue&&"radio"===e&&r(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(At);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),ve={set:function(t,e,n){return!1===e?pt.removeAttr(t,n):t.setAttribute(n,n),n}},pt.each(pt.expr.match.bool.source.match(/\w+/g),function(t,e){var n=_e[e]||pt.find.attr;_e[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=_e[o],_e[o]=r,r=null!=n(t,e,i)?o:null,_e[o]=s),r}});var ye=/^(?:input|select|textarea|button)$/i,we=/^(?:a|area)$/i;pt.fn.extend({prop:function(t,e){return Mt(this,pt.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[pt.propFix[t]||t]})}}),pt.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&pt.isXMLDoc(t)||(e=pt.propFix[e]||e,r=pt.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=pt.find.attr(t,"tabindex");return e?parseInt(e,10):ye.test(t.nodeName)||we.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ft.optSelected||(pt.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),pt.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){pt.propFix[this.toLowerCase()]=this}),pt.fn.extend({addClass:function(t){var e,n,i,r,s,o,a,u=0;if(pt.isFunction(t))return this.each(function(e){pt(this).addClass(t.call(this,e,Q(this)))});if("string"==typeof t&&t)for(e=t.match(At)||[];n=this[u++];)if(r=Q(n),i=1===n.nodeType&&" "+U(r)+" "){for(o=0;s=e[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a=U(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,i,r,s,o,a,u=0;if(pt.isFunction(t))return this.each(function(e){pt(this).removeClass(t.call(this,e,Q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(At)||[];n=this[u++];)if(r=Q(n),i=1===n.nodeType&&" "+U(r)+" "){for(o=0;s=e[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");a=U(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):pt.isFunction(t)?this.each(function(n){pt(this).toggleClass(t.call(this,n,Q(this),e),e)}):this.each(function(){var e,i,r,s;if("string"===n)for(i=0,r=pt(this),s=t.match(At)||[];e=s[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==n||(e=Q(this),e&&Nt.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Nt.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(Q(n))+" ").indexOf(e)>-1)return!0;return!1}});var be=/\r/g;pt.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=pt.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,pt(this).val()):t,null==r?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=pt.map(r,function(t){return null==t?"":t+""})),(e=pt.valHooks[this.type]||pt.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return(e=pt.valHooks[r.type]||pt.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(be,""):null==n?"":n)}}}),pt.extend({valHooks:{option:{get:function(t){var e=pt.find.attr(t,"value");return null!=e?e:U(pt.text(t))}},select:{get:function(t){var e,n,i,s=t.options,o=t.selectedIndex,a="select-one"===t.type,u=a?null:[],l=a?o+1:s.length;for(i=o<0?l:a?o:0;i<l;i++)if(n=s[i],(n.selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!r(n.parentNode,"optgroup"))){if(e=pt(n).val(),a)return e;u.push(e)}return u},set:function(t,e){for(var n,i,r=t.options,s=pt.makeArray(e),o=r.length;o--;)i=r[o],(i.selected=pt.inArray(pt.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),pt.each(["radio","checkbox"],function(){pt.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=pt.inArray(pt(t).val(),e)>-1}},ft.checkOn||(pt.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xe=/^(?:focusinfocus|focusoutblur)$/;pt.extend(pt.event,{trigger:function(e,n,i,r){var s,o,a,u,l,c,h,d=[i||nt],f=ct.call(e,"type")?e.type:e,p=ct.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||nt,3!==i.nodeType&&8!==i.nodeType&&!xe.test(f+pt.event.triggered)&&(f.indexOf(".")>-1&&(p=f.split("."),f=p.shift(),p.sort()),l=f.indexOf(":")<0&&"on"+f,e=e[pt.expando]?e:new pt.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:pt.makeArray(n,[e]),h=pt.event.special[f]||{},r||!h.trigger||!1!==h.trigger.apply(i,n))){if(!r&&!h.noBubble&&!pt.isWindow(i)){for(u=h.delegateType||f,xe.test(u+f)||(o=o.parentNode);o;o=o.parentNode)d.push(o),a=o;a===(i.ownerDocument||nt)&&d.push(a.defaultView||a.parentWindow||t)}for(s=0;(o=d[s++])&&!e.isPropagationStopped();)e.type=s>1?u:h.bindType||f,c=(Nt.get(o,"events")||{})[e.type]&&Nt.get(o,"handle"),c&&c.apply(o,n),(c=l&&o[l])&&c.apply&&It(o)&&(e.result=c.apply(o,n),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),n)||!It(i)||l&&pt.isFunction(i[f])&&!pt.isWindow(i)&&(a=i[l],a&&(i[l]=null),pt.event.triggered=f,i[f](),pt.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(t,e,n){var i=pt.extend(new pt.Event,n,{type:t,isSimulated:!0});pt.event.trigger(i,null,e)}}),pt.fn.extend({trigger:function(t,e){return this.each(function(){pt.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return pt.event.trigger(t,e,n,!0)}}),pt.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){pt.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),pt.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),ft.focusin="onfocusin"in t,ft.focusin||pt.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){pt.event.simulate(e,t.target,pt.event.fix(t))};pt.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=Nt.access(i,e);r||i.addEventListener(t,n,!0),Nt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Nt.access(i,e)-1;r?Nt.access(i,e,r):(i.removeEventListener(t,n,!0),Nt.remove(i,e))}}});var Ce=t.location,Se=pt.now(),ke=/\?/;pt.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||pt.error("Invalid XML: "+e),n};var Te=/\[\]$/,Pe=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,Ae=/^(?:input|select|textarea|keygen)/i;pt.param=function(t,e){var n,i=[],r=function(t,e){var n=pt.isFunction(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!pt.isPlainObject(t))pt.each(t,function(){r(this.name,this.value)});else for(n in t)X(n,t[n],e,r);return i.join("&")},pt.fn.extend({serialize:function(){return pt.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=pt.prop(this,"elements");return t?pt.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!pt(this).is(":disabled")&&Ae.test(this.nodeName)&&!je.test(t)&&(this.checked||!$t.test(t))}).map(function(t,e){var n=pt(this).val();return null==n?null:Array.isArray(n)?pt.map(n,function(t){return{name:e.name,value:t.replace(Pe,"\r\n")}}):{name:e.name,value:n.replace(Pe,"\r\n")}}).get()}});var Ee=/%20/g,De=/#.*$/,Me=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ne=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Be=/^(?:GET|HEAD)$/,Le=/^\/\//,Oe={},ze={},Fe="*/".concat("*"),Re=nt.createElement("a");Re.href=Ce.href,pt.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:Ne.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Fe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":pt.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Z(Z(t,pt.ajaxSettings),e):Z(pt.ajaxSettings,t)},ajaxPrefilter:Y(Oe),ajaxTransport:Y(ze),ajax:function(e,n){function i(e,n,i,a){var l,d,f,w,b,x=n;c||(c=!0,u&&t.clearTimeout(u),r=void 0,o=a||"",C.readyState=e>0?4:0,l=e>=200&&e<300||304===e,i&&(w=K(p,C,i)),w=tt(p,w,C,l),l?(p.ifModified&&(b=C.getResponseHeader("Last-Modified"),b&&(pt.lastModified[s]=b),(b=C.getResponseHeader("etag"))&&(pt.etag[s]=b)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=w.state,d=w.data,f=w.error,l=!f)):(f=x,!e&&x||(x="error",e<0&&(e=0))),C.status=e,C.statusText=(n||x)+"",l?v.resolveWith(g,[d,x,C]):v.rejectWith(g,[C,x,f]),C.statusCode(y),y=void 0,h&&m.trigger(l?"ajaxSuccess":"ajaxError",[C,p,l?d:f]),_.fireWith(g,[C,x]),h&&(m.trigger("ajaxComplete",[C,p]),--pt.active||pt.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var r,s,o,a,u,l,c,h,d,f,p=pt.ajaxSetup({},n),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?pt(g):pt.event,v=pt.Deferred(),_=pt.Callbacks("once memory"),y=p.statusCode||{},w={},b={},x="canceled",C={readyState:0,getResponseHeader:function(t){var e;if(c){if(!a)for(a={};e=Ie.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(t,e){return null==c&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,w[t]=e),this},overrideMimeType:function(t){return null==c&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(c)C.always(t[C.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return r&&r.abort(e),i(0,e),this}};if(v.promise(C),p.url=((e||p.url||Ce.href)+"").replace(Le,Ce.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(At)||[""],null==p.crossDomain){l=nt.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Re.protocol+"//"+Re.host!=l.protocol+"//"+l.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=pt.param(p.data,p.traditional)),J(Oe,p,n,C),c)return C;h=pt.event&&p.global,h&&0==pt.active++&&pt.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Be.test(p.type),s=p.url.replace(De,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Ee,"+")):(f=p.url.slice(s.length),p.data&&(s+=(ke.test(s)?"&":"?")+p.data,delete p.data),!1===p.cache&&(s=s.replace(Me,"$1"),f=(ke.test(s)?"&":"?")+"_="+Se+++f),p.url=s+f),p.ifModified&&(pt.lastModified[s]&&C.setRequestHeader("If-Modified-Since",pt.lastModified[s]),pt.etag[s]&&C.setRequestHeader("If-None-Match",pt.etag[s])),(p.data&&p.hasContent&&!1!==p.contentType||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Fe+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(g,C,p)||c))return C.abort();if(x="abort",_.add(p.complete),C.done(p.success),C.fail(p.error),r=J(ze,p,n,C)){if(C.readyState=1,h&&m.trigger("ajaxSend",[C,p]),c)return C;p.async&&p.timeout>0&&(u=t.setTimeout(function(){C.abort("timeout")},p.timeout));try{c=!1,r.send(w,i)}catch(t){if(c)throw t;i(-1,t)}}else i(-1,"No Transport");return C},getJSON:function(t,e,n){return pt.get(t,e,n,"json")},getScript:function(t,e){return pt.get(t,void 0,e,"script")}}),pt.each(["get","post"],function(t,e){pt[e]=function(t,n,i,r){return pt.isFunction(n)&&(r=r||i,i=n,n=void 0),pt.ajax(pt.extend({url:t,type:e,dataType:r,data:n,success:i},pt.isPlainObject(t)&&t))}}),pt._evalUrl=function(t){return pt.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},pt.fn.extend({wrapAll:function(t){var e;return this[0]&&(pt.isFunction(t)&&(t=t.call(this[0])),e=pt(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return pt.isFunction(t)?this.each(function(e){pt(this).wrapInner(t.call(this,e))}):this.each(function(){var e=pt(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=pt.isFunction(t);return this.each(function(n){pt(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){pt(this).replaceWith(this.childNodes)}),this}}),pt.expr.pseudos.hidden=function(t){return!pt.expr.pseudos.visible(t)},pt.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},pt.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var qe={0:200,1223:204},He=pt.ajaxSettings.xhr();ft.cors=!!He&&"withCredentials"in He,ft.ajax=He=!!He,pt.ajaxTransport(function(e){var n,i;if(ft.cors||He&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);n=function(t){return function(){n&&(n=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(qe[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),i=a.onerror=n("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{a.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),pt.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),pt.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return pt.globalEval(t),t}}}),pt.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),pt.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=pt("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),nt.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Ge=[],$e=/(=)\?(?=&|$)|\?\?/;pt.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ge.pop()||pt.expando+"_"+Se++;return this[t]=!0,t}}),pt.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,o,a=!1!==e.jsonp&&($e.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$e.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=pt.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace($e,"$1"+r):!1!==e.jsonp&&(e.url+=(ke.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||pt.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){o=arguments},i.always(function(){void 0===s?pt(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,Ge.push(r)),o&&pt.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),ft.createHTMLDocument=function(){var t=nt.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),pt.parseHTML=function(t,e,n){if("string"!=typeof t)return[];"boolean"==typeof e&&(n=e,e=!1);var i,r,s;return e||(ft.createHTMLDocument?(e=nt.implementation.createHTMLDocument(""),i=e.createElement("base"),i.href=nt.location.href,e.head.appendChild(i)):e=nt),r=Ct.exec(t),s=!n&&[],r?[e.createElement(r[1])]:(r=w([t],e,s),s&&s.length&&pt(s).remove(),pt.merge([],r.childNodes))},pt.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=U(t.slice(a)),t=t.slice(0,a)),pt.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&pt.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,o.html(i?pt("<div>").append(pt.parseHTML(t)).find(i):t)}).always(n&&function(t,e){o.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},pt.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){pt.fn[e]=function(t){return this.on(e,t)}}),pt.expr.pseudos.animated=function(t){return pt.grep(pt.timers,function(e){return t===e.elem}).length},pt.offset={setOffset:function(t,e,n){var i,r,s,o,a,u,l,c=pt.css(t,"position"),h=pt(t),d={};"static"===c&&(t.style.position="relative"),a=h.offset(),s=pt.css(t,"top"),u=pt.css(t,"left"),l=("absolute"===c||"fixed"===c)&&(s+u).indexOf("auto")>-1,l?(i=h.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(u)||0),pt.isFunction(e)&&(e=e.call(t,n,pt.extend({},a))),null!=e.top&&(d.top=e.top-a.top+o),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):h.css(d)}},pt.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){pt.offset.setOffset(this,t,e)});var e,n,i,r,s=this[0];if(s)return s.getClientRects().length?(i=s.getBoundingClientRect(),e=s.ownerDocument,n=e.documentElement,r=e.defaultView,{top:i.top+r.pageYOffset-n.clientTop,left:i.left+r.pageXOffset-n.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===pt.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),r(t[0],"html")||(i=t.offset()),i={top:i.top+pt.css(t[0],"borderTopWidth",!0),left:i.left+pt.css(t[0],"borderLeftWidth",!0)}),{top:e.top-i.top-pt.css(n,"marginTop",!0),left:e.left-i.left-pt.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===pt.css(t,"position");)t=t.offsetParent;return t||Xt})}}),pt.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;pt.fn[t]=function(i){return Mt(this,function(t,i,r){var s;if(pt.isWindow(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r},t,i,arguments.length)}}),pt.each(["top","left"],function(t,e){pt.cssHooks[e]=I(ft.pixelPosition,function(t,n){if(n)return n=M(t,e),se.test(n)?pt(t).position()[e]+"px":n})}),pt.each({Height:"height",Width:"width"},function(t,e){pt.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){pt.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return Mt(this,function(e,n,r){var s;return pt.isWindow(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?pt.css(e,n,a):pt.style(e,n,r,a)},e,o?r:void 0,o)}})}),pt.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),pt.holdReady=function(t){t?pt.readyWait++:pt.ready(!0)},pt.isArray=Array.isArray,pt.parseJSON=JSON.parse,pt.nodeName=r;var Ve=t.jQuery,We=t.$;return pt.noConflict=function(e){return t.$===pt&&(t.$=We),e&&t.jQuery===pt&&(t.jQuery=Ve),pt},t.jQuery=pt,pt}),function(t,e,n){function i(n){var i=e.console;s[n]||(s[n]=!0,t.migrateWarnings.push(n),i&&i.warn&&!t.migrateMute&&(i.warn("JQMIGRATE: "+n),t.migrateTrace&&i.trace&&i.trace()))}function r(e,n,r,s){if(Object.defineProperty)try{return void Object.defineProperty(e,n,{configurable:!0,enumerable:!0,get:function(){return i(s),r},set:function(t){i(s),r=t}})}catch(t){}t._definePropertyBroken=!0,e[n]=r}t.migrateVersion="1.4.1";var s={};t.migrateWarnings=[],t.migrateMute=!0,void 0===t.migrateTrace&&(t.migrateTrace=!0),t.migrateReset=function(){s={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&i("jQuery is not compatible with Quirks Mode");var o=t("<input/>",{size:1}).attr("size")&&t.attrFn,a=t.attr,u=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},l=t.attrHooks.value&&t.attrHooks.value.set||function(){},c=/^(?:input|button)$/i,h=/^[238]$/,d=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;r(t,"attrFn",o||{},"jQuery.attrFn is deprecated"),t.attr=function(e,n,r,s){var u=n.toLowerCase(),l=e&&e.nodeType;return s&&(a.length<4&&i("jQuery.fn.attr( props, pass ) is deprecated"),e&&!h.test(l)&&(o?n in o:t.isFunction(t.fn[n])))?t(e)[n](r):("type"===n&&void 0!==r&&c.test(e.nodeName)&&e.parentNode&&i("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[u]&&d.test(u)&&(t.attrHooks[u]={get:function(e,n){var i,r=t.prop(e,n);return!0===r||"boolean"!=typeof r&&(i=e.getAttributeNode(n))&&!1!==i.nodeValue?n.toLowerCase():void 0},set:function(e,n,i){var r;return!1===n?t.removeAttr(e,i):(r=t.propFix[i]||i,r in e&&(e[r]=!0),e.setAttribute(i,i.toLowerCase())),i}},f.test(u)&&i("jQuery.fn.attr('"+u+"') might use property instead of attribute")),a.call(t,e,n,r))},t.attrHooks.value={get:function(t,e){var n=(t.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&i("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var n=(t.nodeName||"").toLowerCase();if("button"===n)return l.apply(this,arguments);"input"!==n&&"option"!==n&&i("jQuery.fn.attr('value', val) no longer sets properties"),t.value=e}};var p,g,m=t.fn.init,v=t.find,_=t.parseJSON,y=/^\s*</,w=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,b=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,x=/^([^<]*)(<[\w\W]+>)([^>]*)$/;t.fn.init=function(e,n,r){var s,o;return e&&"string"==typeof e&&!t.isPlainObject(n)&&(s=x.exec(t.trim(e)))&&s[0]&&(y.test(e)||i("$(html) HTML strings must start with '<' character"),s[3]&&i("$(html) HTML text after last tag is ignored"),"#"===s[0].charAt(0)&&(i("HTML string cannot start with a '#' character"),t.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&n.context.nodeType&&(n=n.context),t.parseHTML)?m.call(this,t.parseHTML(s[2],n&&n.ownerDocument||n||document,!0),n,r):(o=m.apply(this,arguments),e&&void 0!==e.selector?(o.selector=e.selector,o.context=e.context):(o.selector="string"==typeof e?e:"",e&&(o.context=e.nodeType?e:n||document)),o)},t.fn.init.prototype=t.fn,t.find=function(t){var e=Array.prototype.slice.call(arguments);if("string"==typeof t&&w.test(t))try{document.querySelector(t)}catch(n){t=t.replace(b,function(t,e,n,i){return"["+e+n+'"'+i+'"]'});try{document.querySelector(t),i("Attribute selector with '#' must be quoted: "+e[0]),e[0]=t}catch(t){i("Attribute selector with '#' was not fixed: "+e[0])}}return v.apply(this,e)};var C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&(t.find[C]=v[C]);t.parseJSON=function(t){return t?_.apply(this,arguments):(i("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(p=t.uaMatch(navigator.userAgent),g={},p.browser&&(g[p.browser]=!0,g.version=p.version),g.chrome?g.webkit=!0:g.webkit&&(g.safari=!0),t.browser=g),r(t,"browser",t.browser,"jQuery.browser is deprecated"),t.boxModel=t.support.boxModel="CSS1Compat"===document.compatMode,r(t,"boxModel",t.boxModel,"jQuery.boxModel is deprecated"),r(t.support,"boxModel",t.support.boxModel,"jQuery.support.boxModel is deprecated"),t.sub=function(){function e(t,n){return new e.fn.init(t,n)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,r){var s=t.fn.init.call(this,i,r,n);return s instanceof e?s:e(s)},e.fn.init.prototype=e.fn;var n=e(document);return i("jQuery.sub() is deprecated"),e},t.fn.size=function(){return i("jQuery.fn.size() is deprecated; use the .length property"),this.length};var S=!1;t.swap&&t.each(["height","width","reliableMarginRight"],function(e,n){var i=t.cssHooks[n]&&t.cssHooks[n].get;i&&(t.cssHooks[n].get=function(){var t;return S=!0,t=i.apply(this,arguments),S=!1,t})}),t.swap=function(t,e,n,r){var s,o,a={};S||i("jQuery.swap() is undocumented and deprecated");for(o in e)a[o]=t.style[o],t.style[o]=e[o];s=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return s},t.ajaxSetup({converters:{"text json":t.parseJSON}});var k=t.fn.data;t.fn.data=function(e){var n,r,s=this[0];return!s||"events"!==e||1!==arguments.length||(n=t.data(s,e),r=t._data(s,e),void 0!==n&&n!==r||void 0===r)?k.apply(this,arguments):(i("Use of jQuery.fn.data('events') is deprecated"),r)};var T=/\/(java|ecma)script/i;t.clean||(t.clean=function(e,n,r,s){n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,i("jQuery.clean() is deprecated");var o,a,u,l,c=[];if(t.merge(c,t.buildFragment(e,n).childNodes),r)for(u=function(t){if(!t.type||T.test(t.type))return s?s.push(t.parentNode?t.parentNode.removeChild(t):t):r.appendChild(t)},o=0;null!=(a=c[o]);o++)t.nodeName(a,"script")&&u(a)||(r.appendChild(a),void 0!==a.getElementsByTagName&&(l=t.grep(t.merge([],a.getElementsByTagName("script")),u),c.splice.apply(c,[o+1,0].concat(l)),o+=l.length));return c});var P=t.event.add,j=t.event.remove,A=t.event.trigger,E=t.fn.toggle,D=t.fn.live,M=t.fn.die,I=t.fn.load,N="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",B=new RegExp("\\b(?:"+N+")\\b"),L=/(?:^|\s)hover(\.\S+|)\b/,O=function(e){return"string"!=typeof e||t.event.special.hover?e:(L.test(e)&&i("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(L,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&r(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,n,r,s){t!==document&&B.test(e)&&i("AJAX events should be attached to document: "+e),P.call(this,t,O(e||""),n,r,s)},t.event.remove=function(t,e,n,i,r){j.call(this,t,O(e)||"",n,i,r)},t.each(["load","unload","error"],function(e,n){t.fn[n]=function(){var t=Array.prototype.slice.call(arguments,0);return"load"===n&&"string"==typeof t[0]?I.apply(this,t):(i("jQuery.fn."+n+"() is deprecated"),t.splice(0,0,n),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this))}}),t.fn.toggle=function(e,n){if(!t.isFunction(e)||!t.isFunction(n))return E.apply(this,arguments);i("jQuery.fn.toggle(handler, handler...) is deprecated");var r=arguments,s=e.guid||t.guid++,o=0,a=function(n){var i=(t._data(this,"lastToggle"+e.guid)||0)%o;return t._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),r[i].apply(this,arguments)||!1};for(a.guid=s;o<r.length;)r[o++].guid=s;return this.click(a)},t.fn.live=function(e,n,r){return i("jQuery.fn.live() is deprecated"),D?D.apply(this,arguments):(t(this.context).on(e,this.selector,n,r),this)},t.fn.die=function(e,n){return i("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(t(this.context).off(e,this.selector||"**",n),this)},t.event.trigger=function(t,e,n,r){return n||B.test(t)||i("Global events are undocumented and deprecated"),A.call(this,t,e,n||document,r)},t.each(N.split("|"),function(e,n){t.event.special[n]={setup:function(){var e=this;return e!==document&&(t.event.add(document,n+"."+t.guid,function(){t.event.trigger(n,Array.prototype.slice.call(arguments,1),e,!0)}),t._data(this,n,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,n+"."+t._data(this,n)),!1}}}),t.event.special.ready={setup:function(){this===document&&i("'ready' event is deprecated")}};var z=t.fn.andSelf||t.fn.addBack,F=t.fn.find;if(t.fn.andSelf=function(){return i("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),z.apply(this,arguments)},t.fn.find=function(t){var e=F.apply(this,arguments);return e.context=this.context,e.selector=this.selector?this.selector+" "+t:t,e},t.Callbacks){
var R=t.Deferred,q=[["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory"),t.Callbacks("memory")]];t.Deferred=function(e){var n=R(),r=n.promise();return n.pipe=r.pipe=function(){var e=arguments;return i("deferred.pipe() is deprecated"),t.Deferred(function(i){t.each(q,function(s,o){var a=t.isFunction(e[s])&&e[s];n[o[1]](function(){var e=a&&a.apply(this,arguments);e&&t.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===r?i.promise():this,a?[e]:arguments)})}),e=null}).promise()},n.isResolved=function(){return i("deferred.isResolved is deprecated"),"resolved"===n.state()},n.isRejected=function(){return i("deferred.isRejected is deprecated"),"rejected"===n.state()},e&&e.call(n,n),n}}}(window.jQuery,window),function(t){"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(window.jQuery,window)}(function(t,e){"use strict";function n(n){var i=e.console;s[n]||(s[n]=!0,t.migrateWarnings.push(n),i&&i.warn&&!t.migrateMute&&(i.warn("JQMIGRATE: "+n),t.migrateTrace&&i.trace&&i.trace()))}function i(t,e,i,r){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return n(r),i},set:function(t){n(r),i=t}})}function r(t,e,i,r){t[e]=function(){return n(r),i.apply(this,arguments)}}t.migrateMute=!0,t.migrateVersion="3.0.1",function(){var n=/^[12]\./;e.console&&e.console.log&&(t&&!n.test(t.fn.jquery)||e.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"))}();var s={};t.migrateWarnings=[],void 0===t.migrateTrace&&(t.migrateTrace=!0),t.migrateReset=function(){s={},t.migrateWarnings.length=0},"BackCompat"===e.document.compatMode&&n("jQuery is not compatible with Quirks Mode");var o=t.fn.init,a=t.isNumeric,u=t.find,l=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,c=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;t.fn.init=function(t){var e=Array.prototype.slice.call(arguments);return"string"==typeof t&&"#"===t&&(n("jQuery( '#' ) is not a valid selector"),e[0]=[]),o.apply(this,e)},t.fn.init.prototype=t.fn,t.find=function(t){var i=Array.prototype.slice.call(arguments);if("string"==typeof t&&l.test(t))try{e.document.querySelector(t)}catch(r){t=t.replace(c,function(t,e,n,i){return"["+e+n+'"'+i+'"]'});try{e.document.querySelector(t),n("Attribute selector with '#' must be quoted: "+i[0]),i[0]=t}catch(t){n("Attribute selector with '#' was not fixed: "+i[0])}}return u.apply(this,i)};var h;for(h in u)Object.prototype.hasOwnProperty.call(u,h)&&(t.find[h]=u[h]);t.fn.size=function(){return n("jQuery.fn.size() is deprecated and removed; use the .length property"),this.length},t.parseJSON=function(){return n("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)},t.isNumeric=function(e){var i=a(e),r=function(e){var n=e&&e.toString();return!t.isArray(e)&&n-parseFloat(n)+1>=0}(e);return i!==r&&n("jQuery.isNumeric() should not be called on constructed objects"),r},r(t,"holdReady",t.holdReady,"jQuery.holdReady is deprecated"),r(t,"unique",t.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),i(t.expr,"filters",t.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),i(t.expr,":",t.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");var d=t.ajax;t.ajax=function(){var t=d.apply(this,arguments);return t.promise&&(r(t,"success",t.done,"jQXHR.success is deprecated and removed"),r(t,"error",t.fail,"jQXHR.error is deprecated and removed"),r(t,"complete",t.always,"jQXHR.complete is deprecated and removed")),t};var f=t.fn.removeAttr,p=t.fn.toggleClass,g=/\S+/g;t.fn.removeAttr=function(e){var i=this;return t.each(e.match(g),function(e,r){t.expr.match.bool.test(r)&&(n("jQuery.fn.removeAttr no longer sets boolean properties: "+r),i.prop(r,!1))}),f.apply(this,arguments)},t.fn.toggleClass=function(e){return void 0!==e&&"boolean"!=typeof e?p.apply(this,arguments):(n("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var n=this.getAttribute&&this.getAttribute("class")||"";n&&t.data(this,"__className__",n),this.setAttribute&&this.setAttribute("class",n||!1===e?"":t.data(this,"__className__")||"")}))};var m=!1;t.swap&&t.each(["height","width","reliableMarginRight"],function(e,n){var i=t.cssHooks[n]&&t.cssHooks[n].get;i&&(t.cssHooks[n].get=function(){var t;return m=!0,t=i.apply(this,arguments),m=!1,t})}),t.swap=function(t,e,i,r){var s,o,a={};m||n("jQuery.swap() is undocumented and deprecated");for(o in e)a[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,r||[]);for(o in e)t.style[o]=a[o];return s};var v=t.data;t.data=function(e,i,r){var s;if(i&&"object"==typeof i&&2===arguments.length){s=t.hasData(e)&&v.call(this,e);var o={};for(var a in i)a!==t.camelCase(a)?(n("jQuery.data() always sets/gets camelCased names: "+a),s[a]=i[a]):o[a]=i[a];return v.call(this,e,o),i}return i&&"string"==typeof i&&i!==t.camelCase(i)&&(s=t.hasData(e)&&v.call(this,e))&&i in s?(n("jQuery.data() always sets/gets camelCased names: "+i),arguments.length>2&&(s[i]=r),s[i]):v.apply(this,arguments)};var _=t.Tween.prototype.run,y=function(t){return t};t.Tween.prototype.run=function(){t.easing[this.easing].length>1&&(n("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),t.easing[this.easing]=y),_.apply(this,arguments)},t.fx.interval=t.fx.interval||13,e.requestAnimationFrame&&i(t.fx,"interval",t.fx.interval,"jQuery.fx.interval is deprecated");var w=t.fn.load,b=t.event.add,x=t.event.fix;t.event.props=[],t.event.fixHooks={},i(t.event.props,"concat",t.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),t.event.fix=function(e){var i,r=e.type,s=this.fixHooks[r],o=t.event.props;if(o.length)for(n("jQuery.event.props are deprecated and removed: "+o.join());o.length;)t.event.addProp(o.pop());if(s&&!s._migrated_&&(s._migrated_=!0,n("jQuery.event.fixHooks are deprecated and removed: "+r),(o=s.props)&&o.length))for(;o.length;)t.event.addProp(o.pop());return i=x.call(this,e),s&&s.filter?s.filter(i,e):i},t.event.add=function(t,i){return t===e&&"load"===i&&"complete"===e.document.readyState&&n("jQuery(window).on('load'...) called after load event occurred"),b.apply(this,arguments)},t.each(["load","unload","error"],function(e,i){t.fn[i]=function(){var t=Array.prototype.slice.call(arguments,0);return"load"===i&&"string"==typeof t[0]?w.apply(this,t):(n("jQuery.fn."+i+"() is deprecated"),t.splice(0,0,i),arguments.length?this.on.apply(this,t):(this.triggerHandler.apply(this,t),this))}}),t.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){t.fn[i]=function(t,e){return n("jQuery.fn."+i+"() event shorthand is deprecated"),arguments.length>0?this.on(i,null,t,e):this.trigger(i)}}),t(function(){t(e.document).triggerHandler("ready")}),t.event.special.ready={setup:function(){this===e.document&&n("'ready' event is deprecated")}},t.fn.extend({bind:function(t,e,i){return n("jQuery.fn.bind() is deprecated"),this.on(t,null,e,i)},unbind:function(t,e){return n("jQuery.fn.unbind() is deprecated"),this.off(t,null,e)},delegate:function(t,e,i,r){return n("jQuery.fn.delegate() is deprecated"),this.on(e,t,i,r)},undelegate:function(t,e,i){return n("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return n("jQuery.fn.hover() is deprecated"),this.on("mouseenter",t).on("mouseleave",e||t)}});var C=t.fn.offset;t.fn.offset=function(){var i,r=this[0],s={top:0,left:0};return r&&r.nodeType?(i=(r.ownerDocument||e.document).documentElement,t.contains(i,r)?C.apply(this,arguments):(n("jQuery.fn.offset() requires an element connected to a document"),s)):(n("jQuery.fn.offset() requires a valid DOM element"),s)};var S=t.param;t.param=function(e,i){var r=t.ajaxSettings&&t.ajaxSettings.traditional;return void 0===i&&r&&(n("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),i=r),S.call(this,e,i)};var k=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return n("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),k.apply(this,arguments)};var T=t.Deferred,P=[["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),"rejected"],["notify","progress",t.Callbacks("memory"),t.Callbacks("memory")]];return t.Deferred=function(e){var i=T(),r=i.promise();return i.pipe=r.pipe=function(){var e=arguments;return n("deferred.pipe() is deprecated"),t.Deferred(function(n){t.each(P,function(s,o){var a=t.isFunction(e[s])&&e[s];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&t.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},e&&e.call(i,i),i},t.Deferred.exceptionHook=T.exceptionHook,t}),window.jQuery}),function(){function t(e,n,i){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return e===n;if(e._chain&&(e=e._wrapped),n._chain&&(n=n._wrapped),e.isEqual&&C.isFunction(e.isEqual))return e.isEqual(n);if(n.isEqual&&C.isFunction(n.isEqual))return n.isEqual(e);var r=l.call(e);if(r!=l.call(n))return!1;switch(r){case"[object String]":return e==String(n);case"[object Number]":return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object RegExp]":return e.source==n.source&&e.global==n.global&&e.multiline==n.multiline&&e.ignoreCase==n.ignoreCase}if("object"!=typeof e||"object"!=typeof n)return!1;for(var s=i.length;s--;)if(i[s]==e)return!0;i.push(e);var o=0,a=!0;if("[object Array]"==r){if(o=e.length,a=o==n.length)for(;o--&&(a=o in e==o in n&&t(e[o],n[o],i)););}else{if("constructor"in e!="constructor"in n||e.constructor!=n.constructor)return!1;for(var u in e)if(C.has(e,u)&&(o++,!(a=C.has(n,u)&&t(e[u],n[u],i))))break;if(a){for(u in n)if(C.has(n,u)&&!o--)break;a=!o}}return i.pop(),a}var e=this,n=e._,i={},r=Array.prototype,s=Object.prototype,o=Function.prototype,a=r.slice,u=r.unshift,l=s.toString,c=s.hasOwnProperty,h=r.forEach,d=r.map,f=r.reduce,p=r.reduceRight,g=r.filter,m=r.every,v=r.some,_=r.indexOf,y=r.lastIndexOf,w=Array.isArray,b=Object.keys,x=o.bind,C=function(t){return new N(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.3.3";var S=C.each=C.forEach=function(t,e,n){if(null!=t)if(h&&t.forEach===h)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,s=t.length;r<s;r++)if(r in t&&e.call(n,t[r],r,t)===i)return}else for(var o in t)if(C.has(t,o)&&e.call(n,t[o],o,t)===i)return};C.map=C.collect=function(t,e,n){var i=[];return null==t?i:d&&t.map===d?t.map(e,n):(S(t,function(t,r,s){i[i.length]=e.call(n,t,r,s)}),t.length===+t.length&&(i.length=t.length),i)},C.reduce=C.foldl=C.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=C.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(S(t,function(t,s,o){r?n=e.call(i,n,t,s,o):(n=t,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return n},C.reduceRight=C.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return i&&(e=C.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var s=C.toArray(t).reverse();return i&&!r&&(e=C.bind(e,i)),r?C.reduce(s,e,n,i):C.reduce(s,e)},C.find=C.detect=function(t,e,n){var i;return k(t,function(t,r,s){if(e.call(n,t,r,s))return i=t,!0}),i},C.filter=C.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(S(t,function(t,r,s){e.call(n,t,r,s)&&(i[i.length]=t)}),i)},C.reject=function(t,e,n){var i=[];return null==t?i:(S(t,function(t,r,s){e.call(n,t,r,s)||(i[i.length]=t)}),i)},C.every=C.all=function(t,e,n){var r=!0;return null==t?r:m&&t.every===m?t.every(e,n):(S(t,function(t,s,o){if(!(r=r&&e.call(n,t,s,o)))return i}),!!r)};var k=C.some=C.any=function(t,e,n){e||(e=C.identity);var r=!1;return null==t?r:v&&t.some===v?t.some(e,n):(S(t,function(t,s,o){if(r||(r=e.call(n,t,s,o)))return i}),!!r)};C.include=C.contains=function(t,e){var n=!1;return null==t?n:_&&t.indexOf===_?-1!=t.indexOf(e):n=k(t,function(t){return t===e})},C.invoke=function(t,e){var n=a.call(arguments,2);return C.map(t,function(t){return(C.isFunction(e)?e||t:t[e]).apply(t,n)})},C.pluck=function(t,e){return C.map(t,function(t){return t[e]})},C.max=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&C.isEmpty(t))return-1/0;var i={computed:-1/0};return S(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o>=i.computed&&(i={value:t,computed:o})}),i.value},C.min=function(t,e,n){if(!e&&C.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&C.isEmpty(t))return 1/0;var i={computed:1/0};return S(t,function(t,r,s){var o=e?e.call(n,t,r,s):t;o<i.computed&&(i={value:t,computed:o})}),i.value},C.shuffle=function(t){var e,n=[];return S(t,function(t,i,r){e=Math.floor(Math.random()*(i+1)),n[i]=n[e],n[e]=t}),n},C.sortBy=function(t,e,n){var i=C.isFunction(e)?e:function(t){return t[e]};return C.pluck(C.map(t,function(t,e,r){return{value:t,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;return void 0===n?1:void 0===i?-1:n<i?-1:n>i?1:0}),"value")},C.groupBy=function(t,e){var n={},i=C.isFunction(e)?e:function(t){return t[e]};return S(t,function(t,e){var r=i(t,e);(n[r]||(n[r]=[])).push(t)}),n},C.sortedIndex=function(t,e,n){n||(n=C.identity);for(var i=0,r=t.length;i<r;){var s=i+r>>1;n(t[s])<n(e)?i=s+1:r=s}return i},C.toArray=function(t){return t?C.isArray(t)?a.call(t):C.isArguments(t)?a.call(t):t.toArray&&C.isFunction(t.toArray)?t.toArray():C.values(t):[]},C.size=function(t){return C.isArray(t)?t.length:C.keys(t).length},C.first=C.head=C.take=function(t,e,n){return null==e||n?t[0]:a.call(t,0,e)},C.initial=function(t,e,n){return a.call(t,0,t.length-(null==e||n?1:e))},C.last=function(t,e,n){return null==e||n?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},C.rest=C.tail=function(t,e,n){return a.call(t,null==e||n?1:e)},C.compact=function(t){return C.filter(t,function(t){return!!t})},C.flatten=function(t,e){return C.reduce(t,function(t,n){return C.isArray(n)?t.concat(e?n:C.flatten(n)):(t[t.length]=n,t)},[])},C.without=function(t){return C.difference(t,a.call(arguments,1))},C.uniq=C.unique=function(t,e,n){var i=n?C.map(t,n):t,r=[];return t.length<3&&(e=!0),C.reduce(i,function(n,i,s){return(e?C.last(n)===i&&n.length:C.include(n,i))||(n.push(i),r.push(t[s])),n},[]),r},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=C.intersect=function(t){var e=a.call(arguments,1);return C.filter(C.uniq(t),function(t){return C.every(e,function(e){return C.indexOf(e,t)>=0})})},C.difference=function(t){var e=C.flatten(a.call(arguments,1),!0);return C.filter(t,function(t){return!C.include(e,t)})},C.zip=function(){for(var t=a.call(arguments),e=C.max(C.pluck(t,"length")),n=new Array(e),i=0;i<e;i++)n[i]=C.pluck(t,""+i);return n},C.indexOf=function(t,e,n){if(null==t)return-1;var i,r;if(n)return i=C.sortedIndex(t,e),t[i]===e?i:-1;if(_&&t.indexOf===_)return t.indexOf(e);for(i=0,r=t.length;i<r;i++)if(i in t&&t[i]===e)return i;return-1},C.lastIndexOf=function(t,e){if(null==t)return-1;if(y&&t.lastIndexOf===y)return t.lastIndexOf(e);for(var n=t.length;n--;)if(n in t&&t[n]===e)return n;return-1},C.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,s=new Array(i);r<i;)s[r++]=t,t+=n;return s};var T=function(){};C.bind=function(t,e){var n,i;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!C.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));T.prototype=t.prototype;var r=new T,s=t.apply(r,i.concat(a.call(arguments)));return Object(s)===s?s:r}},C.bindAll=function(t){var e=a.call(arguments,1);return 0==e.length&&(e=C.functions(t)),S(e,function(e){t[e]=C.bind(t[e],t)}),t},C.memoize=function(t,e){var n={};return e||(e=C.identity),function(){var i=e.apply(this,arguments);return C.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},C.delay=function(t,e){var n=a.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},C.defer=function(t){return C.delay.apply(C,[t,1].concat(a.call(arguments,1)))},C.throttle=function(t,e){var n,i,r,s,o,a,u=C.debounce(function(){o=s=!1},e);return function(){n=this,i=arguments;var l=function(){r=null,o&&t.apply(n,i),u()};return r||(r=setTimeout(l,e)),s?o=!0:a=t.apply(n,i),u(),s=!0,a}},C.debounce=function(t,e,n){var i;return function(){var r=this,s=arguments,o=function(){i=null,n||t.apply(r,s)};n&&!i&&t.apply(r,s),clearTimeout(i),i=setTimeout(o,e)}},C.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}},C.wrap=function(t,e){return function(){var n=[t].concat(a.call(arguments,0));return e.apply(this,n)}},C.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},C.after=function(t,e){return t<=0?e():function(){if(--t<1)return e.apply(this,arguments)}},C.keys=b||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)C.has(t,n)&&(e[e.length]=n);return e},C.values=function(t){return C.map(t,C.identity)},C.functions=C.methods=function(t){var e=[];for(var n in t)C.isFunction(t[n])&&e.push(n);return e.sort()},C.extend=function(t){return S(a.call(arguments,1),function(e){for(var n in e)t[n]=e[n]}),t},C.pick=function(t){var e={};return S(C.flatten(a.call(arguments,1)),function(n){n in t&&(e[n]=t[n])}),e},C.defaults=function(t){return S(a.call(arguments,1),function(e){for(var n in e)null==t[n]&&(t[n]=e[n])}),t},C.clone=function(t){return C.isObject(t)?C.isArray(t)?t.slice():C.extend({},t):t},C.tap=function(t,e){return e(t),t},C.isEqual=function(e,n){return t(e,n,[])},C.isEmpty=function(t){if(null==t)return!0;if(C.isArray(t)||C.isString(t))return 0===t.length;for(var e in t)if(C.has(t,e))return!1;return!0},C.isElement=function(t){return!(!t||1!=t.nodeType)},C.isArray=w||function(t){return"[object Array]"==l.call(t)},C.isObject=function(t){return t===Object(t)},C.isArguments=function(t){return"[object Arguments]"==l.call(t)},C.isArguments(arguments)||(C.isArguments=function(t){return!(!t||!C.has(t,"callee"))}),C.isFunction=function(t){return"[object Function]"==l.call(t)},C.isString=function(t){return"[object String]"==l.call(t)},C.isNumber=function(t){return"[object Number]"==l.call(t)},C.isFinite=function(t){return C.isNumber(t)&&isFinite(t)},C.isNaN=function(t){return t!==t},C.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"==l.call(t)},C.isDate=function(t){return"[object Date]"==l.call(t)},C.isRegExp=function(t){return"[object RegExp]"==l.call(t)},C.isNull=function(t){return null===t},C.isUndefined=function(t){return void 0===t},C.has=function(t,e){return c.call(t,e)},C.noConflict=function(){return e._=n,this},C.identity=function(t){return t},C.times=function(t,e,n){for(var i=0;i<t;i++)e.call(n,i)},C.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},C.result=function(t,e){if(null==t)return null;var n=t[e];return C.isFunction(n)?n.call(t):n},C.mixin=function(t){S(C.functions(t),function(e){L(e,C[e]=t[e])})};var P=0;C.uniqueId=function(t){var e=P++;return t?t+e:e},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var E in A)A[A[E]]=E;var D=/\\|'|\r|\n|\t|\u2028|\u2029/g,M=/\\(\\|'|r|n|t|u2028|u2029)/g,I=function(t){return t.replace(M,function(t,e){return A[e]})};C.template=function(t,e,n){n=C.defaults(n||{},C.templateSettings);var i="__p+='"+t.replace(D,function(t){return"\\"+A[t]}).replace(n.escape||j,function(t,e){return"'+\n_.escape("+I(e)+")+\n'"}).replace(n.interpolate||j,function(t,e){return"'+\n("+I(e)+")+\n'"}).replace(n.evaluate||j,function(t,e){return"';\n"+I(e)+"\n;__p+='"})+"';\n";n.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+i+"return __p;\n";var r=new Function(n.variable||"obj","_",i);if(e)return r(e,C);var s=function(t){return r.call(this,t,C)};return s.source="function("+(n.variable||"obj")+"){\n"+i+"}",s},C.chain=function(t){return C(t).chain()};var N=function(t){this._wrapped=t};C.prototype=N.prototype;var B=function(t,e){return e?C(t).chain():t},L=function(t,e){N.prototype[t]=function(){var t=a.call(arguments);return u.call(t,this._wrapped),B(e.apply(C,t),this._chain)}};C.mixin(C),S(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];N.prototype[t]=function(){var n=this._wrapped;e.apply(n,arguments);var i=n.length;return"shift"!=t&&"splice"!=t||0!==i||delete n[0],B(n,this._chain)}}),S(["concat","join","slice"],function(t){var e=r[t];N.prototype[t]=function(){return B(e.apply(this._wrapped,arguments),this._chain)}}),N.prototype.chain=function(){return this._chain=!0,this},N.prototype.value=function(){return this._wrapped}}.call(this),define("underscore",function(t){return function(){return t._}}(this)),define("crowdflower_js/module-activator",["jquery-noconflict","underscore"],function(t,e){function n(e){var n=t(e),i=n.data("module");require([i],function(t){null==r.registry[i]&&(r.registry[i]=[]),r.registry[i].push(t.init(n,n.data()))})}var i={};null==window.CrowdFlower&&(window.CrowdFlower={});var r=window.CrowdFlower;return r.registry={},i.execute=function(i){t(function(){var i=i||t("html"),r=t("[data-module]",i);e.each(r,n)})},i}),define("bootstrap-alert",["jquery-noconflict"],function(t){return function(t){"use strict";var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype={constructor:n,close:function(e){function n(){i.trigger("closed").remove()}var i,r=t(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,"")),i=t(s),i.trigger("close"),e&&e.preventDefault(),i.length||(i=r.hasClass("alert")?r:r.parent()),i.trigger("close").removeClass("in"),t.support.transition&&i.hasClass("fade")?i.on(t.support.transition.end,n):n()}},t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("alert");r||i.data("alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t(function(){t("body").on("click.alert.data-api",e,n.prototype.close)})}(t),t}),define("bootstrap-dropdown",["jquery-noconflict"],function(t){return function(t){"use strict";function e(){t(n).parent().removeClass("open")}var n='[data-toggle="dropdown"]',i=function(e){var n=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){n.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(n){var i,r,s=t(this),o=s.attr("data-target");return o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),i=t(o),i.length||(i=s.parent()),r=i.hasClass("open"),e(),!r&&i.toggleClass("open"),!1}},t.fn.dropdown=function(e){return this.each(function(){var n=t(this),r=n.data("dropdown");r||n.data("dropdown",r=new i(this)),"string"==typeof e&&r[e].call(n)})},t.fn.dropdown.Constructor=i,t(function(){t("html").on("click.dropdown.data-api",e),t("body").on("click.dropdown.data-api",n,i.prototype.toggle)})}(t),t}),define("bootstrap-collapse",["jquery-noconflict"],function(t){return function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,n),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){return this.$element.hasClass("width")?"width":"height"},show:function(){var e,n=this.dimension(),i=t.camelCase(["scroll",n].join("-")),r=this.$parent&&this.$parent.find(".in");r&&r.length&&(e=r.data("collapse"),r.collapse("hide"),e||r.data("collapse",null)),this.$element[n](0),this.transition("addClass","show","shown"),this.$element[n](this.$element[0][i])},hide:function(){var t=this.dimension();this.reset(this.$element[t]()),this.transition("removeClass","hide","hidden"),this.$element[t](0)},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[t?"addClass":"removeClass"]("collapse"),this},transition:function(e,n,i){var r=this,s=function(){"show"==n&&r.reset(),r.$element.trigger(i)};this.$element.trigger(n)[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,s):s()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("collapse"),s="object"==typeof n&&n;r||i.data("collapse",r=new e(this,s)),"string"==typeof n&&r[n]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t(function(){t("body").on("click.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(r).data("collapse")?"toggle":i.data();t(r).collapse(s)})})}(t),t}),define("bootstrap-modal",["jquery-noconflict"],function(t){return function(t){"use strict";function e(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),n.call(e)},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),n.call(e)})}function n(t){this.$element.hide().trigger("hidden"),i.call(this)}function i(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(t.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(r,this)):r.call(this)):e&&e()}function r(){this.$backdrop.remove(),this.$backdrop=null}function s(){var e=this;this.isShown&&this.options.keyboard?t(document).on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||t(document).off("keyup.dismiss.modal")}var o=function(e,n){this.options=n,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this))};o.prototype={constructor:o,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this;this.isShown||(t("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),s.call(this),i.call(this,function(){var n=t.support.transition&&e.$element.hasClass("fade");!e.$element.parent().length&&e.$element.appendTo(document.body),e.$element.show(),n&&e.$element[0].offsetWidth,e.$element.addClass("in"),n?e.$element.one(t.support.transition.end,function(){e.$element.trigger("shown")}):e.$element.trigger("shown")}))},hide:function(i){if(i&&i.preventDefault(),this.isShown){this.isShown=!1,t("body").removeClass("modal-open"),s.call(this),this.$element.trigger("hide").removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?e.call(this):n.call(this)}}},t.fn.modal=function(e){return this.each(function(){var n=t(this),i=n.data("modal"),r=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof e&&e);i||n.data("modal",i=new o(this,r)),"string"==typeof e?i[e]():r.show&&i.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=o,t(function(){t("body").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=r.data("modal")?"toggle":t.extend({},r.data(),i.data());e.preventDefault(),r.modal(s)})})}(t),t}),define("bootstrap-transition",["jquery-noconflict"],function(t){return function(t){t(function(){"use strict";t.support.transition=function(){var e=document.body||document.documentElement,n=e.style;return(void 0!==n.transition||void 0!==n.WebkitTransition||void 0!==n.MozTransition||void 0!==n.MsTransition||void 0!==n.OTransition)&&{end:function(){var e="TransitionEnd";return t.browser.webkit?e="webkitTransitionEnd":t.browser.mozilla?e="transitionend":t.browser.opera&&(e="oTransitionEnd"),e}()}}()})}(t),t}),define("jquery-cookie",["jquery-noconflict"],function(t){return function(t,e,n){function i(t){return t}function r(t){return decodeURIComponent(t.replace(s," "))}var s=/\+/g,o=t.cookie=function(n,s,a){if(void 0!==s){if(a=t.extend({},o.defaults,a),null===s&&(a.expires=-1),"number"==typeof a.expires){var u=a.expires,l=a.expires=new Date;l.setDate(l.getDate()+u)}return s=o.json?JSON.stringify(s):String(s),e.cookie=[encodeURIComponent(n),"=",o.raw?s:encodeURIComponent(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var c=o.raw?i:r,h=e.cookie.split("; "),d=0,f=h.length;d<f;d++){var p=h[d].split("=");if(c(p.shift())===n){var g=c(p.join("="));return o.json?JSON.parse(g):g}}return null};o.defaults={},t.removeCookie=function(e,n){return null!==t.cookie(e)&&(t.cookie(e,null,n),!0)}}(t,document),t}),define("hideable-instructions",["bootstrap-collapse","bootstrap-transition","jquery-cookie"],function(t){var e={};return e.init=function(n,i){e.scope=i.instructionsScope||"global",e.cookieKey="hide-instructions-"+e.scope,e.targetElement=n;var r=t(".collapse",n.parent());r.on("hide",e,function(e){e.data.targetElement.addClass("btn-inverse"),e.data.targetElement.removeClass("dropup"),t.cookie(e.data.cookieKey,"1",{expires:7})}),r.on("show",e,function(e){e.data.targetElement.removeClass("btn-inverse"),e.data.targetElement.addClass("dropup"),t.removeCookie(e.data.cookieKey)}),n.on("click",e,function(t){r.collapse("toggle"),t.preventDefault()});var s=!!t.cookie(e.cookieKey);r.collapse({toggle:s})},e}),define("gatekeeper",["jquery-noconflict"],function(t){var e={};return e.javascriptEnabled=function(){try{return is_js_on_flag=0==t("#javascript_disabled_message").length,is_js_on_flag}catch(t){}},e.usingSupportedIE=function(){try{return 0==t("#using-unsupported-ie-message").length}catch(t){}},e.showCML=function(){try{t("#remix_cml_container").fadeTo(400,1)}catch(t){}},e.showGoneWrongMsg=function(){try{t("#gone_wrong_message").fadeIn()}catch(t){}},e.init=function(t,n){e.javascriptEnabled()&&e.usingSupportedIE()?e.showCML():e.showGoneWrongMsg()},e}),define("bootstrap-carousel",["jquery-noconflict"],function(t){return function(t){"use strict";var e=function(e,n){this.$element=t(e),this.options=t.extend({},t.fn.carousel.defaults,n),this.options.slide&&this.slide(this.options.slide),"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(){return this.interval=setInterval(t.proxy(this.next,this),this.options.interval),this},to:function(e){var n=this.$element.find(".active"),i=n.parent().children(),r=i.index(n),s=this;if(!(e>i.length-1||e<0))return this.sliding?this.$element.one("slid",function(){s.to(e)}):r==e?this.pause().cycle():this.slide(e>r?"next":"prev",t(i[e]))},pause:function(){return clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,n){var i=this.$element.find(".active"),r=n||i[e](),s=this.interval,o="next"==e?"left":"right",a="next"==e?"first":"last",u=this;if(this.sliding=!0,s&&this.pause(),r=r.length?r:this.$element.find(".item")[a](),
!r.hasClass("active"))return!t.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(r.addClass(e),r[0].offsetWidth,i.addClass(o),r.addClass(o),this.$element.trigger("slide"),this.$element.one(t.support.transition.end,function(){r.removeClass([e,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger("slid")},0)})),s&&this.cycle(),this}},t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("carousel"),s="object"==typeof n&&n;r||i.data("carousel",r=new e(this,s)),"number"==typeof n?r.to(n):"string"==typeof n||(n=s.slide)?r[n]():r.cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t(function(){t("body").on("click.carousel.data-api","[data-slide]",function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),s=!r.data("modal")&&t.extend({},r.data(),i.data());r.carousel(s),e.preventDefault()})})}(t),t}),define("global-banner",["jquery-noconflict","jquery-cookie","bootstrap-carousel"],function(t){var e={};return e.originalBodyPaddingColor=t("body").css("color"),e.originalBodyPaddingInPixels=parseInt(t("body").css("padding-top")),e.addPaddingToBody=function(){var n=t("#global_banner").height();t("body").css("padding-top",e.originalBodyPaddingInPixels+n)},e.repositionBanner=function(){var e=parseInt(t(".navbar").css("padding-top"));t("#global_banner").css({position:"relative",top:"-"+e+"px"})},e.userHasNotSeenMessageHash=function(e){return void 0==t.cookie(e)},e.userHasNotSeenAGlobalMessage=function(t){return _.any(t,e.userHasNotSeenMessageHash)},e.showBanner=function(){t("#global_banner").fadeIn()},e.restoreBodyPadding=function(){t("#global_banner").fadeIn()},e.registerGlobalMessageAsHavingBeenSeen=function(e){t.cookie(e,"closed",{path:"/"})},e.hideCarouselIfLastClose=function(){0==t("#global_banner div.item:visible").length&&(console.log("originalBodyPaddingInPixels = "+e.originalBodyPaddingInPixels),t("body").css({"padding-top":e.originalBodyPaddingInPixels}),t("#global_banner").fadeOut())},e.addHandlingForCloseOfBanner=function(n){var i="div[data-message-hash='"+n+"']";t(i+" button.close").click(function(){t(i).fadeOut(400,function(){t(i).remove(),e.registerGlobalMessageAsHavingBeenSeen(n),t("#global_banner").carousel("next"),e.hideCarouselIfLastClose()})})},e.init=function(n,i){var r=t.map(t("#global_banner > .carousel-inner > .container.item"),function(e){return t(e).data("message-hash")});e.userHasNotSeenAGlobalMessage(r)&&(e.addPaddingToBody(),e.repositionBanner(),e.showBanner(),_.each(r,function(t){e.userHasNotSeenMessageHash(t)&&e.addHandlingForCloseOfBanner(t)}),t("#global_banner").carousel({interval:1e6}).carousel(0),t("#global_banner > .carousel-inner > .item").first().addClass("active"))},e});var paper=new function(){var Base=this.Base=new function(){function t(t,e,n){if(f)try{return delete t[e],f(t,e,n)}catch(t){}return(n.get||n.set)&&t.__defineGetter__?(n.get&&t.__defineGetter__(e,n.get),n.set&&t.__defineSetter__(e,n.set)):t[e]=n.value,t}function e(t,e){if(p)try{return p(t,e)}catch(t){}var n=t.__lookupGetter__&&t.__lookupGetter__(e);return n?{get:n,set:t.__lookupSetter__(e),enumerable:!0,configurable:!0}:t.hasOwnProperty(e)?{value:t[e],enumerable:!0,configurable:!0,writable:!0}:null}function n(n,i,r,o,a,u){function c(s,u,c,f){var u=u||(u=e(i,s))&&(u.get?u:u.value);"string"==typeof u&&"#"===u[0]&&(u=i[u.substring(1)]||u);var p="function"==typeof u,g=u,m=a||p?u&&u.get?s in n:n[s]:null;if((c||void 0!==u&&i.hasOwnProperty(s))&&(!a||!m)){if(p){if(m&&/\bthis\.base\b/.test(u)){var v=o&&o[s]==m;g=function(){var n=e(this,"base");t(this,"base",{value:v?o[s]:m,configurable:!0});try{return u.apply(this,arguments)}finally{n?t(this,"base",n):delete this.base}},g.toString=function(){return u.toString()},g.valueOf=function(){return u.valueOf()}}h&&0===u.length&&(d=s.match(/^(get|is)(([A-Z])(.*))$/))&&h.push([d[3].toLowerCase()+d[4],d[2]])}g&&!p&&g.get||(g={value:g,writable:!0}),(e(n,s)||{configurable:!0}).configurable&&(g.configurable=!0,g.enumerable=r),t(n,s,g)}!f||!p||a&&f[s]||(f[s]=function(t){return t&&n[s].apply(t,l.call(arguments,1))})}var h,d;if(i){h=[];for(var f in i)i.hasOwnProperty(f)&&!s.test(f)&&c(f,null,!0,u);c("toString"),c("valueOf");for(var p=0,g=h&&h.length;p<g;p++)try{var d=h[p],m=d[1];c(d[0],{get:n["get"+m]||n["is"+m],set:n["set"+m]},!0)}catch(t){}}return n}function i(t,e,n,i){try{t&&(i||void 0===i&&u(t)?c:h).call(t,e,n=n||t)}catch(t){if(t!==Base.stop)throw t}return n}function r(t){return i(t,function(t,e){this[e]=t},new t.constructor)}var s=/^(statics|generics|preserve|enumerable|prototype|toString|valueOf)$/,o=Object.prototype,a=o.toString,o=Array.prototype,u=Array.isArray=Array.isArray||function(t){return"[object Array]"===a.call(t)},l=o.slice,c=o.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},h=function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)},d=Object.create||function(t){return{__proto__:t}},f=Object.defineProperty,p=Object.getOwnPropertyDescriptor;return n(function(){},{inject:function(t){if(t){var e=this.prototype,i=Object.getPrototypeOf(e).constructor,r=!0===t.statics?t:t.statics;r!=t&&n(e,t,t.enumerable,i&&i.prototype,t.preserve,t.generics&&this),n(this,r,!0,i,t.preserve)}for(var s=1,o=arguments.length;s<o;s++)this.inject(arguments[s]);return this},extend:function(e){var i=function(){if(this.initialize)return this.initialize.apply(this,arguments)};return i.prototype=d(this.prototype),i.toString=function(){return(this.prototype.initialize||function(){}).toString()},t(i.prototype,"constructor",{value:i,writable:!0,configurable:!0}),n(i,this,!0),arguments.length?this.inject.apply(i,arguments):i}},!0).inject({inject:function(){for(var t=0,e=arguments.length;t<e;t++)n(this,arguments[t],arguments[t].enumerable);return this},extend:function(){var t=d(this);return t.inject.apply(t,arguments)},each:function(t,e){return i(this,t,e)},clone:function(){return r(this)},statics:{each:i,clone:r,define:t,describe:e,create:function(t){return d(t.prototype)},isPlainObject:function(t){var e=null!==t&&"object"==typeof t&&Object.getPrototypeOf(t);return e&&(e===Object.prototype||e===Base.prototype)},check:function(t){return!(!t&&0!==t)},pick:function(){for(var t=0,e=arguments.length;t<e;t++)if(void 0!==arguments[t])return arguments[t];return null},stop:{}}})};this.Base=Base.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+Base.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?Formatter.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},exportJSON:function(t){return Base.exportJSON(this,t)},toJSON:function(){return Base.serialize(this)},_set:function(t){if(t&&Base.isPlainObject(t)){for(var e in t)t.hasOwnProperty(e)&&e in this&&(this[e]=t[e]);return!0}},statics:{_classes:{},extend:function(t){var e=this.base.apply(this,arguments);return t._class&&(Base._classes[t._class]=e),e},equals:function(t,e){function n(t,e){for(var n in t)if(t.hasOwnProperty(n)&&void 0===e[n])return!1;return!0}if(t==e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var i=0,r=t.length;i<r;i++)if(!Base.equals(t[i],e[i]))return!1;return!0}if(t&&"object"==typeof t&&e&&"object"==typeof e){if(!n(t,e)||!n(e,t))return!1;for(var i in t)if(t.hasOwnProperty(i)&&!Base.equals(t[i],e[i]))return!1;return!0}return!1},read:function(t,e,n,i,r){if(this===Base){var s=this.peek(t,e);return t._index++,t._read=1,s}var o=this.prototype,a=o._readIndex,u=e||a&&t._index||0;n||(n=t.length-u);var l=t[u];return l instanceof this||r&&null==l&&n<=1?(a&&(t._index=u+1),l&&i?l.clone():l):(l=Base.create(this),a&&(l._read=!0),l=l.initialize.apply(l,u>0||n<t.length?Array.prototype.slice.call(t,u,u+n):t)||l,a&&(t._index=u+l._read,t._read=l._read,delete l._read),l)},peek:function(t,e){return t[t._index=e||t._index||0]},readAll:function(t,e,n){for(var i,r=[],s=e||0,o=t.length;s<o;s++)r.push(Array.isArray(i=t[s])?this.read(i,0,0,n):this.read(t,s,1,n));return r},readNamed:function(t,e,n,i,r,s){var o=this.getNamed(t,e);return this.read(null!=o?[o]:t,n,i,r,s)},getNamed:function(t,e){var n=t[0];if(void 0===t._hasObject&&(t._hasObject=1===t.length&&Base.isPlainObject(n)),t._hasObject)return e?n[e]:n},hasNamed:function(t,e){return!!this.getNamed(t,e)},serialize:function(t,e,n,i){e=e||{};var r,s=!i;if(s&&(e.formatter=new Formatter(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t);t._class&&r[0]!==t._class&&r.unshift(t._class),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize)r=t._serialize(e,i),t._class&&!n&&r[0]!==t._class&&r.unshift(t._class);else if(Array.isArray(t)){r=[];for(var o=0,a=t.length;o<a;o++)r[o]=Base.serialize(t[o],e,n,i)}else if(Base.isPlainObject(t)){r={};for(var o in t)t.hasOwnProperty(o)&&(r[o]=Base.serialize(t[o],e,n,i))}else r="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&i.length>0?[["dictionary",i.definitions],r]:r},deserialize:function(t,e){var n=t;if(e=e||{},Array.isArray(t)){var i=t[0],r="dictionary"===i;if(!r){if(e.dictionary&&1==t.length&&/^#/.test(i))return e.dictionary[i];i=Base._classes[i]}n=[];for(var s=i?1:0,o=t.length;s<o;s++)n.push(Base.deserialize(t[s],e));if(r)e.dictionary=n[0];else if(i){var a=n;n=Base.create(i),n.initialize.apply(n,a)}}else if(Base.isPlainObject(t)){n={};for(var u in t)n[u]=Base.deserialize(t[u],e)}return n},exportJSON:function(t,e){return JSON.stringify(Base.serialize(t,e))},importJSON:function(t){return Base.deserialize("string"==typeof t?JSON.parse(t):t)},splice:function(t,e,n,i){var r=e&&e.length,s=void 0===n;(n=s?t.length:n)>t.length&&(n=t.length);for(var o=0;o<r;o++)e[o]._index=n+o;if(s)return t.push.apply(t,e),[];var a=[n,i];e&&a.push.apply(a,e);for(var u=t.splice.apply(t,a),o=0,l=u.length;o<l;o++)delete u[o]._index;for(var o=n+r,l=t.length;o<l;o++)t[o]._index=o;return u},merge:function(){return Base.each(arguments,function(t){Base.each(t,function(t,e){this[e]=t},this)},new Base,!0)},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var Callback={attach:function(t,e){if("string"!=typeof t)return void Base.each(t,function(t,e){this.attach(e,t)},this);var n=this._eventTypes[t];if(n){var i=this._handlers=this._handlers||{};i=i[t]=i[t]||[],-1==i.indexOf(e)&&(i.push(e),n.install&&1==i.length&&n.install.call(this,t))}},detach:function(t,e){if("string"!=typeof t)return void Base.each(t,function(t,e){this.detach(e,t)},this);var n,i=this._eventTypes[t],r=this._handlers&&this._handlers[t];i&&r&&(!e||-1!=(n=r.indexOf(e))&&1==r.length?(i.uninstall&&i.uninstall.call(this,t),delete this._handlers[t]):-1!=n&&r.splice(n,1))},once:function(t,e){this.attach(t,function(){e.apply(this,arguments),this.detach(t,e)})},fire:function(t,e){var n=this._handlers&&this._handlers[t];if(!n)return!1;var i=[].slice.call(arguments,1);return Base.each(n,function(t){!1===t.apply(this,i)&&e&&e.stop&&e.stop()},this),!0},responds:function(t){return!(!this._handlers||!this._handlers[t])},on:"#attach",off:"#detach",trigger:"#fire",statics:{inject:function(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t],i=n._events;if(i){var r={};Base.each(i,function(t,e){var i="string"==typeof t,s=i?t:e,o=Base.capitalize(s),a=s.substring(2).toLowerCase();r[a]=i?{}:t,s="_"+s,n["get"+o]=function(){return this[s]},n["set"+o]=function(t){t?this.attach(a,t):this[s]&&this.detach(a,this[s]),this[s]=t}}),n._eventTypes=r}this.base(n)}return this}}},PaperScope=this.PaperScope=Base.extend({initialize:function(t){if(paper=this,this.project=null,this.projects=[],this.tools=[],this.palettes=[],this._id=t&&(t.getAttribute("id")||t.src)||"paperscope-"+PaperScope._id++,t&&t.setAttribute("id",this._id),PaperScope._scopes[this._id]=this,!this.support){var e=CanvasProvider.getContext(1,1);PaperScope.prototype.support={nativeDash:"setLineDash"in e||"mozDash"in e},CanvasProvider.release(e)}},version:.8,getView:function(){return this.project&&this.project.view},getTool:function(){return this._tool||(this._tool=new Tool),this._tool},evaluate:function(t){var e=PaperScript.evaluate(t,this);return View.updateFocus(),e},install:function(t){var e=this;Base.each(["project","view","tool"],function(n){Base.define(t,n,{configurable:!0,writable:!0,get:function(){return e[n]}})});for(var n in this)/^(version|_id)/.test(n)||n in t||(t[n]=this[n])},setup:function(t){return paper=this,this.project=new Project(t),this},clear:function(){for(var t=this.projects.length-1;t>=0;t--)this.projects[t].remove();for(var t=this.tools.length-1;t>=0;t--)this.tools[t].remove();for(var t=this.palettes.length-1;t>=0;t--)this.palettes[t].remove()},remove:function(){this.clear(),delete PaperScope._scopes[this._id]},statics:{_scopes:{},_id:0,get:function(t){return"object"==typeof t&&(t=t.getAttribute("id")),this._scopes[t]||null}}}),PaperScopeItem=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!=this&&t.fire("deactivate"),this._scope[this._reference]=this,this.fire("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(Base.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),Formatter=Base.extend({initialize:function(t){this.precision=t||5,this.multiplier=Math.pow(10,this.precision)},number:function(t){return Math.round(t*this.multiplier)/this.multiplier},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});Formatter.instance=new Formatter(5);var Numerical=this.Numerical=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,i=Math.sqrt,r=Math.pow,s=Math.cos,o=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,KAPPA:4*(i(2)-1)/3,isZero:function(t){return n(t)<=this.EPSILON},integrate:function(n,i,r,s){for(var o=t[s-2],a=e[s-2],u=.5*(r-i),l=u+i,c=0,h=s+1>>1,d=1&s?a[c++]*n(l):0;c<h;){var f=u*o[c];d+=a[c++]*(n(l+f)+n(l-f))}return u*d},findRoot:function(t,e,i,r,s,o,a){for(var u=0;u<o;u++){var l=t(i),c=l/e(i);if(n(c)<a)return i;var h=i-c;l>0?(s=i,i=h<=r?.5*(r+s):h):(r=i,i=h>=s?.5*(r+s):h)}},solveQuadratic:function(t,e,r,s){var o=this.EPSILON;if(n(t)<o)return n(e)>=o?(s[0]=-r/e,1):n(r)<o?-1:0;var a=e*e-4*t*r;if(a<0)return 0;a=i(a),t*=2;var u=0;return s[u++]=(-e-a)/t,a>0&&(s[u++]=(-e+a)/t),u},solveCubic:function(t,e,a,u,l){var c=this.EPSILON;if(n(t)<c)return Numerical.solveQuadratic(e,a,u,l);e/=t,a/=t,u/=t;var h=e*e,d=(h-3*a)/9,f=(2*h*e-9*e*a+27*u)/54,p=d*d*d,g=f*f-p;if(e/=3,n(g)<c){if(n(f)<c)return l[0]=-e,1;var m=i(d),v=f>0?1:-1;return l[0]=2*-v*m-e,l[1]=v*m-e,2}if(g<0){var m=i(d),_=Math.acos(f/(m*m*m))/3,y=-2*m,w=2*o/3;return l[0]=y*s(_)-e,l[1]=y*s(_+w)-e,l[2]=y*s(_-w)-e,3}var b=(f>0?-1:1)*r(n(f)+i(g),1/3);return l[0]=b+d/b-e,1}}},Point=this.Point=Base.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.x=t,this.y=i?e:t,this._read&&(this._read=i?2:1)}else"undefined"===n||null===t?(this.x=this.y=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.x=t[0],this.y=t.length>1?t[1]:t[0]):null!=t.x?(this.x=t.x,this.y=t.y):null!=t.width?(this.x=t.width,this.y=t.height):null!=t.angle?(this.x=t.length,this.y=0,this.setAngle(t.angle)):(this.x=this.y=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return t=Point.read(arguments),this.x==t.x&&this.y==t.y},clone:function(){return Point.create(this.x,this.y)},toString:function(){var t=Formatter.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},add:function(t){return t=Point.read(arguments),Point.create(this.x+t.x,this.y+t.y)},subtract:function(t){return t=Point.read(arguments),Point.create(this.x-t.x,this.y-t.y)},multiply:function(t){return t=Point.read(arguments),Point.create(this.x*t.x,this.y*t.y)},divide:function(t){return t=Point.read(arguments),Point.create(this.x/t.x,this.y/t.y)},modulo:function(t){return t=Point.read(arguments),Point.create(this.x%t.x,this.y%t.y)},negate:function(){return Point.create(-this.x,-this.y)},transform:function(t){return t?t._transformPoint(this):this},getDistance:function(t,e){t=Point.read(arguments);var n=t.x-this.x,i=t.y-this.y,r=n*n+i*i;return e?r:Math.sqrt(r)},getLength:function(){var t=this.x*this.x+this.y*this.y;return arguments.length&&arguments[0]?t:Math.sqrt(t)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();0==n&&this.getAngle(),this.set(this.x*n,this.y*n)}return this},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),n=0!=e?t/e:0,i=Point.create(this.x*n,this.y*n);return i._angle=this._angle,i},getAngle:function(){return 180*this.getAngleInRadians(arguments[0])/Math.PI},setAngle:function(t){if(t=this._angle=t*Math.PI/180,!this.isZero()){var e=this.getLength();this.set(Math.cos(t)*e,Math.sin(t)*e)}return this},getAngleInRadians:function(){if(void 0===arguments[0])return null==this._angle&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var t=Point.read(arguments),e=this.getLength()*t.getLength();return Numerical.isZero(e)?NaN:Math.acos(this.dot(t)/e)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(t){return t=Point.read(arguments),180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=Point.create(n.x*r-n.y*i,n.y*r+n.x*i),e?n.add(e):n},isInside:function(t){return t.contains(this)},isClose:function(t,e){return this.getDistance(t)<e},isColinear:function(t){return this.cross(t)<1e-5},isOrthogonal:function(t){return this.dot(t)<1e-5},isZero:function(){return Numerical.isZero(this.x)&&Numerical.isZero(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(t){return t=Point.read(arguments),this.x*t.x+this.y*t.y},cross:function(t){return t=Point.read(arguments),this.x*t.y-this.y*t.x},project:function(t){if(t=Point.read(arguments),t.isZero())return Point.create(0,0);var e=this.dot(t)/t.dot(t);return Point.create(t.x*e,t.y*e)},statics:{create:function(t,e){var n=Base.create(Point);return n.x=t,n.y=e,n},min:function(t,e){var n=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.min(n.x,_point2.x),Math.min(n.y,_point2.y))},max:function(t,e){var n=Point.read(arguments);return _point2=Point.read(arguments),Point.create(Math.max(n.x,_point2.x),Math.max(n.y,_point2.y))},random:function(){return Point.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Point.create(e(this.x),e(this.y))}},{})}),LinkedPoint=Point.extend({set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},statics:{create:function(t,e,n,i,r){if(r)return Point.create(n,i);var s=Base.create(LinkedPoint);return s._x=n,s._y=i,s._owner=t,s._setter=e,s}}}),Size=this.Size=Base.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t;if("number"===n){var i="number"==typeof e;this.width=t,this.height=i?e:t,this._read&&(this._read=i?2:1)}else"undefined"===n||null===t?(this.width=this.height=0,this._read&&(this._read=null===t?1:0)):(Array.isArray(t)?(this.width=t[0],this.height=t.length>1?t[1]:t[0]):null!=t.width?(this.width=t.width,this.height=t.height):null!=t.x?(this.width=t.x,this.height=t.y):(this.width=this.height=0,this._read&&(this._read=0)),this._read&&(this._read=1))},set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t=Size.read(arguments),this.width==t.width&&this.height==t.height},clone:function(){return Size.create(this.width,this.height)},toString:function(){var t=Formatter.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(t){return t=Size.read(arguments),Size.create(this.width+t.width,this.height+t.height)},subtract:function(t){return t=Size.read(arguments),Size.create(this.width-t.width,this.height-t.height)},multiply:function(t){return t=Size.read(arguments),Size.create(this.width*t.width,this.height*t.height)},divide:function(t){return t=Size.read(arguments),Size.create(this.width/t.width,this.height/t.height)},modulo:function(t){return t=Size.read(arguments),Size.create(this.width%t.width,this.height%t.height)},negate:function(){return Size.create(-this.width,-this.height)},isZero:function(){return Numerical.isZero(this.width)&&Numerical.isZero(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{create:function(t,e){return Base.create(Size).set(t,e)},min:function(t,e){return Size.create(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return Size.create(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return Size.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return Size.create(e(this.width),e(this.height))}},{})}),LinkedSize=Size.extend({set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)},statics:{create:function(t,e,n,i,r){if(r)return Size.create(n,i);var s=Base.create(LinkedSize);return s._width=n,s._height=i,s._owner=t,s._setter=e,s}}}),Rectangle=this.Rectangle=Base.extend({_class:"Rectangle",_readIndex:!0,initialize:function(t,e,n,i){var r=typeof t,s=0;if("number"===r?(this.x=t,this.y=e,this.width=n,this.height=i,s=4):"undefined"===r||null===t?(this.x=this.y=this.width=this.height=0,s=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3],s=1):void 0!==t.x||void 0!==t.width?(this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0,s=1):void 0===t.from&&void 0===t.to&&(this.x=this.y=this.width=this.height=0,this._set(t),s=1)),!s){var o=Point.readNamed(arguments,"from"),a=Base.peek(arguments);if(this.x=o.x,this.y=o.y,a&&void 0!==a.x||Base.hasNamed(arguments,"to")){var u=Point.readNamed(arguments,"to");this.width=u.x-o.x,this.height=u.y-o.y,this.width<0&&(this.x=u.x,this.width=-this.width),this.height<0&&(this.y=u.y,this.height=-this.height)}else{var l=Size.read(arguments);this.width=l.width,this.height=l.height}s=arguments._index}this._read&&(this._read=s)},set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return Rectangle.create(this.x,this.y,this.width,this.height)},equals:function(t){return t=Rectangle.read(arguments),this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},toString:function(){var t=Formatter.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(){return LinkedPoint.create(this,"setPoint",this.x,this.y,arguments[0])},setPoint:function(t){t=Point.read(arguments),this.x=t.x,this.y=t.y},getSize:function(){return LinkedSize.create(this,"setSize",this.width,this.height,arguments[0])},setSize:function(t){t=Size.read(arguments),this.width=t.width,this.height=t.height},getLeft:function(){return this.x},setLeft:function(t){this.width-=t-this.x,this.x=t},getTop:function(){return this.y},setTop:function(t){this.height-=t-this.y,this.y=t},getRight:function(){return this.x+this.width},setRight:function(t){this.width=t-this.x},getBottom:function(){return this.y+this.height},setBottom:function(t){this.height=t-this.y},getCenterX:function(){return this.x+.5*this.width},setCenterX:function(t){this.x=t-.5*this.width},getCenterY:function(){return this.y+.5*this.height},setCenterY:function(t){this.y=t-.5*this.height},getCenter:function(){return LinkedPoint.create(this,"setCenter",this.getCenterX(),this.getCenterY(),arguments[0])},setCenter:function(t){return t=Point.read(arguments),this.setCenterX(t.x),this.setCenterY(t.y),this},isEmpty:function(){return 0==this.width||0==this.height},contains:function(t){return t&&void 0!==t.width||4==(Array.isArray(t)?t:arguments).length?this._containsRectangle(Rectangle.read(arguments)):this._containsPoint(Point.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(t){return t=Rectangle.read(arguments),t.x+t.width>this.x&&t.y+t.height>this.y&&t.x<this.x+this.width&&t.y<this.y+this.height},touches:function(t){return t=Rectangle.read(arguments),t.x+t.width>=this.x&&t.y+t.height>=this.y&&t.x<=this.x+this.width&&t.y<=this.y+this.height},intersect:function(t){t=Rectangle.read(arguments);var e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return Rectangle.create(e,n,i-e,r-n)},unite:function(t){t=Rectangle.read(arguments);var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return Rectangle.create(e,n,i-e,r-n)},include:function(t){t=Point.read(arguments);var e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return Rectangle.create(e,n,i-e,r-n)},expand:function(t,e){return void 0===e&&(e=t),Rectangle.create(this.x-t/2,this.y-e/2,this.width+t,this.height+e)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(void 0===e?t:e)-this.height)},statics:{create:function(t,e,n,i){return Base.create(Rectangle).set(t,e,n,i)}}},new function(){return Base.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],o="get"+r,a="get"+s,u="set"+r,l="set"+s,c="get"+n,h="set"+n;this[c]=function(){return LinkedPoint.create(this,h,this[o](),this[a](),arguments[0])},this[h]=function(t){t=Point.read(arguments),this[u](t.x),this[l](t.y)}},{})}),LinkedRectangle=Rectangle.extend({set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this},statics:{create:function(t,e,n,i,r,s){var o=Base.create(LinkedRectangle).set(n,i,r,s,!0);return o._owner=t,o._setter=e,o}}},new function(){var t=Rectangle.prototype;return Base.each(["x","y","width","height"],function(t){var e=Base.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},Base.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(e){this._dontNotify=!0,t[n].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this)}},{isSelected:function(){return this._owner._boundsSelected},setSelected:function(t){var e=this._owner;e.setSelected&&(e._boundsSelected=t,e.setSelected(t||e._selectedSegmentState>0))}}))}),Matrix=this.Matrix=Base.extend({_class:"Matrix",initialize:function(t){var e=arguments.length,n=!0;if(6==e?this.set.apply(this,arguments):1==e?t instanceof Matrix?this.set(t._a,t._c,t._b,t._d,t._tx,t._ty):Array.isArray(t)?this.set.apply(this,t):n=!1:0==e?this.reset():n=!1,!n)throw new Error("Unsupported matrix parameters")},set:function(t,e,n,i,r,s){return this._a=t,this._c=e,this._b=n,this._d=i,this._tx=r,this._ty=s,this},_serialize:function(t){
return Base.serialize(this.getValues(),t)},clone:function(){return Matrix.create(this._a,this._c,this._b,this._d,this._tx,this._ty)},equals:function(t){return t&&this._a==t._a&&this._b==t._b&&this._c==t._c&&this._d==t._d&&this._tx==t._tx&&this._ty==t._ty},toString:function(){var t=Formatter.instance;return"[["+[t.number(this._a),t.number(this._b),t.number(this._tx)].join(", ")+"], ["+[t.number(this._c),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(){return this._a=this._d=1,this._c=this._b=this._tx=this._ty=0,this},scale:function(t,e){var n=Point.read(arguments),i=Point.read(arguments,0,0,!1,!0);return i&&this.translate(i),this._a*=n.x,this._c*=n.x,this._b*=n.y,this._d*=n.y,i&&this.translate(i.negate()),this},translate:function(t){t=Point.read(arguments);var e=t.x,n=t.y;return this._tx+=e*this._a+n*this._b,this._ty+=e*this._c+n*this._d,this},rotate:function(t,e){e=Point.read(arguments,1),t=t*Math.PI/180;var n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),o=n-n*r+i*s,a=i-n*s-i*r,u=this._a,l=this._b,c=this._c,h=this._d;return this._a=r*u+s*l,this._b=-s*u+r*l,this._c=r*c+s*h,this._d=-s*c+r*h,this._tx+=o*u+a*l,this._ty+=o*c+a*h,this},shear:function(t,e){var n=Point.read(arguments),i=Point.read(arguments,0,0,!1,!0);i&&this.translate(i);var r=this._a,s=this._c;return this._a+=n.y*this._b,this._c+=n.y*this._d,this._b+=n.x*r,this._d+=n.x*s,i&&this.translate(i.negate()),this},isIdentity:function(){return 1==this._a&&0==this._c&&0==this._b&&1==this._d&&0==this._tx&&0==this._ty},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},concatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d;return this._a=t._a*e+t._c*n,this._b=t._b*e+t._d*n,this._c=t._a*i+t._c*r,this._d=t._b*i+t._d*r,this._tx+=t._tx*e+t._ty*n,this._ty+=t._tx*i+t._ty*r,this},preConcatenate:function(t){var e=this._a,n=this._b,i=this._c,r=this._d,s=this._tx,o=this._ty;return this._a=t._a*e+t._b*i,this._b=t._a*n+t._b*r,this._c=t._c*e+t._d*i,this._d=t._c*n+t._d*r,this._tx=t._a*s+t._b*o+t._tx,this._ty=t._c*s+t._d*o+t._ty,this},transform:function(t,e,n,i,r){return arguments.length<5?this._transformPoint(Point.read(arguments)):this._transformCoordinates(t,e,n,i,r)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=Base.create(Point)),e.set(i*this._a+r*this._b+this._tx,i*this._c+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n,i,r){for(var s=e,o=i,a=e+2*r;s<a;){var u=t[s++],l=t[s++];n[o++]=u*this._a+l*this._b+this._tx,n[o++]=u*this._c+l*this._d+this._ty}return n},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,0,s,0,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=i.slice(),o=2;o<8;o++){var a=i[o],u=1&o;a<r[u]?r[u]=a:a>s[u]&&(s[u]=a)}return e||(e=Base.create(Rectangle)),e.set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(t){return this._inverseTransform(Point.read(arguments))},_getDeterminant:function(){var t=this._a*this._d-this._b*this._c;return isFinite(t)&&!Numerical.isZero(t)&&isFinite(this._tx)&&isFinite(this._ty)?t:null},_inverseTransform:function(t,e,n){var i=this._getDeterminant();if(!i)return null;var r=t.x-this._tx,s=t.y-this._ty;return e||(e=Base.create(Point)),e.set((r*this._d-s*this._b)/i,(s*this._a-r*this._c)/i,n)},decompose:function(){var t=this._a,e=this._b,n=this._c,i=this._d;if(Numerical.isZero(t*i-e*n))return null;var r=Math.sqrt(t*t+e*e);t/=r,e/=r;var s=t*n+e*i;n-=t*s,i-=e*s;var o=Math.sqrt(n*n+i*i);return n/=o,i/=o,s/=o,t*i<e*n&&(t=-t,e=-e,s=-s,r=-r),{translation:this.getTranslation(),scaling:Point.create(r,o),rotation:180*-Math.atan2(e,t)/Math.PI,shearing:s}},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},getTranslation:function(){return Point.create(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},inverted:function(){var t=this._getDeterminant();return t&&Matrix.create(this._d/t,-this._c/t,-this._b/t,this._a/t,(this._b*this._ty-this._d*this._tx)/t,(this._c*this._tx-this._a*this._ty)/t)},shiftless:function(){return Matrix.create(this._a,this._c,this._b,this._d,0,0)},applyToContext:function(t){t.transform(this._a,this._c,this._b,this._d,this._tx,this._ty)},statics:{create:function(t,e,n,i,r,s){return Base.create(Matrix).set(t,e,n,i,r,s)}}},new function(){return Base.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(t,e){e=Base.capitalize(e),this["get"+e]=function(){return this[t]},this["set"+e]=function(e){this[t]=e}},{})}),Line=this.Line=Base.extend({initialize:function(t,e,n){var i=Point.read(arguments),r=Point.read(arguments),s=Base.read(arguments);void 0!==s?(this.point=i,this.vector=r.subtract(i),this.infinite=s):(this.point=i,this.vector=r,this.infinite=!0)},intersect:function(t){var e=this.vector.cross(t.vector);if(!Numerical.isZero(e)){var n=t.point.subtract(this.point),i=n.cross(t.vector)/e,r=n.cross(this.vector)/e;return(this.infinite||0<=i&&i<=1)&&(t.infinite||0<=r&&r<=1)?this.point.add(this.vector.multiply(i)):null}},getSide:function(t){var e=this.vector,n=t.subtract(this.point),i=n.cross(e);return 0===i&&(i=n.dot(e))>0&&(i=n.subtract(e).dot(e))<0&&(i=0),i<0?-1:i>0?1:0},getDistance:function(t){var e=this.vector.y/this.vector.x,n=this.point.y-e*this.point.x,i=Math.abs(t.y-e*t.x-n)/Math.sqrt(e*e+1);return this.infinite?i:Math.min(i,t.getDistance(this.point),t.getDistance(this.point.add(this.vector)))},statics:{intersect:function(t,e,n,i,r,s,o,a,u){var l=n-t,c=i-e,h=o-r,d=a-s,f=t-r,p=e-s,g=d*l-h*c;if(!Numerical.isZero(g)){var m=(h*p-d*f)/g,v=(l*p-c*f)/g;if((u||0<=m&&m<=1)&&(u||0<=v&&v<=1))return Point.create(t+m*l,e+m*c)}}}}),Project=this.Project=PaperScopeItem.extend({_list:"projects",_reference:"project",initialize:function(t){this.base(!0),this.layers=[],this.symbols=[],this._currentStyle=new Style,this.activeLayer=new Layer,t&&(this.view=t instanceof View?t:View.create(t)),this._selectedItems={},this._selectedItemCount=0,this._drawCount=0,this.options={}},_serialize:function(t,e){return Base.serialize(this.layers,t,!1,e)},_needsRedraw:function(){this.view&&(this.view._redrawNeeded=!0)},clear:function(){for(var t=0;t<this.layers.length;t++)this.layers[t].remove();this.symbols=[]},remove:function(){return!!this.base()&&(this.view&&this.view.remove(),!0)},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.initialize(t)},getIndex:function(){return this._index},getSelectedItems:function(){var t=[];for(var e in this._selectedItems){var n=this._selectedItems[e];n._drawCount===this._drawCount&&t.push(n)}return t},_updateSelection:function(t){t._selected?(this._selectedItemCount++,this._selectedItems[t._id]=t,t.isInserted()&&(t._drawCount=this._drawCount)):(this._selectedItemCount--,delete this._selectedItems[t._id])},selectAll:function(){for(var t=0,e=this.layers.length;t<e;t++)this.layers[t].setSelected(!0)},deselectAll:function(){for(var t in this._selectedItems)this._selectedItems[t].setSelected(!1)},hitTest:function(t,e){t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments));for(var n=this.layers.length-1;n>=0;n--){var i=this.layers[n].hitTest(t,e);if(i)return i}return null},importJSON:function(t){return Base.importJSON(t)},draw:function(t,e){this._drawCount++,t.save(),e.applyToContext(t);for(var n={offset:new Point(0,0),transforms:[e]},i=0,r=this.layers.length;i<r;i++)this.layers[i].draw(t,n);if(t.restore(),this._selectedItemCount>0){t.save(),t.strokeWidth=1,t.strokeStyle=t.fillStyle="#009dec";for(var s in this._selectedItems){var o=this._selectedItems[s];if(o._drawCount===this._drawCount&&(o._drawSelected||o._boundsSelected)){var a=o._globalMatrix;if(o._drawSelected&&o._drawSelected(t,a),o._boundsSelected){var u=a._transformCorners(o._getBounds("getBounds"));t.beginPath();for(var i=0;i<8;i++)t[0===i?"moveTo":"lineTo"](u[i],u[++i]);t.closePath(),t.stroke();for(var i=0;i<8;i++)t.beginPath(),t.rect(u[i]-2,u[++i]-2,4,4),t.fill()}}}t.restore()}}}),Symbol=this.Symbol=Base.extend({_class:"Symbol",initialize:function(t,e){this._id=Symbol._id=(Symbol._id||0)+1,this.project=paper.project,this.project.symbols.push(this),t&&this.setDefinition(t,e),this._instances={}},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._class,this._definition],t,!1,e)})},_changed:function(t){Base.each(this._instances,function(e){e._changed(t)})},getDefinition:function(){return this._definition},setDefinition:function(t){t._parentSymbol&&(t=t.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=t,t.remove(),t.setSelected(!1),arguments[1]||t.setPosition(new Point),t._parentSymbol=this,this._changed(5)},place:function(t){return new PlacedSymbol(this,t)},clone:function(){return new Symbol(this._definition.clone())}}),Item=this.Item=Base.extend(Callback,{statics:{extend:function(t){return t._serializeFields&&(t._serializeFields=Base.merge(this.prototype._serializeFields,t._serializeFields)),t._class&&(t._type=Base.hyphenate(t._class)),this.base.apply(this,arguments)}}},{_applyMatrix:!0,_boundsSelected:!1,_serializeFields:{name:null,matrix:new Matrix,locked:!1,visible:!0,blendMode:"normal",opacity:1,guide:!1,clipMask:!1,data:{}},initialize:function(t){if(this._id=Item._id=(Item._id||0)+1,!this._project){var e=paper.project,n=e.activeLayer;n?n.addChild(this):this._setProject(e)}this._style=new Style(this._project._currentStyle),this._style._item=this,this._matrix=new Matrix,t&&this._matrix.translate(t)},_events:new function(){var t={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}},e={install:function(e){var n=this._project.view._eventCounters;if(n)for(var i in t)n[i]=(n[i]||0)+(t[i][e]||0)},uninstall:function(e){var n=this._project.view._eventCounters;if(n)for(var i in t)n[i]-=t[i][e]||0}};return Base.each(["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"],function(t){this[t]=e},{onFrame:{install:function(){this._project.view._animateItem(this,!0)},uninstall:function(){this._project.view._animateItem(this,!1)}},onLoad:{}})},_serialize:function(t,e){function n(n){for(var s in n){var o=r[s];Base.equals(o,n[s])||(i[s]=Base.serialize(o,t,"data"!==s,e))}}var i={},r=this;return n(this._serializeFields),this instanceof Group||n(this._style._defaults),[this._class,i]},_changed:function(t){if(4&t&&(delete this._bounds,delete this._position),this._parent&&12&t&&this._parent._clearBoundsCache(),2&t&&this._clearBoundsCache(),1&t&&this._project._needsRedraw(),this._parentSymbol&&this._parentSymbol._changed(t),this._project._changes){var e=this._project._changesById[this._id];e?e.flags|=t:(e={item:this,flags:t},this._project._changesById[this._id]=e,this._project._changes.push(e))}},set:function(t){return t&&this._set(t),this},getId:function(){return this._id},getType:function(){return this._type},getName:function(){return this._name},setName:function(t,e){if(this._name&&this._removeFromNamed(),t&&this._parent){for(var n=this._parent._children,i=this._parent._namedChildren,r=t,s=1;e&&n[t];)t=r+" "+s++;(i[t]=i[t]||[]).push(this),n[t]=this}this._name=t||void 0,this._changed(32)},getStyle:function(){return this._style},setStyle:function(t){this._style.initialize(t)},hasFill:function(){return!!this._style.getFillColor()}},Base.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=Base.capitalize(t),t="_"+t;this["get"+e]=function(){return this[t]},this["set"+e]=function(e){e!=this[t]&&(this[t]=e,this._changed("_locked"===t?32:33))}},{}),{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._children)for(var t=0,e=this._children.length;t<e;t++)if(this._children[t].isSelected())return!0;return this._selected},setSelected:function(t){if(this._children&&!arguments[1])for(var e=0,n=this._children.length;e<n;e++)this._children[e].setSelected(t);(t=!!t)!=this._selected&&(this._selected=t,this._project._updateSelection(this),this._changed(33))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var t=0,e=this._children.length;t<e;t++)if(!this._children[t].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(t){if(this._children)for(var e=0,n=this._children.length;e<n;e++)this._children[e].setFullySelected(t);this.setSelected(t,!0)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(33),this._parent&&this._parent._changed(256))},_clipMask:!1,getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(){var t=this._position||(this._position=this.getBounds().getCenter(!0));return arguments[0]?t:LinkedPoint.create(this,"setPosition",t.x,t.y)},setPosition:function(t){this.translate(Point.read(arguments).subtract(this.getPosition(!0)))},getMatrix:function(){return this._matrix},setMatrix:function(t){this._matrix.initialize(t),this._changed(5)},isEmpty:function(){return 0==this._children.length}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){var e=this._boundsGetter,n=this._getCachedBounds("string"==typeof e?e:e&&e[t]||t,arguments[0]);return"getBounds"==t?LinkedRectangle.create(this,"setBounds",n.x,n.y,n.width,n.height):n}},{_getCachedBounds:function(t,e,n){var i=(!e||e.equals(this._matrix))&&t;if(n&&this._parent){var r=n._id,s=this._parent._boundsCache=this._parent._boundsCache||{ids:{},list:[]};s.ids[r]||(s.list.push(n),s.ids[r]=n)}if(i&&this._bounds&&this._bounds[i])return this._bounds[i].clone();var o=this._matrix.isIdentity();e=!e||e.isIdentity()?o?null:this._matrix:o?e:e.clone().concatenate(this._matrix);var a=this._getBounds(t,e,i?this:n);return i&&(this._bounds||(this._bounds={}),this._bounds[i]=a.clone()),a},_clearBoundsCache:function(){if(this._boundsCache){for(var t=0,e=this._boundsCache.list,n=e.length;t<n;t++){var i=e[t];delete i._bounds,i!=this&&i._boundsCache&&i._clearBoundsCache()}delete this._boundsCache}},_getBounds:function(t,e,n){var i=this._children;if(!i||0==i.length)return new Rectangle;for(var r=1/0,s=-r,o=r,a=s,u=0,l=i.length;u<l;u++){var c=i[u];if(c._visible&&!c.isEmpty()){var h=c._getCachedBounds(t,e,n);r=Math.min(h.x,r),o=Math.min(h.y,o),s=Math.max(h.x+h.width,s),a=Math.max(h.y+h.height,a)}}return isFinite(r)?Rectangle.create(r,o,s-r,a-o):new Rectangle},setBounds:function(t){t=Rectangle.read(arguments);var e=this.getBounds(),n=new Matrix,i=t.getCenter();n.translate(i),t.width==e.width&&t.height==e.height||n.scale(0!=e.width?t.width/e.width:1,0!=e.height?t.height/e.height:1),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)}}),{getProject:function(){return this._project},_setProject:function(t){if(this._project!=t&&(this._project=t,this._children))for(var e=0,n=this._children.length;e<n;e++)this._children[e]._setProject(t)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof Layer)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},isInserted:function(){return!!this._parent&&this._parent.isInserted()},clone:function(){return this._clone(new this.constructor)},_clone:function(t){if(t.setStyle(this._style),this._children)for(var e=0,n=this._children.length;e<n;e++)t.addChild(this._children[e].clone(),!0);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],e=0,n=i.length;e<n;e++){var r=i[e];this.hasOwnProperty(r)&&(t[r]=this[r])}return t._matrix.initialize(this._matrix),t.setSelected(this._selected),this._name&&t.setName(this._name,!0),t},copyTo:function(t){var e=this.clone();return t.layers?t.activeLayer.addChild(e):t.addChild(e),e},rasterize:function(t){var e=this.getStrokeBounds(),n=(t||72)/72,i=CanvasProvider.getCanvas(e.getSize().multiply(n)),r=i.getContext("2d"),s=(new Matrix).scale(n).translate(-e.x,-e.y);r.save(),s.applyToContext(r),this.draw(r,{transforms:[s]});var o=new Raster(i);return o.setBounds(e),r.restore(),o},contains:function(t){return!!this._contains(this._matrix._inverseTransform(Point.read(arguments)))},_contains:function(t){if(this._children){for(var e=this._children.length-1;e>=0;e--)if(this._children[e].contains(t))return!0;return!1}return t.isInside(this._getBounds("getBounds"))},hitTest:function(t,e){function n(n,i){var o=r["get"+i]();if(t.getDistance(o)<e.tolerance)return new HitResult(n,s,{name:Base.hyphenate(i),point:o})}if(this._locked)return null;if(t=Point.read(arguments),e=HitResult.getOptions(Base.read(arguments)),!this._children&&!this.getRoughBounds().expand(e.tolerance)._containsPoint(t))return null;if(t=this._matrix._inverseTransform(t),(e.center||e.bounds)&&(!(this instanceof Layer)||this._parent)){var i,r=this.getBounds(),s=this,o=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"];if(e.center&&(i=n("center","Center")))return i;if(e.bounds)for(var a=0;a<8;a++)if(i=n("bounds",o[a]))return i}return this._children||!(e.guides&&!this._guide||e.selected&&!this._selected)?this._hitTest(t,e):null},_hitTest:function(t,e){if(this._children)for(var n=this._children.length-1;n>=0;n--){var i=this._children[n].hitTest(t,e);if(i)return i}},addChild:function(t,e){return this.insertChild(void 0,t,e)},insertChild:function(t,e,n){return this._children?(e._remove(!0),Base.splice(this._children,[e],t,0),e._parent=this,e._setProject(this._project),e._name&&e.setName(e._name),this._changed(3),e):null},addChildren:function(t,e){return this.insertChildren(this._children.length,t,e)},insertChildren:function(t,e,n){e=e&&Array.prototype.slice.apply(e);for(var i=this._children,r=i.length,s=t,o=0,a=e&&e.length;o<a;o++)if(this.insertChild(s,e[o],n)){var u=i.length;s+=u-r,r=u}return s!=t},insertAbove:function(t,e){var n=t._index;return t._parent==this._parent&&n<this._index&&n++,t._parent.insertChild(n,this,e)},insertBelow:function(t,e){var n=t._index;return t._parent==this._parent&&n>this._index&&n--,t._parent.insertChild(n,this,e)},sendToBack:function(){return this._parent.insertChild(0,this)},bringToFront:function(){return this._parent.addChild(this)},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",_removeFromNamed:function(){var t=this._parent._children,e=this._parent._namedChildren,n=this._name,i=e[n],r=i?i.indexOf(this):-1;-1!=r&&(t[n]==this&&delete t[n],i.splice(r,1),i.length?t[n]=i[i.length-1]:delete e[n])},_remove:function(t){return!!this._parent&&(this._name&&this._removeFromNamed(),null!=this._index&&Base.splice(this._parent._children,null,this._index,1),t&&this._parent._changed(3),this._parent=null,!0)},remove:function(){return this._remove(!0)},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=Base.pick(e,this._children.length);for(var n=Base.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!1);return n.length>0&&this._changed(3),n},reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(3)}},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(t){return-1==this._getOrder(t)},isBelow:function(t){return 1==this._getOrder(t)},isParent:function(t){return this._parent==t},isChild:function(t){return t&&t._parent==this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e==t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(group|layer|compound-path)$/.test(e._type)&&t.isDescendant(e))return!0;e=e._parent}return!1},scale:function(t,e,n){return(arguments.length<2||"object"==typeof e)&&(n=e,e=t),this.transform((new Matrix).scale(t,e,n||this.getPosition(!0)))},translate:function(t){var e=new Matrix;return this.transform(e.translate.apply(e,arguments))},rotate:function(t,e){return this.transform((new Matrix).rotate(t,e||this.getPosition(!0)))},shear:function(t,e,n){return(arguments.length<2||"object"==typeof e)&&(n=e,e=t),this.transform((new Matrix).shear(t,e,n||this.getPosition(!0)))},transform:function(t){var e=this._bounds,n=this._position;if(this._matrix.preConcatenate(t),(this._applyMatrix||arguments[1])&&this.applyMatrix(!1),this._changed(5),e&&t.getRotation()%90==0){for(var i in e){var r=e[i];t._transformBounds(r,r)}var s=this._boundsGetter,r=e[s&&s.getBounds||s||"getBounds"];r&&(this._position=r.getCenter(!0)),this._bounds=e}else n&&(this._position=t._transformPoint(n,n));return this},_transformContent:function(t,e){if(this._children){for(var n=0,i=this._children.length;n<i;n++)this._children[n].transform(t,e);return!0}},applyMatrix:function(t){if(this._transformContent(this._matrix,!0)){var e=this._style,n=e.getFillColor(!0),i=e.getStrokeColor(!0);n&&n.transform(this._matrix),i&&i.transform(this._matrix),this._matrix.reset()}t||this._changed(5)},fitBounds:function(t,e){t=Rectangle.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,o=new Rectangle(new Point,Size.create(n.width*s,n.height*s));o.setCenter(t.getCenter()),this.setBounds(o)},importJSON:function(t){return this.addChild(Base.importJSON(t))},_setStyles:function(t){var e=this._style,n=e.getStrokeWidth(),i=e.getStrokeJoin(),r=e.getStrokeCap(),s=e.getMiterLimit(),o=e.getFillColor(),a=e.getStrokeColor(),u=e.getDashArray(),l=e.getDashOffset();null!=n&&(t.lineWidth=n),i&&(t.lineJoin=i),r&&(t.lineCap=r),s&&(t.miterLimit=s),o&&(t.fillStyle=o.toCanvasStyle(t)),a&&(t.strokeStyle=a.toCanvasStyle(t),paper.support.nativeDash&&u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))),o&&a||(t.globalAlpha=this._opacity)},draw:function(t,e){if(this._visible&&0!=this._opacity){this._drawCount=this._project._drawCount;var n=e.transforms,i=n[n.length-1],r=i.clone().concatenate(this._matrix);n.push(this._globalMatrix=r);var s,o,a;if("normal"!==this._blendMode||this._opacity<1&&"raster"!==this._type&&("path"!==this._type||this.getFillColor()&&this.getStrokeColor())){var u=this.getStrokeBounds(i);if(!u.width||!u.height)return;a=e.offset,o=e.offset=u.getTopLeft().floor(),s=t,t=CanvasProvider.getContext(u.getSize().ceil().add(Size.create(1,1)))}t.save(),s&&t.translate(-o.x,-o.y),(s?r:this._matrix).applyToContext(t),this._draw(t,e),t.restore(),n.pop(),e.clip&&t.clip(),s&&(e.offset=a,"normal"!==this._blendMode?BlendMode.process(this._blendMode,t,s,this._opacity,o.subtract(a)):(s.save(),s.globalAlpha=this._opacity,s.drawImage(t.canvas,o.x,o.y),s.restore()),CanvasProvider.release(t))}}},Base.each(["down","drag","up","move"],function(t){this["removeOn"+Base.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=Tool._removeSets=Tool._removeSets||{};i[n]=i[n]||{},i[n][this._id]=this}return this}})),Group=this.Group=Item.extend({_class:"Group",_serializeFields:{children:[]},initialize:function(t){this.base(),this._children=[],this._namedChildren={},t&&!this._set(t)&&this.addChildren(Array.isArray(t)?t:arguments)},_changed:function(t){Item.prototype._changed.call(this,t),258&t&&delete this._clipItem},_getClipItem:function(){if(void 0!==this._clipItem)return this._clipItem;for(var t=0,e=this._children.length;t<e;t++){var n=this._children[t];if(n._clipMask)return this._clipItem=n}return this._clipItem=null},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_draw:function(t,e){var n=this._getClipItem();n&&(e.clip=!0,n.draw(t,e),e.clip=!1);for(var i=0,r=this._children.length;i<r;i++){var s=this._children[i];s!==n&&s.draw(t,e)}}}),Layer=this.Layer=Group.extend({_class:"Layer",initialize:function(t){this._project=paper.project,this._index=this._project.layers.push(this)-1,this.base.apply(this,arguments),this.activate()},_remove:function(t){return this._parent?this.base(t):null!=this._index&&(this._project.activeLayer===this&&(this._project.activeLayer=this.getNextSibling()||this.getPreviousSibling()),Base.splice(this._project.layers,null,this._index,1),this._project._needsRedraw(),!0)},getNextSibling:function(){return this._parent?this.base():this._project.layers[this._index+1]||null},getPreviousSibling:function(){return this._parent?this.base():this._project.layers[this._index-1]||null},isInserted:function(){return this._parent?this.base():null!=this._index},activate:function(){this._project.activeLayer=this}},new function(){function t(t){return function(e){return e instanceof Layer&&!e._parent&&this._remove(!0)?(Base.splice(e._project.layers,[this],e._index+(t?1:0),0),this._setProject(e._project),!0):this.base(e)}}return{insertAbove:t(!0),insertBelow:t(!1)}}),Clip=this.Clip=Group.extend({_class:"Clip",_applyMatrix:!1}),Shape=this.Shape=Item.extend({_class:"Shape",_applyMatrix:!1,initialize:function(t,e,n){this.base(e),this._type=t,this._size=n},_draw:function(t,e){var n=this._style,i=this._size,r=i.width,s=i.height,o=n.getFillColor(),a=n.getStrokeColor();if(o||a||e.clip)switch(t.beginPath(),this._type){case"rect":t.rect(-r/2,-s/2,r,s);break;case"circle":t.arc(0,0,(r+s)/4,0,2*Math.PI,!0);break;case"ellipse":var u=r/2,l=s/2,c=Numerical.KAPPA,h=u*c,d=l*c;t.moveTo(0,l),t.bezierCurveTo(0,l-d,u-h,0,u,0),t.bezierCurveTo(u+h,0,r,l-d,r,l),t.bezierCurveTo(r,l+d,u+h,s,u,s),t.bezierCurveTo(u-h,s,0,l+d,0,l)}e.clip||!o&&!a||(this._setStyles(t),o&&t.fill(),a&&t.stroke())},_contains:function(t){switch(this._type){case"rect":return this.base(t);case"circle":case"ellipse":return t.divide(this._size).getLength()<=.5}},_getBounds:function(t,e){var n=new Rectangle(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTest:function(t,e){if(this.hasFill()&&this.contains(t))return new HitResult("fill",this)},statics:{Circle:function(){var t=Point.readNamed(arguments,"center"),e=Base.readNamed(arguments,"radius");return new Shape("circle",t,new Size(2*e))},Rectangle:function(){var t=Rectangle.readNamed(arguments,"rectangle");return new Shape("rect",t.getCenter(!0),t.getSize(!0))},Ellipse:function(){var t=Rectangle.readNamed(arguments,"rectangle");return new Shape("ellipse",t.getCenter(!0),t.getSize(!0))}}}),Raster=this.Raster=Item.extend({_class:"Raster",_applyMatrix:!1,_boundsGetter:"getBounds",_boundsSelected:!0,_serializeFields:{source:null},initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),t&&!this._set(t)&&(t.getContext?this.setCanvas(t):"string"==typeof t?this.setSource(t):this.setImage(t)),this._size||(this._size=new Size)},clone:function(){var t=this._image;t||(t=CanvasProvider.getCanvas(this._size),t.getContext("2d").drawImage(this._canvas,0,0));var e=new Raster(t);return this._clone(e)},getSize:function(){return this._size},setSize:function(){var t=Size.read(arguments);if(!this._size.equals(t)){var e=this.getElement();this.setCanvas(CanvasProvider.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},isEmpty:function(){return 0==this._size.width&&0==this._size.height},getPpi:function(){var t=this._matrix,e=new Point(0,0).transform(t),n=new Point(1,0).transform(t).subtract(e),i=new Point(0,1).transform(t).subtract(e);return Size.create(72/n.getLength(),72/i.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&(this._image=null,this._changed(129)),this._context},setContext:function(t){this._context=t},getCanvas:function(){if(!this._canvas){var t=CanvasProvider.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){CanvasProvider.release(t)}}return this._canvas},setCanvas:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._canvas=t,this._size=Size.create(t.width,t.height),this._image=null,this._context=null,this._changed(133)},getImage:function(){return this._image},setImage:function(t){this._canvas&&CanvasProvider.release(this._canvas),this._image=t,this._size=Size.create(t.naturalWidth,t.naturalHeight),this._canvas=null,this._context=null,this._changed(5)},getSource:function(){return this._image&&this._image.src||this.toDataURL()},setSource:function(t){function e(){n.fire("load"),n._project.view&&n._project.view.draw(!0)}var n=this,i=document.getElementById(t)||new Image;DomEvent.add(i,{load:function(){n.setImage(i),e()}}),i.width&&i.height?setTimeout(e,0):i.src||(i.src=t),this.setImage(i)},getElement:function(){return this._canvas||this._image},getSubImage:function(t){t=Rectangle.read(arguments);var e=CanvasProvider.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},toDataURL:function(){var t=this._image&&this._image.src;if(/^data:/.test(t))return t;var e=this.getCanvas();return e?e.toDataURL():null},drawImage:function(t,e){e=Point.read(arguments,1),this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;t?t instanceof PathItem?(n=t,e=t.getBounds()):t.width?e=new Rectangle(t):t.x&&(e=Rectangle.create(t.x-.5,t.y-.5,1,1)):e=this.getBounds();var i=Math.min(e.width,32),r=Math.min(e.height,32),s=Raster._sampleContext;s?s.clearRect(0,0,33,33):s=Raster._sampleContext=CanvasProvider.getContext(new Size(32)),s.save();var o=(new Matrix).scale(i/e.width,r/e.height).translate(-e.x,-e.y);o.applyToContext(s),n&&n.draw(s,{clip:!0,transforms:[o]}),this._matrix.applyToContext(s),s.drawImage(this.getElement(),-this._size.width/2,-this._size.height/2),s.restore();for(var a=s.getImageData(.5,.5,Math.ceil(i),Math.ceil(r)).data,u=[0,0,0],l=0,c=0,h=a.length;c<h;c+=4){var d=a[c+3];l+=d,d/=255,u[0]+=a[c]*d,u[1]+=a[c+1]*d,u[2]+=a[c+2]*d}for(var c=0;c<3;c++)u[c]/=l;return l?Color.read(u):null},getPixel:function(t){t=Point.read(arguments);var e=this.getContext().getImageData(t.x,t.y,1,1).data;return new Color("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(t,e){var n=Point.read(arguments),i=Color.read(arguments),r=i._convert("rgb"),s=i._alpha,o=this.getContext(!0),a=o.createImageData(1,1),u=a.data;u[0]=255*r[0],u[1]=255*r[1],u[2]=255*r[2],u[3]=null!=s?255*s:255,o.putImageData(a,n.x,n.y)},createImageData:function(t){return t=Size.read(arguments),this.getContext().createImageData(t.width,t.height)},getImageData:function(t){return t=Rectangle.read(arguments),t.isEmpty()&&(t=new Rectangle(this.getSize())),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t,e){e=Point.read(arguments,1),this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new Rectangle(this._size).setCenter(0,0);return e?e._transformBounds(n):n},_hitTest:function(t,e){if(this._contains(t)){var n=this
;return new HitResult("pixel",n,{offset:t.add(n._size.divide(2)).round(),color:{get:function(){return n.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))}}),PlacedSymbol=this.PlacedSymbol=Item.extend({_class:"PlacedSymbol",_applyMatrix:!1,_boundsGetter:{getBounds:"getStrokeBounds"},_boundsSelected:!0,_serializeFields:{symbol:null},initialize:function(t,e){this.base(void 0!==e&&Point.read(arguments,1)),t&&!this._set(t)&&this.setSymbol(t instanceof Symbol?t:new Symbol(t))},getSymbol:function(){return this._symbol},setSymbol:function(t){this._symbol&&delete this._symbol._instances[this._id],this._symbol=t,t._instances[this._id]=this},clone:function(){return this._clone(new PlacedSymbol(this.symbol))},isEmpty:function(){return this._symbol._definition.isEmpty()},_getBounds:function(t,e){return this.symbol._definition._getCachedBounds(t,e)},_hitTest:function(t,e,n){var i=this._symbol._definition._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this.symbol._definition.draw(t,e)}}),HitResult=this.HitResult=Base.extend({initialize:function(t,e,n){this.type=t,this.item=e,n&&(n.enumerable=!0,this.inject(n))},statics:{getOptions:function(t){return t&&t._merged?t:Base.merge({type:null,tolerance:paper.project.options.hitTolerance||2,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},t)}}}),Segment=this.Segment=Base.extend({_class:"Segment",initialize:function(t,e,n,i,r,s){var o,a,u,l=arguments.length,c=SegmentPoint.create;0===l||(1===l?t.point?(o=t.point,a=t.handleIn,u=t.handleOut):o=t:l<6?2==l&&void 0===e.x?o=[t,e]:(o=t,a=e,u=n):6===l&&(o=[t,e],a=[n,i],u=[r,s])),c(this,"_point",o),c(this,"_handleIn",a),c(this,"_handleOut",u)},_serialize:function(t){return Base.serialize(this.isLinear()?this._point:[this._point,this._handleIn,this._handleOut],t,!0)},_changed:function(t){if(this._path){var e,n=this._path._curves&&this.getCurve();n&&(n._changed(),(e=n[t==this._point||t==this._handleIn&&n._segment1==this?"getPrevious":"getNext"]())&&e._changed()),this._path._changed(5)}},getPoint:function(){return this._point},setPoint:function(t){t=Point.read(arguments),this._point.set(t.x,t.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(t){t=Point.read(arguments),this._handleIn.set(t.x,t.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(t){t=Point.read(arguments),this._handleOut.set(t.x,t.y)},isLinear:function(){return this._handleIn.isZero()&&this._handleOut.isZero()},setLinear:function(){this._handleIn.set(0,0),this._handleOut.set(0,0)},_isSelected:function(t){var e=this._selectionState;return t==this._point?!!(4&e):t==this._handleIn?!!(1&e):t==this._handleOut&&!!(2&e)},_setSelected:function(t,e){var n=this._path,e=!!e,i=this._selectionState||0,r=[!!(4&i),!!(1&i),!!(2&i)];if(t==this._point){if(e)r[1]=r[2]=!1;else{var s=this.getPrevious(),o=this.getNext();r[1]=s&&(s._point.isSelected()||s._handleOut.isSelected()),r[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}r[0]=e}else{var a=t==this._handleIn?1:2;r[a]!=e&&(e&&(r[0]=!1),r[a]=e)}this._selectionState=(r[0]?4:0)|(r[1]?1:0)|(r[2]?2:0),n&&i!=this._selectionState&&(n._updateSelection(this,i,this._selectionState),n._changed(33))},isSelected:function(){return this._isSelected(this._point)},setSelected:function(t){this._setSelected(this._point,t)},getIndex:function(){return void 0!==this._index?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var t=this._index;return this._path._closed||t!=this._path._segments.length-1||t--,this._path.getCurves()[t]||null}return null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},reverse:function(){return new Segment(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new Segment(this._point,this._handleIn,this._handleOut)},equals:function(t){return t==this||t&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,o=i._x,a=i._y,u=2;return e[0]=o,e[1]=a,r&&(e[u++]=r._x+o,e[u++]=r._y+a),s&&(e[u++]=s._x+o,e[u++]=s._y+a),t&&(t._transformCoordinates(e,0,e,0,u/2),o=e[0],a=e[1],n?(i._x=o,i._y=a,u=2,r&&(r._x=e[u++]-o,r._y=e[u++]-a),s&&(s._x=e[u++]-o,s._y=e[u++]-a)):(r||(e[u++]=o,e[u++]=a),s||(e[u++]=o,e[u++]=a))),e}}),SegmentPoint=Point.extend({set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){return Numerical.isZero(this._x)&&Numerical.isZero(this._y)},setSelected:function(t){this._owner._setSelected(this,t)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(t,e,n){var i,r,s,o=Base.create(SegmentPoint);return n?void 0!==(i=n[0])?r=n[1]:(void 0===(i=n.x)&&(n=Point.read(arguments,2),i=n.x),r=n.y,s=n.selected):i=r=0,o._x=i,o._y=r,o._owner=t,t[e]=o,s&&o.setSelected(!0),o}}}),Curve=this.Curve=Base.extend({initialize:function(t,e,n,i,r,s,o,a){var u=arguments.length;if(0===u)this._segment1=new Segment,this._segment2=new Segment;else if(1==u)this._segment1=new Segment(t.segment1),this._segment2=new Segment(t.segment2);else if(2==u)this._segment1=new Segment(t),this._segment2=new Segment(e);else{var l,c,h,d;4==u?(l=t,c=e,h=n,d=i):8==u&&(l=[t,e],d=[o,a],c=[n-t,i-e],h=[r-o,s-a]),this._segment1=new Segment(l,null,c),this._segment2=new Segment(d,h,null)}},_changed:function(){delete this._length,delete this._bounds},getPoint1:function(){return this._segment1._point},setPoint1:function(t){t=Point.read(arguments),this._segment1._point.set(t.x,t.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(t){t=Point.read(arguments),this._segment2._point.set(t.x,t.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(t){t=Point.read(arguments),this._segment1._handleOut.set(t.x,t.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(t){t=Point.read(arguments),this._segment2._handleIn.set(t.x,t.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(t){this.getHandle1().setSelected(t),this.getHandle2().setSelected(t)},getValues:function(){return Curve.getValues(this._segment1,this._segment2)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(Point.create(t[n],t[n+1]));return e},getLength:function(){var t=arguments[0],e=arguments[1],n=0===arguments.length||0===t&&1===e;if(n&&null!=this._length)return this._length;var i=Curve.getLength(this.getValues(),t,e);return n&&(this._length=i),i},getArea:function(){return Curve.getArea(this.getValues())},getPart:function(t,e){return new Curve(Curve.getPart(this.getValues(),t,e))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getIntersections:function(t){return Curve.getIntersections(this.getValues(),t.getValues(),this,t,[])},getCrossings:function(t,e){function n(t,e){return Curve.evaluate(t.getPrevious().getValues(),1,!0,1).y*e.y>0}var i=this.getValues(),r=Curve.solveCubic(i,1,t.y,e),s=0,o=Math.abs;-1===r&&(e[0]=Curve.getParameterOf(i,t.x,t.y),r=null!==e[0]?1:0);for(var a=0;a<r;a++){var u=e[a];if(u>-1e-5&&u<.99999){var l=Curve.evaluate(i,u,!0,0);if(t.x<l.x+1e-5){var c=Curve.evaluate(i,u,!0,1);if(o(l.x-t.x)<1e-5){var h=c.getAngle();if(h>-180&&h<0&&(u>1e-5||n(this,c)))continue}else if(o(c.y)<1e-5||u<1e-5&&!n(this,c))continue;s++}}}return s},reverse:function(){return new Curve(this._segment2.reverse(),this._segment1.reverse())},divide:function(t){var e=null;if(t&&t.curve===this&&(t=t.parameter),t>0&&t<1){var n=Curve.subdivide(this.getValues(),t),i=this.isLinear(),r=n[0],s=n[1];i||(this._segment1._handleOut.set(r[2]-r[0],r[3]-r[1]),this._segment2._handleIn.set(s[4]-s[6],s[5]-s[7]));var o=r[6],a=r[7],u=new Segment(Point.create(o,a),!i&&Point.create(r[4]-o,r[5]-a),!i&&Point.create(s[2]-o,s[3]-a));if(this._path)this._segment1._index>0&&0===this._segment2._index?this._path.add(u):this._path.insert(this._segment2._index,u),e=this;else{var l=this._segment2;this._segment2=u,e=new Curve(u,l)}}return e},split:function(t){return this._path?this._path.split(this._segment1._index,t):null},clone:function(){return new Curve(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},statics:{create:function(t,e,n){var i=Base.create(Curve);return i._path=t,i._segment1=e,i._segment2=n,i},getValues:function(t,e){var n=t._point,i=t._handleOut,r=e._handleIn,s=e._point;return[n._x,n._y,n._x+i._x,n._y+i._y,s._x+r._x,s._y+r._y,s._x,s._y]},evaluate:function(t,e,n,i){var r,s,o=n?e:Curve.getParameterAt(t,e,0),a=t[0],u=t[1],l=t[2],c=t[3],h=t[4],d=t[5],f=t[6],p=t[7];if(0!==i||0!==o&&1!==o){var g=3*(l-a),m=3*(h-l)-g,v=f-a-g-m,_=3*(c-u),y=3*(d-c)-_,w=p-u-_-y;switch(i){case 0:r=((v*o+m)*o+g)*o+a,s=((w*o+y)*o+_)*o+u;break;case 1:case 2:;o<1e-5&&l==a&&c==u||o>.99999&&h==f&&d==p?(r=h-l,s=d-c):(r=(3*v*o+2*m)*o+g,s=(3*w*o+2*y)*o+_);break;case 3:r=6*v*o+2*m,s=6*w*o+2*y}}else r=0===o?a:f,s=0===o?u:p;return 2==i?new Point(s,-r):new Point(r,s)},subdivide:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7];void 0===e&&(e=.5);var c=1-e,h=c*n+e*r,d=c*i+e*s,f=c*r+e*o,p=c*s+e*a,g=c*o+e*u,m=c*a+e*l,v=c*h+e*f,_=c*d+e*p,y=c*f+e*g,w=c*p+e*m,b=c*v+e*y,x=c*_+e*w;return[[n,i,h,d,v,_,b,x],[b,x,y,w,g,m,u,l]]},solveCubic:function(t,e,n,i){var r=t[e],s=t[e+2],o=t[e+4],a=t[e+6],u=3*(s-r),l=3*(o-s)-u,c=a-r-u-l;return Numerical.solveCubic(c,l,u,r-n,i)},getParameterOf:function(t,e,n){if(Math.abs(t[0]-e)<1e-5&&Math.abs(t[1]-n)<1e-5)return 0;if(Math.abs(t[6]-e)<1e-5&&Math.abs(t[7]-n)<1e-5)return 1;for(var i,r,s=[],o=[],a=Curve.solveCubic(t,0,e,s),u=Curve.solveCubic(t,1,n,o),l=0;-1==a||l<a;)if(-1==a||(i=s[l++])>=0&&i<=1){for(var c=0;-1==u||c<u;)if((-1==u||(r=o[c++])>=0&&r<=1)&&(-1==a?i=r:-1==u&&(r=i),Math.abs(i-r)<1e-5))return.5*(i+r);if(-1==a)break}return null},getPart:function(t,e,n){return e>0&&(t=Curve.subdivide(t,e)[1]),n<1&&(t=Curve.subdivide(t,(n-e)/(1-e))[0]),t},isLinear:function(t){return t[0]===t[2]&&t[1]===t[3]&&t[4]===t[6]&&t[5]===t[7]},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],u=t[6],l=t[7],c=3*r-2*n-u,h=3*s-2*i-l,d=3*o-2*u-n,f=3*a-2*l-i;return Math.max(c*c,d*d)+Math.max(h*h,f*f)<10*e*e},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)Curve._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return Rectangle.create(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,o,a,u){function l(t,e){var n=t-e,i=t+e;n<o[r]&&(o[r]=n),i>a[r]&&(a[r]=i)}var c=3*(e-n)-t+i,h=2*(t+n)-4*e,d=e-t,f=Numerical.solveQuadratic(c,h,d,u);l(i,0);for(var p=0;p<f;p++){var g=u[p],m=1-g;1e-5<g&&g<.99999&&l(m*m*m*t+3*m*m*g*e+3*m*g*g*n+g*g*g*i,s)}},getIntersections:function(t,e,n,i,r){var s=this.getBounds(t),o=this.getBounds(e);if(s.touches(o))if((this.isLinear(t)||this.isFlatEnough(t,1e-5))&&(this.isLinear(e)||this.isFlatEnough(e,1e-5))){var a=Line.intersect(t[0],t[1],t[6],t[7],e[0],e[1],e[6],e[7],!1);if(a){var u=r[0],l=r[r.length-1];u&&a.equals(u._point)||l&&a.equals(l._point)||r.push(new CurveLocation(n,null,a,i))}}else for(var c=this.subdivide(t),h=this.subdivide(e),d=0;d<2;d++)for(var f=0;f<2;f++)this.getIntersections(c[d],h[f],n,i,r);return r}}},Base.each(["getBounds","getStrokeBounds","getHandleBounds","getRoughBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=Path[t]([this._segment1,this._segment2],!1,this._path._style)),e.clone()}},{}),Base.each(["getPoint","getTangent","getNormal","getCurvature"],function(t,e){this[t+"At"]=function(t,n){return Curve.evaluate(this.getValues(),t,n,e)},this[t]=function(t){return Curve.evaluate(this.getValues(),t,!0,e)}},{getParameterAt:function(t,e){return Curve.getParameterAt(this.getValues(),t,void 0!==e?e:t<0?1:0)},getParameterOf:function(t){return t=Point.read(arguments),Curve.getParameterOf(this.getValues(),t.x,t.y)},getLocationAt:function(t,e){return e||(t=this.getParameterAt(t)),new CurveLocation(this,t)},getLocationOf:function(t){var e=this.getParameterOf.apply(this,arguments);return null!=e?new CurveLocation(this,e):null},getNearestLocation:function(t){function e(e){if(e>=0&&e<=1){var i=t.getDistance(Curve.evaluate(n,e,!0,0),!0);if(i<s)return s=i,o=e,!0}}t=Point.read(arguments);for(var n=this.getValues(),i=.01,r=Numerical.TOLERANCE,s=1/0,o=0,a=1+r,u=0;u<=a;u+=i)e(u);for(i/=2;i>r;)e(o-i)||e(o+i)||(i/=2);var l=Curve.evaluate(n,o,!0,0);return new CurveLocation(this,o,l,null,t.getDistance(l))},getNearestPoint:function(t){return this.getNearestLocation.apply(this,arguments).getPoint()}}),new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7],l=9*(i-s)+3*(a-e),c=6*(e+s)-12*i,h=3*(i-e),d=9*(r-o)+3*(u-n),f=6*(n+o)-12*r,p=3*(r-n);return function(t){var e=(l*t+c)*t+h,n=(d*t+f)*t+p;return Math.sqrt(e*e+n*n)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}return{statics:!0,getLength:function(n,i,r){if(void 0===i&&(i=0),void 0===r&&(r=1),n[0]==n[2]&&n[1]==n[3]&&n[6]==n[4]&&n[7]==n[5]){var s=n[6]-n[0],o=n[7]-n[1];return(r-i)*Math.sqrt(s*s+o*o)}var a=t(n);return Numerical.integrate(a,i,r,e(i,r))},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],o=t[5],a=t[6],u=t[7];return(3*r*e-1.5*r*s-1.5*r*a-3*n*i-1.5*n*s-.5*n*a+1.5*o*e+1.5*o*i-3*o*a+.5*u*e+1.5*u*i+3*u*s)/10},getParameterAt:function(n,i,r){function s(t){var n=e(r,t);return d+=r<t?Numerical.integrate(l,r,t,n):-Numerical.integrate(l,t,r,n),r=t,d-i}if(0===i)return r;var o=i>0,a=o?r:0,u=o?1:r,i=Math.abs(i),l=t(n),c=Numerical.integrate(l,a,u,e(a,u));if(i>=c)return o?u:a;var h=i/c,d=0;return Numerical.findRoot(s,l,o?a+h:u-h,a,u,16,1e-5)}}}),CurveLocation=this.CurveLocation=Base.extend({initialize:function(t,e,n,i,r){this._id=CurveLocation._id=(CurveLocation._id||0)+1,this._curve=t,this._segment1=t._segment1,this._segment2=t._segment2,this._parameter=e,this._point=n,this._otherCurve=i,this._distance=r},getSegment:function(){if(!this._segment){var t=this.getCurve(),e=this.getParameter();if(1===e)this._segment=t._segment2;else if(0===e||arguments[0])this._segment=t._segment1;else{if(null==e)return null;this._segment=t.getLength(0,e)<t.getLength(e,1)?t._segment1:t._segment2}}return this._segment},getCurve:function(){return this._curve&&!arguments[0]||(this._curve=this._segment1.getCurve(),null==this._curve.getParameterOf(this._point)&&(this._curve=this._segment2.getPrevious().getCurve())),this._curve},getIntersection:function(){var t=this._intersection;return!t&&this._otherCurve&&(t=this._intersection=new CurveLocation(this._otherCurve,null,this._point,this),t._intersection=this),t},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getOffset:function(){var t=this.getPath();return t&&t._getOffset(this)},getCurveOffset:function(){var t=this.getCurve(),e=this.getParameter();return null!=e&&t&&t.getLength(0,e)},getParameter:function(){if((null==this._parameter||arguments[0])&&this._point){var t=this.getCurve(arguments[0]&&this._point);this._parameter=t&&t.getParameterOf(this._point)}return this._parameter},getPoint:function(){if(!this._point&&null!=this._parameter){var t=this.getCurve();this._point=t&&t.getPointAt(this._parameter,!0)}return this._point},getTangent:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getTangentAt(t,!0)},getNormal:function(){var t=this.getParameter(),e=this.getCurve();return null!=t&&e&&e.getNormalAt(t,!0)},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(!0);return t&&t.divide(this.getParameter(!0))},split:function(){var t=this.getCurve(!0);return t&&t.split(this.getParameter(!0))},toString:function(){var t=[],e=this.getPoint(),n=Formatter.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getParameter();return null!=r&&t.push("parameter: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"}}),PathItem=this.PathItem=Item.extend({getIntersections:function(t){if(!this.getBounds().touches(t.getBounds()))return[];for(var e=[],n=this.getCurves(),i=t.getCurves(),r=i.length,s=[],o=0;o<r;o++)s[o]=i[o].getValues();for(var o=0,a=n.length;o<a;o++)for(var u=n[o],l=u.getValues(),c=0;c<r;c++)Curve.getIntersections(l,s[c],u,i[c],e);return e},setPathData:function(t){function e(t,e,n){var r=parseFloat(i[t]);return o&&(r+=a[e]),n&&(a[e]=r),r}function n(t,n){return new Point(e(t,"x",n),e(t+1,"y",n))}var i,r,s=t.match(/[a-z][^a-z]*/gi),o=!1,a=new Point;"path"===this._type?this.removeSegments():this.removeChildren();for(var u=0,l=s.length;u<l;u++){var c=s[u];cmd=c[0],lower=cmd.toLowerCase(),i=c.slice(1).trim().split(/[\s,]+|(?=[+-])/),o=cmd===lower;var h=i.length;switch(lower){case"m":case"l":for(var d=0;d<h;d+=2)this[0===d&&"m"===lower?"moveTo":"lineTo"](n(d,!0));break;case"h":case"v":for(var f="h"==lower?"x":"y",d=0;d<h;d++)e(d,f,!0),this.lineTo(a);break;case"c":for(var d=0;d<h;d+=6)this.cubicCurveTo(n(d),r=n(d+2),n(d+4,!0));break;case"s":for(var d=0;d<h;d+=4)this.cubicCurveTo(a.multiply(2).subtract(r),r=n(d),n(d+2,!0));break;case"q":for(var d=0;d<h;d+=4)this.quadraticCurveTo(r=n(d),n(d+2,!0));break;case"t":for(var d=0;d<h;d+=2)this.quadraticCurveTo(r=a.multiply(2).subtract(r),n(d,!0));break;case"a":break;case"z":this.closePath()}}}}),Path=this.Path=PathItem.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this.base();var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||void 0===t.point&&void 0===t.x?null:arguments;this.setSegments(e||[]),t&&!e&&this._set(t)},clone:function(){var t=this._clone(new Path(this._segments));return t._closed=this._closed,void 0!==this._clockwise&&(t._clockwise=this._clockwise),t},_changed:function(t){if(Item.prototype._changed.call(this,t),4&t){if(delete this._length,delete this._clockwise,this._curves)for(var e=0,n=this._curves.length;e<n;e++)this._curves[e]._changed(5)}else 8&t&&delete this._bounds},getSegments:function(){return this._segments},setSegments:function(t){this._selectedSegmentState=0,this._segments.length=0,delete this._curves,this._add(Segment.readAll(t))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=Curve.create(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},getPathData:function(){function t(t,e,n){var i=t._point,a=e._point,u=t._handleOut,l=e._handleIn;if(u.isZero()&&l.isZero())n||o.push("L"+s.point(a,r));else{var c=a.subtract(i);o.push("c"+s.point(u,r)+" "+s.point(c.add(l),r)+" "+s.point(c,r))}}var e=this._segments,n=this._style,r=arguments[0],s=Formatter.instance,o=[];if(0===e.length)return"";for(o.push("M"+s.point(e[0]._point)),i=0,l=e.length-1;i<l;i++)t(e[i],e[i+1],!1);return(this._closed&&n.getStrokeColor()||n.getFillColor())&&t(e[e.length-1],e[0],!0),this._closed&&o.push("z"),o.join("")},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=Curve.create(this,this._segments[e-1],this._segments[0]))}this._changed(5)}},isEmpty:function(){return 0===this._segments.length},isPolygon:function(){for(var t=0,e=this._segments.length;t<e;t++)if(!this._segments[t].isLinear())return!1;return!0},_transformContent:function(t){for(var e=new Array(6),n=0,i=this._segments.length;n<i;n++)this._segments[n]._transformCoordinates(t,e,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,r=t.length,s=null==e,e=s?n.length:e,o=this.isFullySelected(),a=0;a<r;a++){var u=t[a];u._path&&(u=t[a]=u.clone()),u._path=this,u._index=e+a,o&&(u._selectionState=4),u._selectionState&&this._updateSelection(u,0,u._selectionState)}if(s)n.push.apply(n,t);else{n.splice.apply(n,[e,0].concat(t));for(var a=e+r,l=n.length;a<l;a++)n[a]._index=a}if(i||t._curves){i||(i=this._curves=[]);var c=e>0?e-1:e,h=c,d=Math.min(c+r,this._countCurves());t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),h+=t._curves.length);for(var a=h;a<d;a++)i.splice(a,0,Base.create(Curve));this._adjustCurves(c,d)}return this._changed(5),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)n=r[s],n._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0];(n=r[this._closed&&0===t?i.length-1:t-1])&&(n._segment2=i[t]||i[0]),(n=r[e])&&(n._segment1=i[e])},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(Segment.readAll(arguments)):this._add([Segment.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(Segment.readAll(arguments,1),t):this._add([Segment.read(arguments,1)],t)[0]},addSegment:function(t){return this._add([Segment.read(arguments)])[0]},insertSegment:function(t,e){return this._add([Segment.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(Segment.readAll(t))},insertSegments:function(t,e){return this._add(Segment.readAll(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e){t=t||0,e=Base.pick(e,this._segments.length);var n=this._segments,i=this._curves,r=n.length,s=n.splice(t,e-t),o=s.length;if(!o)return s;for(var a=0;a<o;a++){var u=s[a];u._selectionState&&this._updateSelection(u,u._selectionState,0),delete u._index,delete u._path}for(var a=t,l=n.length;a<l;a++)n[a]._index=a;if(i){var c=t>0&&e===r+(this._closed?1:0)?t-1:t,i=i.splice(c,o);arguments[2]&&(s._curves=i.slice(1)),this._adjustCurves(c,c)}return this._changed(5),s},isFullySelected:function(){return this._selected&&this._selectedSegmentState==4*this._segments.length},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelected:function(t){t||this._selectSegments(!1),this.base(t)},_selectSegments:function(t){var e=this._segments.length;this._selectedSegmentState=t?4*e:0;for(var n=0;n<e;n++)this._segments[n]._selectionState=t?4:0},_updateSelection:function(t,e,n){t._selectionState=n,(this._selectedSegmentState+=n-e)>0&&this.setSelected(!0)},flatten:function(t){for(var e=new PathFlattener(this),n=0,i=e.length/Math.ceil(e.length/t),r=e.length+(this._closed?-i:i)/2,s=[];n<=r;)s.push(new Segment(e.evaluate(n,0))),n+=i;this.setSegments(s)},simplify:function(t){if(this._segments.length>2){var e=new PathFitter(this,t||2.5);this.setSegments(e.fit())}},split:function(t,e){if(null!==e){if(1==arguments.length){var n=t;"number"==typeof n&&(n=this.getLocationAt(n)),t=n.index,e=n.parameter}e>=1&&(t++,e--);var i=this.getCurves();if(t>=0&&t<i.length){e>0&&i[t++].divide(e);var r,s=this.removeSegments(t,this._segments.length,!0);return this._closed?(this.setClosed(!1),r=this):t>0&&(r=this._clone((new Path).insertAbove(this,!0))),r._add(s,0),this.addSegment(s[0]),r}return null}},isClockwise:function(){return void 0!==this._clockwise?this._clockwise:Path.isClockwise(this._segments)},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse(),this._clockwise=t},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}delete this._curves,void 0!==this._clockwise&&(this._clockwise=!this._clockwise)},join:function(t){if(t){var e=t._segments,n=this.getLastSegment(),i=t.getLastSegment();n._point.equals(i._point)&&t.reverse();var r=t.getFirstSegment();if(n._point.equals(r._point))n.setHandleOut(r._handleOut),this._add(e.slice(1));else{var s=this.getFirstSegment();s._point.equals(r._point)&&t.reverse(),i=t.getLastSegment(),s._point.equals(i._point)?(s.setHandleIn(i._handleIn),this._add(e.slice(0,e.length-1),0)):this._add(e.slice())}t.remove();var s=this.getFirstSegment();return n=this.getLastSegment(),n._point.equals(s._point)&&(s.setHandleIn(n._handleIn),n.remove(),this.setClosed(!0)),this._changed(5),!0}return!1},reduce:function(){return this},getLength:function(){if(null==this._length){var t=this.getCurves();this._length=0;for(var e=0,n=t.length;e<n;e++)this._length+=t[e].getLength()}return this._length},getArea:function(){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},_getOffset:function(t){var e=t&&t.getIndex();if(null!=e){for(var n=this.getCurves(),i=0,r=0;r<e;r++)i+=n[r].getLength();return i+n[e].getLength(0,t.getParameter())}return null},getLocationOf:function(t){t=Point.read(arguments);for(var e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getLocationAt:function(t,e){var n=this.getCurves(),i=0;if(e){var r=~~t;return n[r].getLocationAt(t-r,!0)}for(var s=0,o=n.length;s<o;s++){var a=i,u=n[s];if((i+=u.getLength())>=t)return u.getLocationAt(t-a)}return t<=this.getLength()?new CurveLocation(n[n.length-1],1):null},getPointAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getPoint()},getTangentAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getTangent()},getNormalAt:function(t,e){var n=this.getLocationAt(t,e);return n&&n.getNormal()},getNearestLocation:function(t){t=Point.read(arguments);for(var e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var o=e[r].getNearestLocation(t);o._distance<n&&(n=o._distance,i=o)}return i},getNearestPoint:function(t){return this.getNearestLocation(t).getPoint()},hasFill:function(){return!!(this._style.getFillColor()||"compound-path"===this._parent._type&&this._parent._style.getFillColor())},_contains:function(t){var e=this.hasFill();if(!this._closed&&!e||!this._getBounds("getRoughBounds")._containsPoint(t))return!1;for(var n=this.getCurves(),i=this._segments,r=0,s=new Array(3),o=0,a=n.length;o<a;o++)r+=n[o].getCrossings(t,s);return!this._closed&&e&&(r+=Curve.create(this,i[i.length-1],i[0]).getCrossings(t,s)),1==(1&r)},_hitTest:function(t,e){function n(e,n,i){if(t.getDistance(n)<a)return new HitResult(i,l,{segment:e,point:n})}function i(t,i){var r=t._point;return(i||e.segments)&&n(t,r,"segment")||!i&&e.handles&&(n(t,r.add(t._handleIn),"handle-in")||n(t,r.add(t._handleOut),"handle-out"))}var r,s,o=this._style,a=e.tolerance||0,u=(e.stroke&&o.getStrokeColor()?o.getStrokeWidth()/2:0)+a,l=this;if(!e.ends||e.segments||this._closed){if(e.segments||e.handles)for(var c=0,h=this._segments.length;c<h;c++)if(s=i(this._segments[c]))return s}else if(s=i(this.getFirstSegment(),!0)||i(this.getLastSegment(),!0))return s;return e.stroke&&u>0&&(r=this.getNearestLocation(t)),!(r&&r._distance<=u)&&e.fill&&this.hasFill()&&this.contains(t)?new HitResult("fill",this):(!r&&e.stroke&&u>0&&(r=this.getNearestLocation(t)),r&&r._distance<=u?e.stroke?new HitResult("stroke",this,{location:r}):new HitResult("fill",this):void 0)}},new function(){function t(t,e,n,i){function r(e){var n=o[e],i=o[e+1];d==n&&f==i||(t.beginPath(),t.moveTo(d,f),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,s,0,2*Math.PI,!0),t.fill())}for(var s=i/2,o=new Array(6),a=0,u=e.length;a<u;a++){var l=e[a];l._transformCoordinates(n,o,!1);var c=l._selectionState,h=4&c,d=o[0],f=o[1];(h||1&c)&&r(2),(h||2&c)&&r(4),t.save(),t.beginPath(),t.rect(d-s,f-s,i,i),t.fill(),h||(t.beginPath(),t.rect(d-s+1,f-s+1,i-2,i-2),t.fillStyle="#ffffff",t.fill()),t.restore()}}function e(t,e,n){function i(e){var i=d[e];if(n)i._transformCoordinates(n,p,!1),r=p[0],s=p[1];else{var f=i._point;r=f._x,s=f._y}if(g)t.moveTo(r,s),g=!1;else{if(n)u=p[2],l=p[3];else{var m=i._handleIn;u=r+m._x,l=s+m._y}u==r&&l==s&&c==o&&h==a?t.lineTo(r,s):t.bezierCurveTo(c,h,u,l,r,s)}if(o=r,a=s,n)c=p[4],h=p[5];else{var m=i._handleOut;c=o+m._x,h=a+m._y}}for(var r,s,o,a,u,l,c,h,d=e._segments,f=d.length,p=new Array(6),g=!0,m=0;m<f;m++)i(m);e._closed&&f>1&&i(0)}return{_draw:function(t,n){n.compound||t.beginPath();var i=this._style,r=i.getFillColor(),s=i.getStrokeColor(),o=i.getDashArray(),a=!paper.support.nativeDash&&s&&o&&o.length;if((r||s&&!a||n.compound||n.clip)&&e(t,this),this._closed&&t.closePath(),!n.clip&&!n.compound&&(r||s)&&(this._setStyles(t),r&&t.fill(),s)){if(a){t.beginPath();for(var u,l=new PathFlattener(this),c=i.getDashOffset(),h=0;c<l.length;)u=c+o[h++%o.length],l.drawPart(t,c,u),c=u+o[h++%o.length]}t.stroke()}},_drawSelected:function(n,i){n.beginPath(),e(n,this,i),n.stroke(),t(n,this._segments,i,this._project.options.handleSize||4)}}},new function(){function t(t){var e=t.length,n=[],i=[],r=2;n[0]=t[0]/r;for(var s=1;s<e;s++)i[s]=1/r,r=(s<e-1?4:2)-i[s],n[s]=(t[s]-n[s-1])/r;for(var s=1;s<e;s++)n[e-s-1]-=i[e-s]*n[e-s];return n}return{smooth:function(){var e,n=this._segments,i=n.length,r=i;if(!(i<=2)){this._closed?(e=Math.min(i,4),r+=2*Math.min(i,e)):e=0;for(var s=[],o=0;o<i;o++)s[o+e]=n[o]._point;if(this._closed)for(var o=0;o<e;o++)s[o]=n[o+i-e]._point,s[o+i+e]=n[o]._point;else r--;for(var a=[],o=1;o<r-1;o++)a[o]=4*s[o]._x+2*s[o+1]._x;a[0]=s[0]._x+2*s[1]._x,a[r-1]=3*s[r-1]._x;for(var u=t(a),o=1;o<r-1;o++)a[o]=4*s[o]._y+2*s[o+1]._y;a[0]=s[0]._y+2*s[1]._y,a[r-1]=3*s[r-1]._y;var l=t(a);if(this._closed){for(var o=0,c=i;o<e;o++,c++){var h=o/e,d=1-h,f=o+e,p=c+e;u[c]=u[o]*h+u[c]*d,l[c]=l[o]*h+l[c]*d,u[p]=u[f]*d+u[p]*h,l[p]=l[f]*d+l[p]*h}r--}for(var g=null,o=e;o<=r-e;o++){var m=n[o-e];g&&m.setHandleIn(g.subtract(m._point)),o<r&&(m.setHandleOut(Point.create(u[o],l[o]).subtract(m._point)),g=o<r-1?Point.create(2*s[o+1]._x-u[o+1],2*s[o+1]._y-l[o+1]):Point.create((s[r]._x+u[r-1])/2,(s[r]._y+l[r-1])/2))}if(this._closed&&g){var m=this._segments[0];m.setHandleIn(g.subtract(m._point))}}}}},new function(){function t(t){var e=t._segments;if(0==e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(t){1===this._segments.length&&this.removeSegment(0),this._segments.length||this._add([new Segment(Point.read(arguments))])},moveBy:function(t){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(t){this._add([new Segment(Point.read(arguments))])},cubicCurveTo:function(e,n,i){var r=Point.read(arguments),s=Point.read(arguments),o=Point.read(arguments),a=t(this);a.setHandleOut(r.subtract(a._point)),this._add([new Segment(o,s.subtract(i))])},quadraticCurveTo:function(e,n){
var i=Point.read(arguments),n=Point.read(arguments),r=t(this)._point;this.cubicCurveTo(i.add(r.subtract(i).multiply(1/3)),i.add(n.subtract(i).multiply(1/3)),n)},curveTo:function(e,n,i){var r=Point.read(arguments),s=Point.read(arguments),o=Base.pick(Base.read(arguments),.5),a=1-o,u=t(this)._point,l=r.subtract(u.multiply(a*a)).subtract(s.multiply(o*o)).divide(2*o*a);if(l.isNaN())throw new Error("Cannot put a curve through points with parameter = "+o);this.quadraticCurveTo(l,s)},arcTo:function(e,n){var i,r=t(this),s=r._point,o=Point.read(arguments),a=Base.pick(Base.peek(arguments),!0);if("boolean"==typeof a){e=o,n=a;var u=s.add(e).divide(2),i=u.add(u.subtract(s).rotate(n?-90:90))}else i=o,e=Point.read(arguments);var l=new Line(s.add(i).divide(2),i.subtract(s).rotate(90)),c=new Line(i.add(e).divide(2),e.subtract(i).rotate(90)),h=l.intersect(c),d=new Line(s,e,!0),f=d.getSide(i);if(!h){if(!f)return this.lineTo(e);throw new Error("Cannot put an arc through the given points: "+[s,i,e])}var p=s.subtract(h),g=(p.getLength(),p.getDirectedAngle(e.subtract(h))),m=d.getSide(h);0==m?g=f*Math.abs(g):f==m&&(g-=360*(g<0?-1:1));for(var v=Math.abs(g),_=v>=360?4:Math.ceil(v/90),y=g/_,w=y*Math.PI/360,b=4/3*Math.sin(w)/(1+Math.cos(w)),x=[],C=0;C<=_;C++){var S=C<_?h.add(p):e,k=C<_?p.rotate(90).multiply(b):null;0==C?r.setHandleOut(k):x.push(new Segment(S,p.rotate(-90).multiply(b),k)),p=p.rotate(y)}this._add(x)},lineBy:function(e){e=Point.read(arguments);var n=t(this);this.lineTo(n._point.add(e))},curveBy:function(e,n,i){e=Point.read(e),n=Point.read(n);var r=t(this)._point;this.curveTo(r.add(e),r.add(n),i)},arcBy:function(e,n){e=Point.read(e),n=Point.read(n);var i=t(this)._point;this.arcBy(i.add(e),i.add(n))},closePath:function(){var t=this.getFirstSegment(),e=this.getLastSegment();t._point.equals(e._point)&&(t.setHandleIn(e._handleIn),e.remove()),this.setClosed(!0)}}},{_getBounds:function(t,e){return Path[t](this._segments,this._closed,this._style,e)},statics:{isClockwise:function(t){function e(t,e){void 0!==n&&(r+=(n-t)*(e+i)),n=t,i=e}for(var n,i,r=0,s=0,o=t.length;s<o;s++){var a=t[s],u=t[s+1<o?s+1:0],l=a._point,c=a._handleOut,h=u._handleIn,d=u._point;e(l._x,l._y),e(l._x+c._x,l._y+c._y),e(d._x+h._x,d._y+h._y),e(d._x,d._y)}return r>0},getBounds:function(t,e,n,i,r){function s(t){t._transformCoordinates(i,a,!1);for(var e=0;e<2;e++)Curve._addBounds(u[e],u[e+4],a[e+2],a[e],e,r?r[e]:0,l,c,h);var n=u;u=a,a=n}var o=t[0];if(!o)return new Rectangle;for(var a=new Array(6),u=o._transformCoordinates(i,new Array(6),!1),l=u.slice(0,2),c=l.slice(),h=new Array(2),d=1,f=t.length;d<f;d++)s(t[d]);return e&&s(o),Rectangle.create(l[0],l[1],c[0]-l[0],c[1]-l[1])},getStrokeBounds:function(t,e,n,i){function r(t){f=f.include(i?i._transformPoint(t,t):t)}function s(t,e){var n=t.getPointAt(e,!0),i=t.getNormalAt(e,!0).normalize(h);r(n.add(i)),r(n.subtract(i))}function o(t,e){if("round"===e||!t._handleIn.isZero()&&!t._handleOut.isZero())f=f.unite(m.setCenter(i?i._transformPoint(t._point):t._point));else if("bevel"===e){var n=t.getCurve();s(n,0),s(n.getPrevious(),1)}else if("miter"===e){var a=t.getCurve(),c=a.getPrevious(),h=a.getPointAt(0,!0),d=c.getNormalAt(1,!0).normalize(l),p=a.getNormalAt(0,!0).normalize(l),g=new Line(h.add(d),Point.create(-d.y,d.x)),v=new Line(h.add(p),Point.create(-p.y,p.x)),_=g.intersect(v);!_||h.getDistance(_)>u?o(t,"bevel"):r(_)}}function a(t,e,n){switch(e){case"round":return o(t,e);case"butt":case"square":var i=t.getCurve(),s=i.getPointAt(n,!0),a=i.getNormalAt(n,!0).normalize(h);"square"===e&&(s=s.add(a.rotate(0==n?-90:90))),r(s.add(a)),r(s.subtract(a))}}if(!n.getStrokeColor()||!n.getStrokeWidth())return Path.getBounds(t,e,n,i);var u,l,c=t.length-(e?0:1),h=n.getStrokeWidth()/2,d=function(t,e){if(!e)return[t,t];var n=e.shiftless(),i=n.transform(Point.create(t,0)),r=n.transform(Point.create(0,t)),s=i.getAngleInRadians(),o=i.getLength(),a=r.getLength(),u=Math.sin(s),l=Math.cos(s),c=Math.tan(s),h=-Math.atan(a*c/o),d=Math.atan(a/(c*o));return[Math.abs(o*Math.cos(h)*l-a*Math.sin(h)*u),Math.abs(a*Math.sin(d)*l+o*Math.cos(d)*u)]}(h,i),f=Path.getBounds(t,e,n,i,d),p=n.getStrokeJoin(),g=n.getStrokeCap();"miter"==p&&c>1&&(u=n.getMiterLimit()*n.getStrokeWidth()/2,l=h*(Path.isClockwise(t)?1:-1));for(var m=new Rectangle(new Size(d).multiply(2)),v=1;v<c;v++)o(t[v],p);return e?o(t[0],p):(a(t[0],g,0),a(t[t.length-1],g,1)),f},getHandleBounds:function(t,e,n,i,r,s){var o=new Array(6),a=1/0,u=-a,l=a,c=u;r=r/2||0,s=s/2||0;for(var h=0,d=t.length;h<d;h++){t[h]._transformCoordinates(i,o,!1);for(var f=0;f<6;f+=2){var p=0==f?s:r,g=o[f],m=o[f+1],v=g-p,_=g+p,y=m-p,w=m+p;v<a&&(a=v),_>u&&(u=_),y<l&&(l=y),w>c&&(c=w)}}return Rectangle.create(a,l,u-a,c-l)},getRoughBounds:function(t,e,n,i){var r=n.getStrokeColor()?n.getStrokeWidth():0;return Path.getHandleBounds(t,e,n,i,r,"miter"==n.getStrokeJoin()?r*n.getMiterLimit():r)}}});Path.inject({statics:new function(){function t(t){var e=new Path,n=Base.getNamed(t);return n&&e._set(n),e}function e(){var e=Rectangle.readNamed(arguments,"rectangle"),n=Size.readNamed(arguments,"radius",0,0,!1,!0),r=e.getBottomLeft(!0),s=e.getTopLeft(!0),o=e.getTopRight(!0),a=e.getBottomRight(!0),u=t(arguments);if(!n||n.isZero())u._add([new Segment(r),new Segment(s),new Segment(o),new Segment(a)]);else{n=Size.min(n,e.getSize(!0).divide(2));var l=n.multiply(2*i);u._add([new Segment(r.add(n.width,0),null,[-l.width,0]),new Segment(r.subtract(0,n.height),[0,l.height],null),new Segment(s.add(0,n.height),null,[0,-l.height]),new Segment(s.add(n.width,0),[-l.width,0],null),new Segment(o.subtract(n.width,0),null,[l.width,0]),new Segment(o.add(0,n.height),[0,-l.height],null),new Segment(a.subtract(0,n.height),null,[0,l.height]),new Segment(a.subtract(n.width,0),[l.width,0],null)])}return u._closed=!0,u}function n(){for(var e=Rectangle.readNamed(arguments,"rectangle"),n=t(arguments),i=e.getPoint(!0),s=e.getSize(!0),o=new Array(4),a=0;a<4;a++){var u=r[a];o[a]=new Segment(u._point.multiply(s).add(i),u._handleIn.multiply(s),u._handleOut.multiply(s))}return n._add(o),n._closed=!0,n}var i=Numerical.KAPPA/2,r=[new Segment([0,.5],[0,i],[0,-i]),new Segment([.5,0],[-i,0],[i,0]),new Segment([1,.5],[0,-i],[0,i]),new Segment([.5,1],[i,0],[-i,0])];return{Line:function(){return new Path(Point.readNamed(arguments,"from"),Point.readNamed(arguments,"to")).set(Base.getNamed(arguments))},Rectangle:e,RoundRectangle:e,Ellipse:n,Oval:n,Circle:function(){var t=Point.readNamed(arguments,"center"),e=Base.readNamed(arguments,"radius");return n(new Rectangle(t.subtract(e),Size.create(2*e,2*e))).set(Base.getNamed(arguments))},Arc:function(){var e=Point.readNamed(arguments,"from"),n=Point.readNamed(arguments,"through"),i=Point.readNamed(arguments,"to"),r=t(arguments);return r.moveTo(e),r.arcTo(n,i),r},RegularPolygon:function(){for(var e=Point.readNamed(arguments,"center"),n=Base.readNamed(arguments,"sides"),i=Base.readNamed(arguments,"radius"),r=t(arguments),s=360/n,o=!(n%3),a=new Point(0,o?-i:i),u=o?-1:.5,l=new Array(n),c=0;c<n;c++)l[c]=new Segment(e.add(a.rotate((c+u)*s)));return r._add(l),r._closed=!0,r},Star:function(){for(var e=Point.readNamed(arguments,"center"),n=2*Base.readNamed(arguments,"points"),i=Base.readNamed(arguments,"radius1"),r=Base.readNamed(arguments,"radius2"),s=t(arguments),o=360/n,a=new Point(0,-1),u=new Array(n),l=0;l<n;l++)u[l]=new Segment(e.add(a.rotate(o*l).multiply(l%2?r:i)));return s._add(u),s._closed=!0,s}}}});var CompoundPath=this.CompoundPath=PathItem.extend({_class:"CompoundPath",_serializeFields:{pathData:""},initialize:function(t){this.base(),this._children=[],this._namedChildren={},t&&!this._set(t)&&this.addChildren(Array.isArray(t)?t:arguments)},insertChild:function(t,e,n){return"path"!==e._type?null:(e=this.base(t,e),!n&&e&&void 0===e._clockwise&&e.setClockwise(0==e._index),e)},reduce:function(){if(1==this._children.length){var t=this._children[0];return t.insertAbove(this),this.remove(),t}return this},reverse:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].reverse()},smooth:function(){for(var t=0,e=this._children.length;t<e;t++)this._children[t].smooth()},isClockwise:function(){var t=this.getFirstChild();return t&&t.isClockwise()},setClockwise:function(t){this.isClockwise()!=!!t&&this.reverse()},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e=e.concat(t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getFirstCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getPathData:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)e.push(t[n].getPathData(arguments[0]));return e.join(" ")},_contains:function(t){for(var e=[],n=0,i=this._children.length;n<i;n++){var r=this._children[n];r.contains(t)&&e.push(r)}return 1==(1&e.length)&&e},_hitTest:function(t,e){var n=this.base(t,Base.merge(e,{fill:!1}));return!n&&e.fill&&this._style.getFillColor()&&(n=this._contains(t),n=n?new HitResult("fill",n[0]):null),n},_draw:function(t,e){var n=this._children,i=this._style;if(0!==n.length){t.beginPath(),e.compound=!0;for(var r=0,s=n.length;r<s;r++)n[r].draw(t,e);e.compound=!1,e.clip||(this._setStyles(t),i.getFillColor()&&t.fill(),i.getStrokeColor()&&t.stroke())}}},new function(){function t(t){if(!t._children.length)throw new Error("Use a moveTo() command first");return t._children[t._children.length-1]}var e={moveTo:function(t){var e=new Path;this.addChild(e),e.moveTo.apply(e,arguments)},moveBy:function(e){this.moveTo(t(this).getLastSegment()._point.add(Point.read(arguments)))},closePath:function(){t(this).closePath()}};return Base.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(n){e[n]=function(){var e=t(this);e[n].apply(e,arguments)}}),e}),PathFlattener=Base.extend({initialize:function(t){function e(t,e){var n=Curve.getValues(t,e);s.curves.push(n),s._computeParts(n,t._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;for(var n,i=t._segments,r=i[0],s=this,o=1,a=i.length;o<a;o++)n=i[o],e(r,n),r=n;t._closed&&e(n,i[0])},_computeParts:function(t,e,n,i){if(i-n>1/32&&!Curve.isFlatEnough(t,.25)){var r=Curve.subdivide(t),s=(n+i)/2;this._computeParts(r[0],e,n,s),this._computeParts(r[1],e,s,i)}else{var o=t[6]-t[0],a=t[7]-t[1],u=Math.sqrt(o*o+a*a);u>1e-5&&(this.length+=u,this.parts.push({offset:this.length,value:i,index:e}))}},getParameterAt:function(t){for(var e,n=this.index;e=n,!(0==n||this.parts[--n].offset<t););for(var i=this.parts.length;e<i;e++){var r=this.parts[e];if(r.offset>=t){this.index=e;var s=this.parts[e-1],o=s&&s.index==r.index?s.value:0,a=s?s.offset:0;return{value:o+(r.value-o)*(t-a)/(r.offset-a),index:r.index}}}var r=this.parts[this.parts.length-1];return{value:1,index:r.index}},evaluate:function(t,e){var n=this.getParameterAt(t);return Curve.evaluate(this.curves[n.index],n.value,!0,e)},drawPart:function(t,e,n){e=this.getParameterAt(e),n=this.getParameterAt(n);for(var i=e.index;i<=n.index;i++){var r=Curve.getPart(this.curves[i],i==e.index?e.value:0,i==n.index?n.value:1);i==e.index&&t.moveTo(r[0],r[1]),t.bezierCurveTo.apply(t,r.slice(2))}}}),PathFitter=Base.extend({initialize:function(t,e){this.points=[];for(var n,i=t._segments,r=0,s=i.length;r<s;r++){var o=i[r].point.clone();n&&n.equals(o)||(this.points.push(o),n=o)}this.error=e},fit:function(){var t=this.points,e=t.length;return this.segments=e>0?[new Segment(t[0])]:[],e>1&&this.fitCubic(0,e-1,t[1].subtract(t[0]).normalize(),t[e-2].subtract(t[e-1]).normalize()),this.segments},fitCubic:function(t,e,n,i){if(e-t==1){var r=this.points[t],s=this.points[e],o=r.getDistance(s)/3;return void this.addCurve([r,r.add(n.normalize(o)),s.add(i.normalize(o)),s])}for(var a,u=this.chordLengthParameterize(t,e),l=Math.max(this.error,this.error*this.error),c=0;c<=4;c++){var h=this.generateBezier(t,e,u,n,i),d=this.findMaxError(t,e,h,u);if(d.error<this.error)return void this.addCurve(h);if(a=d.index,d.error>=l)break;this.reparameterize(t,e,u,h),l=d.error}var f=this.points[a-1].subtract(this.points[a]),p=this.points[a].subtract(this.points[a+1]),g=f.add(p).divide(2).normalize();this.fitCubic(t,a,n,g),this.fitCubic(a,e,g.negate(),i)},addCurve:function(t){this.segments[this.segments.length-1].setHandleOut(t[1].subtract(t[0])),this.segments.push(new Segment(t[3],t[2].subtract(t[3])))},generateBezier:function(t,e,n,i,r){for(var s=1e-11,o=this.points[t],a=this.points[e],u=[[0,0],[0,0]],l=[0,0],c=0,h=e-t+1;c<h;c++){var d=n[c],f=1-d,p=3*d*f,g=f*f*f,m=p*f,v=p*d,_=d*d*d,y=i.normalize(m),w=r.normalize(v),b=this.points[t+c].subtract(o.multiply(g+m)).subtract(a.multiply(v+_));u[0][0]+=y.dot(y),u[0][1]+=y.dot(w),u[1][0]=u[0][1],u[1][1]+=w.dot(w),l[0]+=y.dot(b),l[1]+=w.dot(b)}var x,C,S=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(Math.abs(S)>s){var k=u[0][0]*l[1]-u[1][0]*l[0];x=(l[0]*u[1][1]-l[1]*u[0][1])/S,C=k/S}else{var T=u[0][0]+u[0][1],P=u[1][0]+u[1][1];x=C=Math.abs(T)>s?l[0]/T:Math.abs(P)>s?l[1]/P:0}var j=a.getDistance(o);return s*=j,(x<s||C<s)&&(x=C=j/3),[o,o.add(i.normalize(x)),a.add(r.normalize(C)),a]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t])},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(var s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var o=this.evaluate(3,t,n),a=this.evaluate(2,i,n),u=this.evaluate(1,r,n),l=o.subtract(e),c=a.dot(a)+l.dot(u);return Math.abs(c)<1e-5?n:n-l.dot(a)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);for(var i=1,r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,o=t+1;o<e;o++){var a=this.evaluate(3,n,i[o-t]),u=a.subtract(this.points[o]),l=u.x*u.x+u.y*u.y;l>=s&&(s=l,r=o)}return{error:s,index:r}}});PathItem.inject(new function(){function t(t,e){t.sort(function(t,e){var n=t.getPath(),i=e.getPath();return n===i?t.getIndex()+t.getParameter()-(e.getIndex()+e.getParameter()):n._id-i._id});for(var n=e&&[],i=t.length-1;i>=0;i--){var r=t[i],s=r.getIntersection(),o=r.divide(),a=o&&o.getSegment1()||r.getSegment();n&&n.push(s),a._intersection=s}return n}function e(t){if(t instanceof CompoundPath){for(var e=t._children,n=e.length,i=new Array(n),r=new Array(n),s=e[0].isClockwise(),o=0;o<n;o++)i[o]=e[o].getBounds(),r[o]=0;for(var o=0;o<n;o++){for(var a=1;a<n;a++)o!==a&&i[o].contains(i[a])&&r[a]++;o>0&&r[o]%2==0&&e[o].setClockwise(s)}}return t}function n(n,r,s,o){n=e(n.clone()),r=e(r.clone());var a=n.isClockwise(),u=r.isClockwise();t(t(n.getIntersections(r),!0)),o&&(r.reverse(),u=!u);for(var l=[].concat(n._children||[n]).concat(r._children||[r]),c=[],h=new CompoundPath,d=0,f=l.length;d<f;d++){var p=l[d],g=p._parent,m=p.isClockwise(),v=p._segments;p=g instanceof CompoundPath?g:p;for(var _=v.length-1;_>=0;_--){var y=v[_],w=y.getCurve().getPoint(.5);s(p===n,p!==n&&n.contains(w)&&(m===a||o||!i(n,w)),p!==r&&r.contains(w)&&(m===u||!i(r,w)))?y._invalid=!0:c.push(y)}}for(var d=0,f=c.length;d<f;d++){var y=c[d];if(!y._visited){var p=new Path,b=y._intersection,x=b&&b.getSegment(!0);y.getPrevious()._invalid&&y.setHandleIn(x?x._handleIn:Point.create(0,0));do{if(y._visited=!0,y._invalid&&y._intersection){var C=y._intersection.getSegment(!0);p.add(new Segment(y._point,y._handleIn,C._handleOut)),C._visited=!0,y=C}else p.add(y.clone());y=y.getNext()}while(y&&!y._visited&&y!==x);var S=p._segments.length;S>1&&(S>2||!p.isPolygon())?(p.setClosed(!0),h.addChild(p,!0)):p.remove()}}return n.remove(),r.remove(),h.reduce()}function i(t,e){var n=t.getCurves();if(t.getBounds().contains(e))for(var i=0,r=n.length;i<r;i++){var s=n[i];if(s.getBounds().contains(e)&&s.getParameterOf(e))return!0}return!1}return{unite:function(t){return n(this,t,function(t,e,n){return e||n})},intersect:function(t){return n(this,t,function(t,e,n){return!(e||n)})},subtract:function(t){return n(this,t,function(t,e,n){return t&&n||!t&&!e},!0)},exclude:function(t){return new Group([this.subtract(t),t.subtract(this)])},divide:function(t){return new Group([this.subtract(t),this.intersect(t)])}}});var TextItem=this.TextItem=Item.extend({_boundsSelected:!0,_serializeFields:{content:null},_boundsGetter:"getBounds",initialize:function(t){var e=t&&Base.isPlainObject(t)&&void 0===t.x&&void 0===t.y;this.base(e?null:Point.read(arguments)),this._content="",this._lines=[],e&&this._set(t)},_clone:function(t){return t.setContent(this._content),this.base(t)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(69)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),PointText=this.PointText=TextItem.extend({_class:"PointText",clone:function(){return this._clone(new PointText)},getPoint:function(){var t=this._matrix.getTranslation();return LinkedPoint.create(this,"setPoint",t.x,t.y)},setPoint:function(t){this.translate(Point.read(arguments).subtract(this._matrix.getTranslation()))},_draw:function(t){if(this._content){this._setStyles(t);var e=this._style,n=this._lines,i=e.getLeading();t.font=e.getFontStyle(),t.textAlign=e.getJustification();for(var r=0,s=n.length;r<s;r++){var o=n[r];e.getFillColor()&&t.fillText(o,0,0),e.getStrokeColor()&&t.strokeText(o,0,0),t.translate(0,i)}}}},new function(){var t=null;return{_getBounds:function(e,n){t||(t=CanvasProvider.getContext(1,1));var i=this._style,r=this._lines,s=r.length,o=i.getJustification(),a=i.getLeading(),u=0;t.font=i.getFontStyle();for(var l=0,c=0;c<s;c++)l=Math.max(l,t.measureText(r[c]).width);"left"!==o&&(u-=l/("center"===o?2:1));var h=Rectangle.create(u,s?a/4+(s-1)*a:0,l,-s*a);return n?n._transformBounds(h,h):h}}}),Color=this.Color=Base.extend(new function(){function t(t){var e=s[t];if(!e){n||(n=CanvasProvider.getContext(1,1),n.globalCompositeOperation="copy"),n.fillStyle="rgba(0,0,0,0)",n.fillStyle=t,n.fillRect(0,0,1,1);var i=n.getImageData(0,0,1,1).data;e=s[t]=[i[0]/255,i[1]/255,i[2]/255]}return e.slice()}function e(t){var e=t.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(e.length>=4){for(var n=[0,0,0],i=0;i<3;i++){var r=e[i+1];n[i]=parseInt(1==r.length?r+r:r,16)/255}return n}}var n,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},r={},s={},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],a={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r;return[0===s?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),0===i?0:s/i,i]},"hsb-rgb":function(t,e,n){var t=t/60%6,i=Math.floor(t),r=t-i,i=o[i],s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[i[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,o=0===s,a=o?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),u=(i+r)/2;return[a,o?0:u<.5?s/(i+r):s/(2-i-r),u]},"hsl-rgb":function(t,e,n){if(t/=360,0===e)return[n,n,n];for(var i=[t+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,o=[],a=0;a<3;a++){var u=i[a];u<0&&(u+=1),u>1&&(u-=1),o[a]=6*u<1?s+6*(r-s)*u:2*u<1?r:3*u<2?s+(r-s)*(2/3-u)*6:s}return o},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(t){return[]},"rgb-gradient":function(t,e,n){return[]}};return Base.each(i,function(t,e){r[e]=[],Base.each(t,function(t,n){var i=Base.capitalize(t),s=/^(hue|saturation)$/.test(t),o=r[e][n]="gradient"===t?function(t){var e=this._components[0];return t=Gradient.read(Array.isArray(t)?t:arguments,0,0,!1,!0),e!==t&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"hue"===t?function(t){return isNaN(t)?0:(t%360+360)%360}:"gradient"===e?function(e){return Point.read(arguments,0,0,!0,"highlight"===t)}:function(t){return isNaN(t)?0:Math.min(Math.max(t,0),1)};this["get"+i]=function(){return this._type===e||s&&/^hs[bl]$/.test(this._type)?this._components[n]:this._convert(e)[n]},this["set"+i]=function(t){this._type===e||s&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._type=e),null!=(t=o.call(this,t))&&(this._components[n]=t,this._changed())}},this)},{_class:"Color",_readIndex:!0,initialize:function(n){var s,o,a,u,l=Array.prototype.slice,c=arguments,h=0;Array.isArray(n)&&(c=n,n=c[0]);var d=null!=n&&typeof n;if("string"===d&&n in i&&(s=n,n=c[1],Array.isArray(n)?(o=n,a=c[2]):(this._read&&(h=1),c=l.call(c,1),d=typeof n)),!o){if(u="number"===d?c:"object"===d&&null!=n.length?n:null){s||(s=u.length>=3?"rgb":"gray");var f=i[s].length;a=u[f],this._read&&(h+=u===arguments?f+(null!=a?1:0):1),u.length>f&&(u=l.call(u,0,f))}else if("string"===d)o=n.match(/^#[0-9a-f]{3,6}$/i)?e(n):t(n),s="rgb";else if("object"===d)if("Color"===n._class){if(s=n._type,o=n._components.slice(),a=n._alpha,"gradient"===s)for(var p=1,g=o.length;p<g;p++){var m=o[p];m&&(o[p]=m.clone())}}else if("Gradient"===n._class)s="gradient",u=c;else{s="hue"in n?"lightness"in n?"hsl":"hsb":"gradient"in n||"stops"in n||"radial"in n?"gradient":"gray"in n?"gray":"rgb";var v=i[s];y=r[s],this._components=o=[];for(var p=0,g=v.length;p<g;p++){var _=n[v[p]];null==_&&0===p&&"gradient"===s&&"stops"in n&&(_={stops:n.stops,radial:n.radial}),_=y[p].call(this,_),null!=_&&(o[p]=_)}a=n.alpha}this._read&&s&&(h=1)}if(this._type=s||"rgb","gradient"===s&&(this._id=Color._id=(Color._id||0)+1),!o){this._components=o=[];for(var y=r[this._type],p=0,g=y.length;p<g;p++){var _=y[p].call(this,u&&u[p]);null!=_&&(o[p]=_)}}this._components=o,this._alpha=a,this._read&&(this._read=h)},_serialize:function(t,e){var n=this.getComponents();return Base.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(17)},clone:function(){return new Color(this._type,this._components.slice(),this._alpha)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=a[this._type+"-"+t])?e.apply(this,this._components):a["rgb-"+t].apply(this,a[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new Color(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){return t&&this._type===t._type&&this._alpha===t._alpha&&Base.equals(this._components,t._components)},toString:function(){for(var t=i[this._type],e=[],n="gradient"===this._type,r=Formatter.instance,s=0,o=t.length;s<o;s++){var a=this._components[s];null!=a&&e.push(t[s]+": "+(n?a:r.number(a)))}return null!=this._alpha&&e.push("alpha: "+r.number(this._alpha)),"{ "+e.join(", ")+" }"},toCss:function(t){var e=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha;return e=[Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])],n<1&&e.push(n),(4==e.length?"rgba(":"rgb(")+e.join(", ")+")"},toCanvasStyle:function(t){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCss();var e,n=this._components,i=n[0],r=i._stops,s=n[1],o=n[2];if(i._radial){var a=o.getDistance(s),u=n[3];if(u){var l=u.subtract(s);l.getLength()>a&&(u=s.add(l.normalize(a-.1)))}var c=u||s;e=t.createRadialGradient(c.x,c.y,0,s.x,s.y,a)}else e=t.createLinearGradient(s.x,s.y,o.x,o.y);for(var h=0,d=r.length;h<d;h++){var f=r[h];e.addColorStop(f._rampPoint,f._color.toCanvasStyle())}return this._canvasStyle=e},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new Color(t(),t(),t())}}})});Base.each(Color._types,function(t,e){var n=this[Base.capitalize(e)+"Color"]=function(t){var n=null!=t&&typeof t,i="object"===n&&null!=t.length?t:"string"===n?null:arguments;return i?new Color(e,i):new Color(t)};if(3==e.length){var i=e.toUpperCase();Color[i]=this[i+"Color"]=n}},this);var Gradient=this.Gradient=Base.extend({_class:"Gradient",initialize:function(t,e){this._id=Gradient._id=(Gradient._id||0)+1,t&&this._set(t)&&(t=e=null),this._stops||this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return Base.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),0===this._owners.length&&delete this._owners)},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new this.constructor(t)},getStops:function(){return this._stops},setStops:function(t){if(this.stops)for(var e=0,n=this._stops.length;e<n;e++)delete this._stops[e]._owner;if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=GradientStop.readAll(t,0,!0);for(var e=0,n=this._stops.length;e<n;e++){var i=this._stops[e];i._owner=this,i._defaultRamp&&i.setRampPoint(e/(n-1))}this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t&&t.constructor==this.constructor&&this._stops.length==t._stops.length){for(var e=0,n=this._stops.length;e<n;e++)if(!this._stops[e].equals(t._stops[e]))return!1;return!0}return!1}}),GradientStop=this.GradientStop=Base.extend({initialize:function(t,e){if(t){var n,i;void 0===e&&Array.isArray(t)?(n=t[0],i=t[1]):t.color?(n=t.color,i=t.rampPoint):(n=t,i=e),this.setColor(n),this.setRampPoint(i)}},clone:function(){return new GradientStop(this._color.clone(),this._rampPoint)},_serialize:function(t,e){return Base.serialize([this._color,this._rampPoint],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(17)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(t){this._defaultRamp=null==t,this._rampPoint=t||0,this._changed()},getColor:function(){return this._color},setColor:function(t){this._color=Color.read(arguments),this._color===t&&(this._color=t.clone()),this._color._owner=this,this._changed()},equals:function(t){return t==this||t instanceof GradientStop&&this._color.equals(t._color)&&this._rampPoint==t._rampPoint}}),Style=this.Style=Base.extend(new function(){var t={fillColor:void 0,strokeColor:void 0,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[],font:"sans-serif",fontSize:12,leading:null,justification:"left"},e={strokeWidth:25,strokeCap:25,strokeJoin:25,miterLimit:25,font:5,fontSize:5,leading:5,justification:5},n={},i={_defaults:t,_textDefaults:Base.merge(t,{fillColor:new Color})};return Base.each(t,function(t,r){var s=/Color$/.test(r),o=Base.capitalize(r),a=e[r],u="set"+o,l="get"+o;i[u]=function(t){var e=this._item&&this._item._children;if(e&&e.length>0&&"compound-path"!==this._item._type)for(var n=0,i=e.length;n<i;n++)e[n]._style[u](t);else{var o=this._values[r];o!=t&&(s&&(o&&delete o._owner,t&&t.constructor===Color&&(t._owner=this._item)),this._values[r]=t,this._item&&this._item._changed(a||17))}},i[l]=function(){var t,e=this._item&&this._item._children;if(!e||0===e.length||arguments[0]||"compound-path"===this._item._type){var t=this._values[r];return void 0===t?(t=this._defaults[r],t&&t.clone&&(t=t.clone()),this._values[r]=t):!s||t&&t.constructor===Color||(this._values[r]=t=Color.read([t],0,0,!0,!0),t&&(t._owner=this._item)),t}for(var n=0,i=e.length;n<i;n++){var o=e[n]._style[l]();if(t){if(!Base.equals(t,o))return}else t=o}return t},n[l]=function(){return this._style[l]()},n[u]=function(t){this._style[u](t)}}),Item.inject(n),i},{initialize:function(t){if(this._values={},this._item instanceof TextItem&&(this._defaults=this._textDefaults),t){var e=t instanceof Style,n=e?t._values:t;for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}}},getLeading:function(){var t=this.base();return null!=t?t:1.2*this.getFontSize()},getFontStyle:function(){var t=this.getFontSize();return(/[a-z]/i.test(t)?t+" ":t+"px ")+this.getFont()}}),DomElement=new function(){function t(e,n){for(var i=[],r=0,s=e&&e.length;r<s;){var o=e[r++];if("string"==typeof o)o=document.createElement(o);else if(!o||!o.nodeType)continue;Base.isPlainObject(e[r])&&DomElement.set(o,e[r++]),Array.isArray(e[r])&&t(e[r++],o),n&&n.appendChild(o),i.push(o)}return i}var e=/^(checked|value|selected|disabled)$/i,n={text:"textContent",html:"innerHTML"},i={lineHeight:1,zoom:1,zIndex:1,opacity:1};return{create:function(e,n){var i=Array.isArray(e),r=t(i?e:arguments,i?n:null);return 1==r.length?r[0]:r},find:function(t,e){return(e||document).querySelector(t)},findAll:function(t,e){return(e||document).querySelectorAll(t)},get:function(t,i){return t?e.test(i)?"value"!==i&&"string"==typeof t[i]||t[i]:i in n?t[n[i]]:t.getAttribute(i):null},set:function(t,i,r){if("string"!=typeof i)for(var s in i)i.hasOwnProperty(s)&&this.set(t,s,i[s]);else{if(!t||void 0===r)return t;e.test(i)?t[i]=r:i in n?t[n[i]]=r:"style"===i?this.setStyle(t,r):"events"===i?DomEvent.add(t,r):t.setAttribute(i,r)}return t},getStyles:function(t){var e=t&&t.ownerDocument.defaultView;return e&&e.getComputedStyle(t,"")},getStyle:function(t,e){return t&&t.style[e]||this.getStyles(t)[e]||null},setStyle:function(t,e,n){if("string"!=typeof e)for(var r in e)e.hasOwnProperty(r)&&this.setStyle(t,r,e[r]);else!/^-?[\d\.]+$/.test(n)||e in i||(n+="px"),t.style[e]=n;return t},hasClass:function(t,e){return new RegExp("\\s*"+e+"\\s*").test(t.className)},addClass:function(t,e){t.className=(t.className+" "+e).trim()},removeClass:function(t,e){t.className=t.className.replace(new RegExp("\\s*"+e+"\\s*")," ").trim()},remove:function(t){t.parentNode&&t.parentNode.removeChild(t)},removeChildren:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},getBounds:function(t,e){var n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.body,s=i.documentElement,o=n.left-(s.clientLeft||r.clientLeft||0),a=n.top-(s.clientTop||r.clientTop||0);if(!e){var u=i.defaultView;o+=u.pageXOffset||s.scrollLeft||r.scrollLeft,a+=u.pageYOffset||s.scrollTop||r.scrollTop}return new Rectangle(o,a,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return Rectangle.create(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return this.getBounds(t,e).getPoint()},getSize:function(t){return this.getBounds(t,!0).getSize()},isInvisible:function(t){return this.getSize(t).equals([0,0])},isInView:function(t){return!this.isInvisible(t)&&this.getViewportBounds(t).intersects(this.getBounds(t,!0))}}},DomEvent={add:function(t,e){for(var n in e){var i=e[n];t.addEventListener?t.addEventListener(n,i,!1):t.attachEvent&&t.attachEvent("on"+n,i.bound=function(){i.call(t,window.event)})}},remove:function(t,e){for(var n in e){var i=e[n];t.removeEventListener?t.removeEventListener(n,i,!1):t.detachEvent&&t.detachEvent("on"+n,i.bound)}},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t
;return Point.create(e.pageX||e.clientX+document.documentElement.scrollLeft,e.pageY||e.clientY+document.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getOffset:function(t,e){return DomEvent.getPoint(t).subtract(DomElement.getOffset(e||DomEvent.getTarget(t)))},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},stop:function(t){DomEvent.stopPropagation(t),DomEvent.preventDefault(t)}};DomEvent.requestAnimationFrame=new function(){var t="equestAnimationFrame",e=window["r"+t]||window["webkitR"+t]||window["mozR"+t]||window["oR"+t]||window["msR"+t];e&&e(function(t){null==t&&(e=null)});var n,i=[],r=!0;return DomEvent.add(window,{focus:function(){r=!0},blur:function(){r=!1}}),function(t,s){if(e)return e(t,s);i.push([t,s]),n||(n=setInterval(function(){for(var t=i.length-1;t>=0;t--){var e=i[t],n=e[0],s=e[1];(!s||("true"==PaperScript.getAttribute(s,"keepalive")||r)&&DomElement.isInView(s))&&(i.splice(t,1),n(Date.now()))}},1e3/60))}};var View=this.View=Base.extend(Callback,{initialize:function(t){this._scope=paper,this._project=paper.project,this._element=t;var e;if(this._id=t.getAttribute("id"),null==this._id&&t.setAttribute("id",this._id="view-"+View._id++),DomEvent.add(t,this._viewHandlers),PaperScript.hasAttribute(t,"resize")){var n=DomElement.getOffset(t,!0),i=this;e=DomElement.getViewportBounds(t).getSize().subtract(n),this._windowHandlers={resize:function(e){DomElement.isInvisible(t)||(n=DomElement.getOffset(t,!0)),i.setViewSize(DomElement.getViewportBounds(t).getSize().subtract(n))}},DomEvent.add(window,this._windowHandlers)}else e=Size.create(parseInt(t.getAttribute("width"),10),parseInt(t.getAttribute("height"),10)),e.isNaN()&&(e=DomElement.getSize(t));if(t.width=e.width,t.height=e.height,PaperScript.hasAttribute(t,"stats")){this._stats=new Stats;var r=this._stats.domElement,s=r.style,n=DomElement.getOffset(t);s.position="absolute",s.left=n.x+"px",s.top=n.y+"px",document.body.appendChild(r)}View._views.push(this),View._viewsById[this._id]=this,this._viewSize=LinkedSize.create(this,"setViewSize",e.width,e.height),this._matrix=new Matrix,this._zoom=1,View._focused||(View._focused=this),this._frameItems={},this._frameItemCount=0},remove:function(){return!!this._project&&(View._focused==this&&(View._focused=null),View._views.splice(View._views.indexOf(this),1),delete View._viewsById[this._id],this._project.view==this&&(this._project.view=null),DomEvent.remove(this._element,this._viewHandlers),DomEvent.remove(window,this._windowHandlers),this._element=this._project=null,this.detach("frame"),this._frameItems={},!0)},_events:{onFrame:{install:function(){this._requested||(this._animate=!0,this._handleFrame(!0))},uninstall:function(){this._animate=!1}},onResize:{}},_animate:!1,_time:0,_count:0,_handleFrame:function(t){if(this._requested=!1,this._animate){if(paper=this._scope,t){this._requested=!0;var e=this;DomEvent.requestAnimationFrame(function(){e._handleFrame(!0)},this._element)}var n=Date.now()/1e3,i=this._before?n-this._before:0;this._before=n,this._handlingFrame=!0,this.fire("frame",Base.merge({delta:i,time:this._time+=i,count:this._count++})),this._stats&&this._stats.update(),this._handlingFrame=!1,this.draw(!0)}},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.attach("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.detach("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.fire("frame",Base.merge(t,{time:n.time+=t.delta,count:n.count++}))}},_redraw:function(){this._redrawNeeded=!0,this._handlingFrame||(this._animate?this._handleFrame():this.draw())},_transform:function(t){this._matrix.concatenate(t),this._bounds=null,this._inverse=null,this._redraw()},getElement:function(){return this._element},getViewSize:function(){return this._viewSize},setViewSize:function(t){t=Size.read(arguments);var e=t.subtract(this._viewSize);e.isZero()||(this._element.width=t.width,this._element.height=t.height,this._viewSize.set(t.width,t.height,!0),this._bounds=null,this.fire("resize",{size:t,delta:e}),this._redraw())},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new Rectangle(new Point,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize(arguments[0])},getCenter:function(){return this.getBounds().getCenter(arguments[0])},setCenter:function(t){this.scrollBy(Point.read(arguments).subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(t){this._transform((new Matrix).scale(t/this._zoom,this.getCenter())),this._zoom=t},isVisible:function(){return DomElement.isInView(this._element)},scrollBy:function(t){this._transform((new Matrix).translate(Point.read(arguments).negate()))},projectToView:function(t){return this._matrix._transformPoint(Point.read(arguments))},viewToProject:function(t){return this._getInverse()._transformPoint(Point.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.inverted()),this._inverse}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t){return"string"==typeof t&&(t=document.getElementById(t)),new CanvasView(t)}}},new function(){function t(t){var e=DomEvent.getTarget(t);return e.getAttribute&&View._viewsById[e.getAttribute("id")]}function e(t,e){return t.viewToProject(DomEvent.getOffset(e,t._element))}function n(){if(!View._focused||!View._focused.isVisible())for(var t=0,e=View._views.length;t<e;t++){var n=View._views[t];if(n&&n.isVisible()){View._focused=l=n;break}}}function i(n){var i=View._focused=t(n),r=e(i,n);c=!0,i._onMouseDown&&i._onMouseDown(n,r),(a=i._scope._tool)&&a._onHandleEvent("mousedown",r,n),i.draw(!0)}function r(i){var r;if(c||(r=t(i),r?(u=View._focused,View._focused=l=r):l&&l==View._focused&&(View._focused=u,n())),r=r||View._focused){var s=i&&e(r,i);r._onMouseMove&&r._onMouseMove(i,s),(a=r._scope._tool)&&a._onHandleEvent(c&&a.responds("mousedrag")?"mousedrag":"mousemove",s,i)&&DomEvent.stop(i),r.draw(!0)}}function s(t){var n=View._focused;if(n&&c){var i=e(n,t);curPoint=null,c=!1,n._onMouseUp&&n._onMouseUp(t,i),a&&a._onHandleEvent("mouseup",i,t)&&DomEvent.stop(t),n.draw(!0)}}function o(t){c&&DomEvent.stop(t)}var a,u,l,c=!1;return DomEvent.add(document,{mousemove:r,mouseup:s,touchmove:r,touchend:s,selectstart:o,scroll:n}),DomEvent.add(window,{load:n}),{_viewHandlers:{mousedown:i,touchstart:i,selectstart:o},statics:{updateFocus:n}}}),CanvasView=View.extend({initialize:function(t){if(!(t instanceof HTMLCanvasElement)){var e=Size.read(arguments,1);e.isZero()&&(e=Size.create(1024,768)),t=CanvasProvider.getCanvas(e)}this._context=t.getContext("2d"),this._eventCounters={},this.base(t)},draw:function(t){if(t&&!this._redrawNeeded)return!1;var e=this._context,n=this._viewSize;return e.clearRect(0,0,n._width+1,n._height+1),this._project.draw(e,this._matrix),this._redrawNeeded=!1,!0}},new function(){function t(t,e,n,i,r,s){for(var o,a=i;a;){if(a.responds(t)&&(o||(o=new MouseEvent(t,e,n,i,r?n.subtract(r):null)),a.fire(t,o)&&(!s||o._stopped)))return!1;a=a.getParent()}return!0}function e(e,n,i,r,s){if(e._eventCounters[n]){var o=e._project,l=o.hitTest(r,{tolerance:o.options.hitTolerance||0,fill:!0,stroke:!0}),c=l&&l.item;if(c)return"mousemove"===n&&c!=a&&(s=r),"mousemove"===n&&u||t(n,i,r,c,s),c}}var n,i,r,s,o,a,u,l,c;return{_onMouseDown:function(t,a){var h=e(this,"mousedown",t,a);l=o==h&&Date.now()-c<300,s=o=h,n=i=r=a,u=s&&s.responds("mousedrag")},_onMouseUp:function(o,a){var h=e(this,"mouseup",o,a);u&&(i&&!i.equals(a)&&t("mousedrag",o,a,s,i),h!=s&&(r=a,t("mousemove",o,a,h,r))),h===s&&(c=Date.now(),l&&!t("doubleclick",o,n,h)||t("click",o,n,h),l=!1),s=null,u=!1},_onMouseMove:function(n,o){s&&t("mousedrag",n,o,s,i);var u=e(this,"mousemove",n,o,r);i=r=o,u!==a&&(t("mouseleave",n,o,a),a=u,t("mouseenter",n,o,u))}}}),Event=this.Event=Base.extend({initialize:function(t){this.event=t},preventDefault:function(){this._prevented=!0,DomEvent.preventDefault(this.event)},stopPropagation:function(){this._stopped=!0,DomEvent.stopPropagation(this.event)},stop:function(){this.stopPropagation(),this.preventDefault()},getModifiers:function(){return Key.modifiers}}),KeyEvent=this.KeyEvent=Event.extend({initialize:function(t,e,n,i){this.base(i),this.type=t?"keydown":"keyup",this.key=e,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),Key=this.Key=new function(){function t(t,e,i,r){var o=String.fromCharCode(i),a=n[e]||o.toLowerCase(),u=t?"keydown":"keyup",l=View._focused,c=l&&l.isVisible()&&l._scope,h=c&&c._tool;s[a]=t,h&&h.responds(u)&&(h.fire(u,new KeyEvent(t,a,o,r)),l&&l.draw(!0))}var e,n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},i=Base.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1,space:!1}),r={},s={};return DomEvent.add(document,{keydown:function(s){var o,a=s.which||s.keyCode,u=n[a];u?((o=Base.camelize(u))in i&&(i[o]=!0),r[a]=0,t(!0,a,null,s)):e=a},keypress:function(n){if(null!=e){var i=n.which||n.keyCode;r[e]=i,t(!0,e,i,n),e=null}},keyup:function(e){var s,o=e.which||e.keyCode,a=n[o];a&&(s=Base.camelize(a))in i&&(i[s]=!1),null!=r[o]&&(t(!1,o,r[o],e),delete r[o])}}),{modifiers:i,isDown:function(t){return!!s[t]}}},MouseEvent=this.MouseEvent=Event.extend({initialize:function(t,e,n,i,r){this.base(e),this.type=t,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Palette=this.Palette=Base.extend(Callback,{_events:["onChange"],initialize:function(t,e,n){var i=DomElement.find(".palettejs-panel")||DomElement.find("body").appendChild(DomElement.create("div",{class:"palettejs-panel"}));this._element=i.appendChild(DomElement.create("table",{class:"palettejs-pane"})),this._title=t,n||(n={});for(var r in this._components=e){var s=e[r];s instanceof Component||(null==s.value&&(s.value=n[r]),s.name=r,s=e[r]=new Component(s)),this._element.appendChild(s._element),s._palette=this,void 0===n[r]&&(n[r]=s.value)}this._values=Base.each(n,function(t,i){var r=e[i];r&&Base.define(n,i,{enumerable:!0,configurable:!0,writable:!0,get:function(){return r._value},set:function(t){r.setValue(t)}})}),window.paper&&paper.palettes.push(this)},reset:function(){for(var t in this._components)this._components[t].reset()},remove:function(){DomElement.remove(this._element)}}),Component=this.Component=Base.extend(Callback,{_events:["onChange","onClick"],_types:{boolean:{type:"checkbox",value:"checked"},string:{type:"text"},number:{type:"number",number:!0},button:{type:"button"},text:{tag:"div",value:"text"},slider:{type:"range",number:!0},list:{tag:"select",options:function(){DomElement.removeChildren(this._inputItem),DomElement.create(Base.each(this._options,function(t){this.push("option",{value:t,text:t})},[]),this._inputItem)}}},initialize:function(t){this._type=t.type in this._types?t.type:"options"in t?"list":"onClick"in t?"button":typeof t.value,this._info=this._types[this._type]||{type:this._type};var e=this,n=!1;this._inputItem=DomElement.create(this._info.tag||"input",{type:this._info.type,events:{change:function(){e.setValue(DomElement.get(this,e._info.value||"value")),n&&(e._palette.fire("change",e,e.name,e._value),e.fire("change",e._value))},click:function(){e.fire("click")}}}),this._element=DomElement.create("tr",[this._labelItem=DomElement.create("td"),"td",[this._inputItem]]),Base.each(t,function(t,e){this[e]=t},this),this._defaultValue=this._value,n=!0},getType:function(){return this._type},getLabel:function(){return this._label},setLabel:function(t){this._label=t,DomElement.set(this._labelItem,"text",t+":")},getOptions:function(){return this._options},setOptions:function(t){this._options=t,this._info.options&&this._info.options.call(this)},getValue:function(){return this._value},setValue:function(t){var e=this._info.value||"value";DomElement.set(this._inputItem,e,t),t=DomElement.get(this._inputItem,e),this._value=this._info.number?parseFloat(t,10):t},getRange:function(){return[parseFloat(DomElement.get(this._inputItem,"min")),parseFloat(DomElement.get(this._inputItem,"max"))]},setRange:function(t,e){var n=Array.isArray(t)?t:[t,e];DomElement.set(this._inputItem,{min:n[0],max:n[1]})},getMin:function(){return this.getRange()[0]},setMin:function(t){this.setRange(t,this.getMax())},getMax:function(){return this.getRange()[1]},setMax:function(t){this.setRange(this.getMin(),t)},getStep:function(){return parseFloat(DomElement.get(this._inputItem,"step"))},setStep:function(t){DomElement.set(this._inputItem,"step",t)},reset:function(){this.setValue(this._defaultValue)}}),ToolEvent=this.ToolEvent=Event.extend({_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this.middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(group|compound-path)$/.test(n._type);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Tool=this.Tool=PaperScopeItem.extend({_list:"tools",_reference:"_tool",_events:["onActivate","onDeactivate","onEditOptions","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"],initialize:function(t){this.base(),this._firstMove=!0,this._count=0,this._downCount=0,this._set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=this._maxDistance&&this._maxDistance<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=t,this._maxDistance=t},_updateEvent:function(t,e,n,i,r,s,o){if(!r){if(null!=n||null!=i){var a=null!=n?n:0,u=e.subtract(this._point),l=u.getLength();if(l<a)return!1;var c=null!=i?i:0;if(0!=c)if(l>c)e=this._point.add(u.normalize(c));else if(o)return!1}if(s&&e.equals(this._point))return!1}switch(this._lastPoint=r&&"mousemove"==t?e:this._point,this._point=e,t){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=r?0:this._count+1,!0},fire:function(t,e){var n=Tool._removeSets;if(n){"mouseup"===t&&(n.mousedrag=null);var i=n[t];if(i){for(var r in i){var s=i[r];for(var o in n){var a=n[o];a&&a!=i&&delete a[s._id]}s.remove()}n[t]=null}}return this.base(t,e)},_onHandleEvent:function(t,e,n){paper=this._scope;var i=!1;switch(t){case"mousedown":this._updateEvent(t,e,null,null,!0,!1,!1),this.responds(t)&&(i=this.fire(t,new ToolEvent(this,t,n)));break;case"mousedrag":for(var r=!1,s=!1;this._updateEvent(t,e,this.minDistance,this.maxDistance,!1,r,s);)this.responds(t)&&(i=this.fire(t,new ToolEvent(this,t,n))),r=!0,s=!0;break;case"mouseup":!e.equals(this._point)&&this._updateEvent("mousedrag",e,this.minDistance,this.maxDistance,!1,!1,!1)&&this.responds("mousedrag")&&(i=this.fire("mousedrag",new ToolEvent(this,t,n))),this._updateEvent(t,e,null,this.maxDistance,!1,!1,!1),this.responds(t)&&(i=this.fire(t,new ToolEvent(this,t,n))),this._updateEvent(t,e,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":for(;this._updateEvent(t,e,this.minDistance,this.maxDistance,this._firstMove,!0,!1);)this.responds(t)&&(i=this.fire(t,new ToolEvent(this,t,n))),this._firstMove=!1}return i}}),CanvasProvider={canvases:[],getCanvas:function(t,e){var n=void 0===e?t:Size.create(t,e);if(this.canvases.length){var i=this.canvases.pop();return i.width!=n.width||i.height!=n.height?(i.width=n.width,i.height=n.height):i.getContext("2d").clearRect(0,0,n.width+1,n.height+1),i}var i=document.createElement("canvas");return i.width=n.width,i.height=n.height,i},getContext:function(t,e){return this.getCanvas(t,e).getContext("2d")},release:function(t){this.canvases.push(t.canvas?t.canvas:t)}},BlendMode={process:function(t,e,n,i,r){function s(t,e,n){return.2989*t+.587*e+.114*n}function o(t,e,n,i){var r=i-s(t,e,n);v=t+r,_=e+r,y=n+r;var i=s(v,_,y),o=S(v,_,y),a=k(v,_,y);if(o<0){var u=i-o;v=i+(v-i)*i/u,_=i+(_-i)*i/u,y=i+(y-i)*i/u}if(a>255){var l=255-i,c=a-i;v=i+(v-i)*l/c,_=i+(_-i)*l/c,y=i+(y-i)*l/c}}function a(t,e,n){return k(t,e,n)-S(t,e,n)}function u(t,e,n,i){var r,s=[t,e,n],o=k(t,e,n),a=S(t,e,n);a=a==t?0:a==e?1:2,o=o==t?0:o==e?1:2,r=0==S(a,o)?1==k(a,o)?2:1:0,s[o]>s[a]?(s[r]=(s[r]-s[a])*i/(s[o]-s[a]),s[o]=i):s[r]=s[o]=0,s[a]=0,v=s[0],_=s[1],y=s[2]}var l,c,h,d,f,p,g,m,v,_,y,w=e.canvas,b=n.getImageData(r.x,r.y,w.width,w.height),x=b.data,C=e.getImageData(0,0,w.width,w.height).data,S=Math.min,k=Math.max,T=Math.abs,P={multiply:function(){v=f*l/255,_=p*c/255,y=g*h/255},screen:function(){v=255-(255-f)*(255-l)/255,_=255-(255-p)*(255-c)/255,y=255-(255-g)*(255-h)/255},overlay:function(){v=f<128?2*f*l/255:255-2*(255-f)*(255-l)/255,_=p<128?2*p*c/255:255-2*(255-p)*(255-c)/255,y=g<128?2*g*h/255:255-2*(255-g)*(255-h)/255},"soft-light":function(){var t=l*f/255;v=t+f*(255-(255-f)*(255-l)/255-t)/255,t=c*p/255,_=t+p*(255-(255-p)*(255-c)/255-t)/255,t=h*g/255,y=t+g*(255-(255-g)*(255-h)/255-t)/255},"hard-light":function(){v=l<128?2*l*f/255:255-2*(255-l)*(255-f)/255,_=c<128?2*c*p/255:255-2*(255-c)*(255-p)/255,y=h<128?2*h*g/255:255-2*(255-h)*(255-g)/255},"color-dodge":function(){v=255==l?l:S(255,255*f/(255-l)),_=255==c?c:S(255,255*p/(255-c)),y=255==h?h:S(255,255*g/(255-h))},"color-burn":function(){v=0==l?0:k(255-255*(255-f)/l,0),_=0==c?0:k(255-255*(255-p)/c,0),y=0==h?0:k(255-255*(255-g)/h,0)},darken:function(){v=f<l?f:l,_=p<c?p:c,y=g<h?g:h},lighten:function(){v=f>l?f:l,_=p>c?p:c,y=g>h?g:h},difference:function(){v=f-l,v<0&&(v=-v),_=p-c,_<0&&(_=-_),(y=g-h)<0&&(y=-y)},exclusion:function(){v=f+l*(255-f-f)/255,_=p+c*(255-p-p)/255,y=g+h*(255-g-g)/255},hue:function(){u(l,c,h,a(f,p,g)),o(v,_,y,s(f,p,g))},saturation:function(){u(f,p,g,a(l,c,h)),o(v,_,y,s(f,p,g))},luminosity:function(){o(f,p,g,s(l,c,h))},color:function(){o(l,c,h,s(f,p,g))},add:function(){v=S(f+l,255),_=S(p+c,255),y=S(g+h,255)},subtract:function(){v=k(f-l,0),_=k(p-c,0),y=k(g-h,0)},average:function(){v=(f+l)/2,_=(p+c)/2,y=(g+h)/2},negation:function(){v=255-T(255-l-f),_=255-T(255-c-p),y=255-T(255-h-g)}},j=P[t];if(j){for(var A=0,E=x.length;A<E;A+=4){l=C[A],f=x[A],c=C[A+1],p=x[A+1],h=C[A+2],g=x[A+2],d=C[A+3],m=x[A+3],j();var D=d*i/255,M=1-D;x[A]=D*v+M*f,x[A+1]=D*_+M*p,x[A+2]=D*y+M*g,x[A+3]=d*i+M*m}n.putImageData(b,r.x,r.y)}}},SVGStyles=Base.each({fillColor:["fill","color"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"]},function(t,e){var n=Base.capitalize(e);this[e]={type:t[1],property:e,attribute:t[0],get:"get"+n,set:"set"+n}},{}),SVGNamespaces={href:"http://www.w3.org/1999/xlink",xlink:"http://www.w3.org/2000/xmlns"};new function(){function t(t,e){for(var n in e){var i=e[n],r=SVGNamespaces[n];"number"==typeof i&&(i=b.number(i)),r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}return t}function e(e,n){return t(document.createElementNS("http://www.w3.org/2000/svg",e),n)}function n(t,e,n){return t[e]._point.getDistance(t[n]._point)}function r(t,e){var n=t._matrix,i=n.getTranslation(),r={};if(e){n=n.shiftless();var s=n._inverseTransform(i);r.x=s.x,r.y=s.y,i=null}if(n.isIdentity())return r;var o=n.decompose();if(o&&!o.shearing){var a=[],u=o.rotation,l=o.scaling;i&&!i.isZero()&&a.push("translate("+b.point(i)+")"),Numerical.isZero(l.x-1)&&Numerical.isZero(l.y-1)||a.push("scale("+b.point(l)+")"),u&&a.push("rotate("+b.number(u)+")"),r.transform=a.join(" ")}else r.transform="matrix("+n.getValues().join(",")+")";return r}function s(t,e,n,i){var r="rect"===n?e[1]._point.add(e[2]._point).divide(2):"roundrect"===n?e[3]._point.add(e[4]._point).divide(2):"circle"===n||"ellipse"===n?e[1]._point:null,s=r&&r.subtract(i).getAngle()+90;return Numerical.isZero(s||0)?0:s}function o(t,e){function i(t,n){var i=e[t],r=i.getNext(),s=e[n],o=s.getNext();return i._handleOut.isZero()&&r._handleIn.isZero()&&s._handleOut.isZero()&&o._handleIn.isZero()&&r._point.subtract(i._point).isColinear(o._point.subtract(s._point))}function r(t){var n=e[t],i=n.getNext(),r=n._handleOut,s=i._handleIn,o=Numerical.KAPPA;if(r.isOrthogonal(s)){var a=n._point,u=i._point,l=new Line(a,r).intersect(new Line(u,s));return l&&Numerical.isZero(r.getLength()/l.subtract(a).getLength()-o)&&Numerical.isZero(s.getLength()/l.subtract(u).getLength()-o)}}if(t.isPolygon())return 4===e.length&&t._closed&&i(0,2)&&i(1,3)?"rect":0===e.length?"empty":e.length>=3?t._closed?"polygon":"polyline":"line";if(t._closed){if(8===e.length&&r(0)&&r(2)&&r(4)&&r(6)&&i(1,5)&&i(3,7))return"roundrect";if(4===e.length&&r(0)&&r(1)&&r(2)&&r(3))return Numerical.isZero(n(e,0,2)-n(e,1,3))?"circle":"ellipse"}return"path"}function a(t){var n=r(t),i=t._children;n.fill="none";for(var s=e("g",n),o=0,a=i.length;o<a;o++){var u=y(i[o]);u&&s.appendChild(u)}return s}function u(t){var n=r(t,!0),i=t.getSize();return n.x-=i.width/2,n.y-=i.height/2,n.width=i.width,n.height=i.height,n.href=t.toDataURL(),e("image",n)}function c(t){var n=r(t,!0),i=t._style,s=i.getFont(),o=i.getFontSize();s&&(n["font-family"]=s),o&&(n["font-size"]=o);var a=e("text",n);return a.textContent=t._content,a}function h(t){var r,a=t._segments,u=t.getPosition(!0),c=o(t,a),h=s(t,a,c,u);switch(c){case"empty":return null;case"path":var d=t.getPathData();r=d&&{d:d};break;case"polyline":case"polygon":var f=[];for(i=0,l=a.length;i<l;i++)f.push(b.point(a[i]._point));r={points:f.join(" ")};break;case"rect":var p=n(a,0,3),g=n(a,0,1),m=a[1]._point.rotate(-h,u);r={x:m.x,y:m.y,width:p,height:g};break;case"roundrect":c="rect";var p=n(a,1,6),g=n(a,0,3),v=(p-n(a,0,7))/2,_=(g-n(a,1,2))/2,y=a[3]._point,w=a[4]._point,m=y.subtract(w.subtract(y).normalize(v)).rotate(-h,u);r={x:m.x,y:m.y,width:p,height:g,rx:v,ry:_};break;case"line":var x=a[0]._point,C=a[a.length-1]._point;r={x1:x._x,y1:x._y,x2:C._x,y2:C._y};break;case"circle":var S=n(a,0,2)/2;r={cx:u.x,cy:u.y,r:S};break;case"ellipse":var v=n(a,2,0)/2,_=n(a,3,1)/2;r={cx:u.x,cy:u.y,rx:v,ry:_}}return h&&(r.transform="rotate("+b.number(h)+","+b.point(u)+")",t._gradientMatrix=(new Matrix).rotate(-h,u)),e(c,r)}function d(t){var n=r(t,!0),i=t.getPathData();return i&&(n.d=i),e("path",n)}function f(t){var n=r(t,!0),i=t.getSymbol(),s=m(i);return definition=i.getDefinition(),bounds=definition.getBounds(),s||(s=e("symbol",{viewBox:b.rectangle(bounds)}),s.appendChild(y(definition)),v(i,s)),n.href="#"+s.id,n.x+=bounds.x,n.y+=bounds.y,n.width=b.number(bounds.width),n.height=b.number(bounds.height),e("use",n)}function p(t,n){var i=m(t);if(!i){var r,s=t.getGradient(),o=s._radial,a=n._gradientMatrix,u=t.getOrigin().transform(a),l=t.getDestination().transform(a);if(o){r={cx:u.x,cy:u.y,r:u.getDistance(l)};var c=t.getHighlight();c&&(c=c.transform(a),r.fx=c.x,r.fy=c.y)}else r={x1:u.x,y1:u.y,x2:l.x,y2:l.y};r.gradientUnits="userSpaceOnUse",i=e((o?"radial":"linear")+"Gradient",r);for(var h=s._stops,d=0,f=h.length;d<f;d++){var p=h[d],g=p._color,_=g.getAlpha();r={offset:p._rampPoint,"stop-color":g.toCss(!0)},_<1&&(r["stop-opacity"]=_),i.appendChild(e("stop",r))}v(t,i)}return"url(#"+i.id+")"}function g(e,n){var i={},r=e._style,s=e.getParent(),o=s&&s._style;return null!=e._name&&(i.id=e._name),Base.each(SVGStyles,function(t){var n=r[t.get]();if(!o||!Base.equals(o[t.get](),n)){if("color"===t.type&&null!=n){var s=n.getAlpha();s<1&&(i[t.attribute+"-opacity"]=s)}i[t.attribute]=null==n?"none":"color"===t.type?n.gradient?p(n,e):n.toCss(!0):"array"===t.type?n.join(","):"number"===t.type?b.number(n):n}}),null!=e._opacity&&e._opacity<1&&(i.opacity=e._opacity),null==e._visibility||e._visibility||(i.visibility="hidden"),delete e._gradientMatrix,t(n,i)}function m(t){return w||(w={ids:{},svgs:{}}),w.svgs[t._id]}function v(t,e){var n=t._type,i=w.ids[n]=(w.ids[n]||0)+1;e.id=n+"-"+i,w.svgs[t._id]=e}function _(t){if(!w)return t;var n="svg"===t.nodeName.toLowerCase()&&t,i=n?n.firstChild:t;for(var r in w.svgs)n||(n=e("svg"),n.appendChild(t)),n.insertBefore(w.svgs[r],i);return w=null,n}function y(t){var e=x[t._type],n=e&&e(t,t._type);return n&&t._data&&n.setAttribute("data-paper-data",JSON.stringify(t._data)),n&&g(t,n)}var w,b=Formatter.instance,x={group:a,layer:a,raster:u,path:h,"point-text":c,"placed-symbol":f,"compound-path":d};Item.inject({exportSVG:function(){return _(y(this))}}),Project.inject({exportSVG:function(){for(var n=e("svg"),i=this.layers,r=this.view.getSize(),s=0,o=i.length;s<o;s++)n.appendChild(y(i[s]));return t(_(n),{x:0,y:0,width:r.width,height:r.height,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"})}})},new function(){function t(t,e,n,i){var r=SVGNamespaces[e],s=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"==s&&(s=null),null==s?i?null:n?"":0:n?s:parseFloat(s)}function e(e,n,i,r){return n=t(e,n,!1,r),i=t(e,i,!1,r),r&&null==n&&null==i?null:Point.create(n||0,i||0)}function n(e,n,i,r){return n=t(e,n,!1,r),i=t(e,i,!1,r),r&&null==n&&null==i?null:Size.create(n||0,i||0)}function i(t,e){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e&&d(t)||t}function r(t,e){var n=t.childNodes,i="clippath"===e,r=i?new CompoundPath:new Group,s=r._project,o=s._currentStyle;r.setFillColor("black"),i||(r=h(r,t),s._currentStyle=r._style.clone());for(var a=0,u=n.length;a<u;a++){var l,c=n[a];1==c.nodeType&&(l=f(c))&&(i&&"compound-path"===l._type?(r.addChildren(l.removeChildren()),l.remove()):l instanceof Symbol||r.addChild(l))}return i&&(r=h(r.reduce(),t)),s._currentStyle=o,(i||"defs"===e)&&(r.remove(),r=null),r}function s(t,e){var n=new Path,i=t.points;n.moveTo(i.getItem(0));for(var r=1,s=i.numberOfItems;r<s;r++)n.lineTo(i.getItem(r));return"polygon"===e&&n.closePath(),n}function o(t){var e=t.getAttribute("d"),n=e.match(/m/gi).length>1?new CompoundPath:new Path;return n.setPathData(e),n}function a(n,i){for(var r=n.childNodes,s=[],o=0,a=r.length;o<a;o++){var u=r[o];1==u.nodeType&&s.push(h(new GradientStop,u))}var l,c,d,f="radialgradient"===i,p=new Gradient(s,f);return f?(l=e(n,"cx","cy"),c=l.add(t(n,"r"),0),d=e(n,"fx","fy",!0)):(l=e(n,"x1","y1"),c=e(n,"x2","y2")),h(new Color(p,l,c,d),n),null}function u(t,e,n,i){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new Matrix,o=0,a=r.length;o<a;o++){var u=r[o];if(!u)break;for(var l=u.split("("),c=l[0],h=l[1].split(/[\s,]+/g),d=0,f=h.length;d<f;d++)h[d]=parseFloat(h[d]);switch(c){case"matrix":s.concatenate(new Matrix(h[0],h[2],h[1],h[3],h[4],h[5]));break;case"rotate":s.rotate(h[0],h[1],h[2]);break;case"translate":s.translate(h[0],h[1]);break;case"scale":s.scale(h);break;case"skewX":case"skewY":var e=Math.tan(h[0]*Math.PI/180),p="skewX"==c;s.shear(p?e:0,p?0:e)}}t.transform(s)}function l(t,e,n){var i=t._style["fill-opacity"===n?"getFillColor":"getStrokeColor"]();i&&i.setAlpha(parseFloat(e))}function c(t,e,n){var i=t.attributes[e],r=i&&i.value;if(!r){var s=Base.camelize(e);r=t.style[s],r||n.node[s]===n.parent[s]||(r=n.node[s])}return r?"none"===r?null:r:void 0}function h(t,e){var n={node:DomElement.getStyles(e)||{},parent:DomElement.getStyles(e.parentNode)||{}};return Base.each(g,function(i,r){var s=c(e,r,n);void 0!==s&&(t=Base.pick(i(t,s,r,e,n),t))}),t}function d(t){var e=t&&t.match(/\((?:#|)([^)']+)/);return e&&m[e[1]]}function f(t,e){"string"==typeof t&&(t=(new DOMParser).parseFromString(t,"image/svg+xml"));var n=t.nodeName.toLowerCase(),i=p[n],r=i&&i(t,n),s=t.getAttribute("data-paper-data");return r&&"group"!==r._type&&(r=h(r,t)),r&&s&&(r._data=JSON.parse(s)),e&&(m={}),r}var p={g:r,svg:r,clippath:r,polygon:s,polyline:s,path:o,lineargradient:a,radialgradient:a,image:function(i){var r=new Raster(t(i,"href",!0));return r.attach("load",function(){var t=n(i,"width","height");this.setSize(t),this.translate(e(i,"x","y").add(t.divide(2)))}),r},symbol:function(t,e){return new Symbol(r(t,e),!0)},defs:r,use:function(n,i){var r=(t(n,"href",!0)||"").substring(1),s=m[r],o=e(n,"x","y");return s?s instanceof Symbol?s.place(o):s.clone().translate(o):null},circle:function(n){return new Path.Circle(e(n,"cx","cy"),t(n,"r"))},ellipse:function(t){var i=e(t,"cx","cy"),r=n(t,"rx","ry");return new Path.Ellipse(new Rectangle(i.subtract(r),i.add(r)))},rect:function(t){var i=e(t,"x","y"),r=n(t,"width","height"),s=n(t,"rx","ry");return new Path.Rectangle(new Rectangle(i,r),s)},line:function(t){return new Path.Line(e(t,"x1","y1"),e(t,"x2","y2"))},text:function(t){var n=new PointText(e(t,"x","y",!1).add(e(t,"dx","dy",!1)));return n.setContent(t.textContent.trim()||""),n}},g=Base.merge(Base.each(SVGStyles,function(t){this[t.attribute]=function(e,n,r,s){e._style[t.set](i(n,t.type))}},{}),{id:function(t,e){m[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=d(e);if(n)return n=n.clone(),n.setClipMask(!0),new Group(n,t)},gradientTransform:u,transform:u,opacity:function(t,e){t.setOpacity(parseFloat(e))},"fill-opacity":l,"stroke-opacity":l,"font-family":function(t,e){t.setFont(e.split(",")[0].replace(/^\s+|\s+$/g,""))},"font-size":function(t,e){t.setFontSize(parseFloat(e))},"text-anchor":function(t,e){t.setJustification({start:"left",middle:"center",end:"right"}[e])},visibility:function(t,e){t.setVisible("visible"===e)},"stop-color":function(t,e){t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var n=e.match(/(.*)%$/);t.setRampPoint(n?n[1]/100:parseFloat(e))},viewBox:function(t,e,r,s,o){var a=Rectangle.create.apply(this,i(e,"array")),u=n(s,"width","height",!0);if(t instanceof Group){var l=u?a.getSize().divide(u):1,h=(new Matrix).translate(a.getPoint()).scale(l);t.transform(h.inverted())}else if(t instanceof Symbol){u&&a.setSize(u);var d="visible"!=c(s,"overflow",o),f=t._definition;d&&!a.contains(f.getBounds())&&(d=new Path.Rectangle(a).transform(f._matrix),d.setClipMask(!0),f.addChild(d))}}}),m={};Item.inject({importSVG:function(t){return this.addChild(f(t,!0))}}),Project.inject({importSVG:function(t){return this.activate(),f(t,!0)}})},function(t){
"object"==typeof exports&&"object"==typeof module?t(exports):"function"==typeof define&&define.amd?define("paper",["exports"],t):t(this.acorn||(this.acorn={}))}(function(t){"use strict";function e(t){ht=t||{};for(var e in gt)ht.hasOwnProperty(e)||(ht[e]=gt[e]);pt=ht.sourceFile||null}function n(t,e){var n=mt(dt,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=vt,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;t.length>e;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;t.length>r;++r){for(var s=0;i.length>s;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){";for(var r=0;i.length>r;++r){var o=i[r];n+="case "+o[0].length+":",e(o)}n+="}"}else e(t);return Function("str",n)}function r(){this.line=kt,this.column=vt-Tt}function s(){kt=1,vt=Tt=0,St=!0,l()}function o(t,e){yt=vt,ht.locations&&(bt=new r),xt=t,l(),Ct=e,St=t.beforeExpr}function a(){var t=ht.onComment&&ht.locations&&new r,e=vt,i=dt.indexOf("*/",vt+=2);if(-1===i&&n(vt-2,"Unterminated comment"),vt=i+2,ht.locations){Qe.lastIndex=e;for(var s;(s=Qe.exec(dt))&&vt>s.index;)++kt,Tt=s.index+s[0].length}ht.onComment&&ht.onComment(!0,dt.slice(e+2,i),e,vt,t,ht.locations&&new r)}function u(){for(var t=vt,e=ht.onComment&&ht.locations&&new r,n=dt.charCodeAt(vt+=2);ft>vt&&10!==n&&13!==n&&8232!==n&&8329!==n;)++vt,n=dt.charCodeAt(vt);ht.onComment&&ht.onComment(!1,dt.slice(t+2,vt),t,vt,e,ht.locations&&new r)}function l(){for(;ft>vt;){var t=dt.charCodeAt(vt);if(32===t)++vt;else if(13===t){++vt;var e=dt.charCodeAt(vt);10===e&&++vt,ht.locations&&(++kt,Tt=vt)}else if(10===t)++vt,++kt,Tt=vt;else if(14>t&&t>8)++vt;else if(47===t){var e=dt.charCodeAt(vt+1);if(42===e)a();else{if(47!==e)break;u()}}else if(14>t&&t>8||32===t||160===t)++vt;else{if(!(t>=5760&&Ge.test(String.fromCharCode(t))))break;++vt}}}function c(){var t=dt.charCodeAt(vt+1);return t>=48&&57>=t?S(!0):(++vt,o(ye))}function h(){var t=dt.charCodeAt(vt+1);return St?(++vt,b()):61===t?w(Ce,2):w(be,1)}function d(){return 61===dt.charCodeAt(vt+1)?w(Ce,2):w(Be,1)}function f(t){var e=dt.charCodeAt(vt+1);return e===t?w(124===t?Pe:je,2):61===e?w(Ce,2):w(124===t?Ae:De,1)}function p(){return 61===dt.charCodeAt(vt+1)?w(Ce,2):w(Ee,1)}function g(t){var e=dt.charCodeAt(vt+1);return e===t?w(ke,2):61===e?w(Ce,2):w(Se,1)}function m(t){var e=dt.charCodeAt(vt+1),n=1;return e===t?(n=62===t&&62===dt.charCodeAt(vt+2)?3:2,61===dt.charCodeAt(vt+n)?w(Ce,n+1):w(Ne,n)):(61===e&&(n=61===dt.charCodeAt(vt+2)?3:2),w(Ie,n))}function v(t){return 61===dt.charCodeAt(vt+1)?w(Me,61===dt.charCodeAt(vt+2)?3:2):w(61===t?xe:Te,1)}function _(t){switch(t){case 46:return c();case 40:return++vt,o(pe);case 41:return++vt,o(ge);case 59:return++vt,o(ve);case 44:return++vt,o(me);case 91:return++vt,o(ce);case 93:return++vt,o(he);case 123:return++vt,o(de);case 125:return++vt,o(fe);case 58:return++vt,o(_e);case 63:return++vt,o(we);case 48:var e=dt.charCodeAt(vt+1);if(120===e||88===e)return C();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return S(!1);case 34:case 39:return k(t);case 47:return h(t);case 37:case 42:return d();case 124:case 38:return f(t);case 94:return p();case 43:case 45:return g(t);case 60:case 62:return m(t);case 61:case 33:return v(t);case 126:return w(Te,1)}return!1}function y(t){if(t?vt=_t+1:_t=vt,ht.locations&&(wt=new r),t)return b();if(vt>=ft)return o(Ot);var e=dt.charCodeAt(vt);if(Xe(e)||92===e)return j();var i=_(e);if(!1===i){var s=String.fromCharCode(e);if("\\"===s||Ve.test(s))return j();n(vt,"Unexpected character '"+s+"'")}return i}function w(t,e){var n=dt.slice(vt,vt+e);vt+=e,o(t,n)}function b(){for(var t,e,i="",r=vt;;){vt>=ft&&n(r,"Unterminated regular expression");var s=dt.charAt(vt);if(Ue.test(s)&&n(r,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++vt}var i=dt.slice(r,vt);++vt;var a=P();return a&&!/^[gmsiy]*$/.test(a)&&n(r,"Invalid regexp flag"),o(Nt,RegExp(i,a))}function x(t,e){for(var n=vt,i=0,r=0,s=null==e?1/0:e;s>r;++r){var o,a=dt.charCodeAt(vt);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&57>=a?a-48:1/0)>=t)break;++vt,i=i*t+o}return vt===n||null!=e&&vt-n!==e?null:i}function C(){vt+=2;var t=x(16);return null==t&&n(_t+2,"Expected hexadecimal number"),Xe(dt.charCodeAt(vt))&&n(vt,"Identifier directly after number"),o(It,t)}function S(t){var e=vt,i=!1,r=48===dt.charCodeAt(vt);t||null!==x(10)||n(e,"Invalid number"),46===dt.charCodeAt(vt)&&(++vt,x(10),i=!0);var s=dt.charCodeAt(vt);(69===s||101===s)&&(s=dt.charCodeAt(++vt),(43===s||45===s)&&++vt,null===x(10)&&n(e,"Invalid number"),i=!0),Xe(dt.charCodeAt(vt))&&n(vt,"Identifier directly after number");var a,u=dt.slice(e,vt);return i?a=parseFloat(u):r&&1!==u.length?/[89]/.test(u)||Mt?n(e,"Invalid number"):a=parseInt(u,8):a=parseInt(u,10),o(It,a)}function k(t){vt++;for(var e="";;){vt>=ft&&n(_t,"Unterminated string constant");var i=dt.charCodeAt(vt);if(i===t)return++vt,o(Bt,e);if(92===i){i=dt.charCodeAt(++vt);var r=/^[0-7]+/.exec(dt.slice(vt,vt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,r.length-1);if("0"===r&&(r=null),++vt,r)Mt&&n(vt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),vt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(T(2));break;case 117:e+=String.fromCharCode(T(4));break;case 85:e+=String.fromCharCode(T(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===dt.charCodeAt(vt)&&++vt;case 10:ht.locations&&(Tt=vt,++kt);break;default:e+=String.fromCharCode(i)}}else(13===i||10===i||8232===i||8329===i)&&n(_t,"Unterminated string constant"),e+=String.fromCharCode(i),++vt}}function T(t){var e=x(16,t);return null===e&&n(_t,"Bad character escape sequence"),e}function P(){Oe=!1;for(var t,e=!0,i=vt;;){var r=dt.charCodeAt(vt);if(Ye(r))Oe&&(t+=dt.charAt(vt)),++vt;else{if(92!==r)break;Oe||(t=dt.slice(i,vt)),Oe=!0,117!=dt.charCodeAt(++vt)&&n(vt,"Expecting Unicode escape sequence \\uXXXX"),++vt;var s=T(4),o=String.fromCharCode(s);o||n(vt-1,"Invalid Unicode escape"),(e?Xe(s):Ye(s))||n(vt-4,"Invalid Unicode escape"),t+=o}e=!1}return Oe?t:dt.slice(i,vt)}function j(){var t=P(),e=Lt;return Oe||(He(t)?e=le[t]:(ht.forbidReserved&&(3===ht.ecmaVersion?ze:Fe)(t)||Mt&&Re(t))&&n(_t,"The keyword '"+t+"' is reserved")),o(e,t)}function A(){Pt=_t,jt=yt,At=bt,y()}function E(t){for(Mt=t,vt=jt;Tt>vt;)Tt=dt.lastIndexOf("\n",Tt-2)+1,--kt;l(),y()}function D(){this.type=null,this.start=_t,this.end=null}function M(){this.start=wt,this.end=null,null!==pt&&(this.source=pt)}function I(){var t=new D;return ht.locations&&(t.loc=new M),ht.ranges&&(t.range=[_t,0]),t}function N(t){var e=new D;return e.start=t.start,ht.locations&&(e.loc=new M,e.loc.start=t.loc.start),ht.ranges&&(e.range=[t.range[0],0]),e}function B(t,e){return t.type=e,t.end=jt,ht.locations&&(t.loc.end=At),ht.ranges&&(t.range[1]=jt),t}function L(t){return ht.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function O(t){return xt===t?(A(),!0):void 0}function z(){return!ht.strictSemicolons&&(xt===Ot||xt===fe||Ue.test(dt.slice(jt,_t)))}function F(){O(ve)||z()||q()}function R(t){xt===t?A():q()}function q(){n(_t,"Unexpected token")}function H(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),Mt&&"Identifier"===t.type&&qe(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function G(t){Pt=jt=vt,ht.locations&&(At=new r),Et=Mt=null,Dt=[],y();var e=t||I(),n=!0;for(t||(e.body=[]);xt!==Ot;){var i=$();e.body.push(i),n&&L(i)&&E(!0),n=!1}return B(e,"Program")}function $(){xt===be&&y(!0);var t=xt,e=I();switch(t){case zt:case qt:A();var i=t===zt;O(ve)||z()?e.label=null:xt!==Lt?q():(e.label=ct(),F());for(var r=0;Dt.length>r;++r){var s=Dt[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===Dt.length&&n(e.start,"Unsyntactic "+t.keyword),B(e,i?"BreakStatement":"ContinueStatement");case Ht:return A(),F(),B(e,"DebuggerStatement");case $t:return A(),Dt.push(Je),e.body=$(),Dt.pop(),R(ee),e.test=V(),F(),B(e,"DoWhileStatement");case Ut:if(A(),Dt.push(Je),R(pe),xt===ve)return U(e,null);if(xt===te){var o=I();return A(),X(o,!0),1===o.declarations.length&&O(ue)?Q(e,o):U(e,o)}var o=Y(!1,!0);return O(ue)?(H(o),Q(e,o)):U(e,o);case Qt:return A(),ut(e,!0);case Xt:return A(),e.test=V(),e.consequent=$(),e.alternate=O(Vt)?$():null,B(e,"IfStatement");case Yt:return Et||n(_t,"'return' outside of function"),A(),O(ve)||z()?e.argument=null:(e.argument=Y(),F()),B(e,"ReturnStatement");case Jt:A(),e.discriminant=V(),e.cases=[],R(de),Dt.push(Ze);for(var a,u;xt!=fe;)if(xt===Ft||xt===Gt){var l=xt===Ft;a&&B(a,"SwitchCase"),e.cases.push(a=I()),a.consequent=[],A(),l?a.test=Y():(u&&n(Pt,"Multiple default clauses"),u=!0,a.test=null),R(_e)}else a||q(),a.consequent.push($());return a&&B(a,"SwitchCase"),A(),Dt.pop(),B(e,"SwitchStatement");case Zt:return A(),Ue.test(dt.slice(jt,_t))&&n(jt,"Illegal newline after throw"),e.argument=Y(),F(),B(e,"ThrowStatement");case Kt:if(A(),e.block=W(),e.handler=null,xt===Rt){var c=I();A(),R(pe),c.param=ct(),Mt&&qe(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),R(ge),c.guard=null,c.body=W(),e.handler=B(c,"CatchClause")}return e.finalizer=O(Wt)?W():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),B(e,"TryStatement");case te:return A(),e=X(e),F(),e;case ee:return A(),e.test=V(),Dt.push(Je),e.body=$(),Dt.pop(),B(e,"WhileStatement");case ne:return Mt&&n(_t,"'with' in strict mode"),A(),e.object=V(),e.body=$(),B(e,"WithStatement");case de:return W();case ve:return A(),B(e,"EmptyStatement");default:var h=Ct,d=Y();if(t===Lt&&"Identifier"===d.type&&O(_e)){for(var r=0;Dt.length>r;++r)Dt[r].name===h&&n(d.start,"Label '"+h+"' is already declared");var f=xt.isLoop?"loop":xt===Jt?"switch":null;return Dt.push({name:h,kind:f}),e.body=$(),Dt.pop(),e.label=d,B(e,"LabeledStatement")}return e.expression=d,F(),B(e,"ExpressionStatement")}}function V(){R(pe);var t=Y();return R(ge),t}function W(){var t,e=I(),n=!0,i=!1;for(e.body=[],R(de);!O(fe);){var r=$();e.body.push(r),n&&L(r)&&(t=i,E(i=!0)),n=!1}return i&&!t&&E(!1),B(e,"BlockStatement")}function U(t,e){return t.init=e,R(ve),t.test=xt===ve?null:Y(),R(ve),t.update=xt===ge?null:Y(),R(ge),t.body=$(),Dt.pop(),B(t,"ForStatement")}function Q(t,e){return t.left=e,t.right=Y(),R(ge),t.body=$(),Dt.pop(),B(t,"ForInStatement")}function X(t,e){for(t.declarations=[],t.kind="var";;){var i=I();if(i.id=ct(),Mt&&qe(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=O(xe)?Y(!0,e):null,t.declarations.push(B(i,"VariableDeclarator")),!O(me))break}return B(t,"VariableDeclaration")}function Y(t,e){var n=J(e);if(!t&&xt===me){var i=N(n);for(i.expressions=[n];O(me);)i.expressions.push(J(e));return B(i,"SequenceExpression")}return n}function J(t){var e=Z(t);if(xt.isAssign){var n=N(e);return n.operator=Ct,n.left=e,A(),n.right=J(t),H(e),B(n,"AssignmentExpression")}return e}function Z(t){var e=K(t);if(O(we)){var n=N(e);return n.test=e,n.consequent=Y(!0),R(_e),n.alternate=Y(!0,t),B(n,"ConditionalExpression")}return e}function K(t){return tt(et(t),-1,t)}function tt(t,e,n){var i=xt.binop;if(null!=i&&(!n||xt!==ue)&&i>e){var r=N(t);r.left=t,r.operator=Ct,A(),r.right=tt(et(n),i,n);var r=B(r,/&&|\|\|/.test(r.operator)?"LogicalExpression":"BinaryExpression");return tt(r,e,n)}return t}function et(t){if(xt.prefix){var e=I(),i=xt.isUpdate;return e.operator=Ct,e.prefix=!0,A(),e.argument=et(t),i?H(e.argument):Mt&&"delete"===e.operator&&"Identifier"===e.argument.type&&n(e.start,"Deleting local variable in strict mode"),B(e,i?"UpdateExpression":"UnaryExpression")}for(var r=nt();xt.postfix&&!z();){var e=N(r);e.operator=Ct,e.prefix=!1,e.argument=r,H(r),A(),r=B(e,"UpdateExpression")}return r}function nt(){return it(rt())}function it(t,e){if(O(ye)){var n=N(t);return n.object=t,n.property=ct(!0),n.computed=!1,it(B(n,"MemberExpression"),e)}if(O(ce)){var n=N(t);return n.object=t,n.property=Y(),n.computed=!0,R(he),it(B(n,"MemberExpression"),e)}if(!e&&O(pe)){var n=N(t);return n.callee=t,n.arguments=lt(ge,!1),it(B(n,"CallExpression"),e)}return t}function rt(){switch(xt){case re:var t=I();return A(),B(t,"ThisExpression");case Lt:return ct();case It:case Bt:case Nt:var t=I();return t.value=Ct,t.raw=dt.slice(_t,yt),A(),B(t,"Literal");case se:case oe:case ae:var t=I();return t.value=xt.atomValue,t.raw=xt.keyword,A(),B(t,"Literal");case pe:var e=wt,n=_t;A();var i=Y();return i.start=n,i.end=yt,ht.locations&&(i.loc.start=e,i.loc.end=bt),ht.ranges&&(i.range=[n,yt]),R(ge),i;case ce:var t=I();return A(),t.elements=lt(he,!0,!0),B(t,"ArrayExpression");case de:return ot();case Qt:var t=I();return A(),ut(t,!1);case ie:return st();default:q()}}function st(){var t=I();return A(),t.callee=it(rt(),!0),t.arguments=O(pe)?lt(ge,!1):[],B(t,"NewExpression")}function ot(){var t=I(),e=!0,i=!1;for(t.properties=[],A();!O(fe);){if(e)e=!1;else if(R(me),ht.allowTrailingCommas&&O(fe))break;var r,s={key:at()},o=!1;if(O(_e)?(s.value=Y(!0),r=s.kind="init"):ht.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(o=i=!0,r=s.kind=s.key.name,s.key=at(),xt!==pe&&q(),s.value=ut(I(),!1)):q(),"Identifier"===s.key.type&&(Mt||i))for(var a=0;t.properties.length>a;++a){var u=t.properties[a];if(u.key.name===s.key.name){var l=r==u.kind||o&&"init"===u.kind||"init"===r&&("get"===u.kind||"set"===u.kind);l&&!Mt&&"init"===r&&"init"===u.kind&&(l=!1),l&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return B(t,"ObjectExpression")}function at(){return xt===It||xt===Bt?rt():ct(!0)}function ut(t,e){xt===Lt?t.id=ct():e?q():t.id=null,t.params=[];var i=!0;for(R(pe);!O(ge);)i?i=!1:R(me),t.params.push(ct());var r=Et,s=Dt;if(Et=!0,Dt=[],t.body=W(!0),Et=r,Dt=s,Mt||t.body.body.length&&L(t.body.body[0]))for(var o=t.id?-1:0;t.params.length>o;++o){var a=0>o?t.id:t.params[o];if((Re(a.name)||qe(a.name))&&n(a.start,"Defining '"+a.name+"' in strict mode"),o>=0)for(var u=0;o>u;++u)a.name===t.params[u].name&&n(a.start,"Argument name clash in strict mode")}return B(t,e?"FunctionDeclaration":"FunctionExpression")}function lt(t,e,n){for(var i=[],r=!0;!O(t);){if(r)r=!1;else if(R(me),e&&ht.allowTrailingCommas&&O(t))break;n&&xt===me?i.push(null):i.push(Y(!0))}return i}function ct(t){var e=I();return e.name=xt===Lt?Ct:t&&!ht.forbidReserved&&xt.keyword||q(),A(),B(e,"Identifier")}t.version="0.2.01";var ht,dt,ft,pt;t.parse=function(t,n){return dt=t+"",ft=dt.length,e(n),s(),G(ht.program)};var gt=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null},mt=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Qe.lastIndex=i;var r=Qe.exec(t);if(!(r&&e>r.index))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return y(t),r.start=_t,r.end=yt,r.startLoc=wt,r.endLoc=bt,r.type=xt,r.value=Ct,r}dt=t+"",ft=dt.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(vt=t,ht.locations){kt=Tt=Qe.lastIndex=0;for(var n;(n=Qe.exec(dt))&&t>n.index;)++kt,Tt=n.index+n[0].length}dt.charAt(t-1),St=e,l()},i};var vt,_t,yt,wt,bt,xt,Ct,St,kt,Tt,Pt,jt,At,Et,Dt,Mt,It={type:"num"},Nt={type:"regexp"},Bt={type:"string"},Lt={type:"name"},Ot={type:"eof"},zt={keyword:"break"},Ft={keyword:"case",beforeExpr:!0},Rt={keyword:"catch"},qt={keyword:"continue"},Ht={keyword:"debugger"},Gt={keyword:"default"},$t={keyword:"do",isLoop:!0},Vt={keyword:"else",beforeExpr:!0},Wt={keyword:"finally"},Ut={keyword:"for",isLoop:!0},Qt={keyword:"function"},Xt={keyword:"if"},Yt={keyword:"return",beforeExpr:!0},Jt={keyword:"switch"},Zt={keyword:"throw",beforeExpr:!0},Kt={keyword:"try"},te={keyword:"var"},ee={keyword:"while",isLoop:!0},ne={keyword:"with"},ie={keyword:"new",beforeExpr:!0},re={keyword:"this"},se={keyword:"null",atomValue:null},oe={keyword:"true",atomValue:!0},ae={keyword:"false",atomValue:!1},ue={keyword:"in",binop:7,beforeExpr:!0},le={break:zt,case:Ft,catch:Rt,continue:qt,debugger:Ht,default:Gt,do:$t,else:Vt,finally:Wt,for:Ut,function:Qt,if:Xt,return:Yt,switch:Jt,throw:Zt,try:Kt,var:te,while:ee,with:ne,null:se,true:oe,false:ae,new:ie,in:ue,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:re,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},ce={type:"[",beforeExpr:!0},he={type:"]"},de={type:"{",beforeExpr:!0},fe={type:"}"},pe={type:"(",beforeExpr:!0},ge={type:")"},me={type:",",beforeExpr:!0},ve={type:";",beforeExpr:!0},_e={type:":",beforeExpr:!0},ye={type:"."},we={type:"?",beforeExpr:!0},be={binop:10,beforeExpr:!0},xe={isAssign:!0,beforeExpr:!0},Ce={isAssign:!0,beforeExpr:!0},Se={binop:9,prefix:!0,beforeExpr:!0},ke={postfix:!0,prefix:!0,isUpdate:!0},Te={prefix:!0,beforeExpr:!0},Pe={binop:1,beforeExpr:!0},je={binop:2,beforeExpr:!0},Ae={binop:3,beforeExpr:!0},Ee={binop:4,beforeExpr:!0},De={binop:5,beforeExpr:!0},Me={binop:6,beforeExpr:!0},Ie={binop:7,beforeExpr:!0},Ne={binop:8,beforeExpr:!0},Be={binop:10,beforeExpr:!0};t.tokTypes={bracketL:ce,bracketR:he,braceL:de,braceR:fe,parenL:pe,parenR:ge,comma:me,semi:ve,colon:_e,dot:ye,question:we,slash:be,eq:xe,name:Lt,eof:Ot,num:It,regexp:Nt,string:Bt};for(var Le in le)t.tokTypes[Le]=le[Le];var Oe,ze=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Fe=i("class enum extends super const export import"),Re=i("implements interface let package private protected public static yield"),qe=i("eval arguments"),He=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ge=/[\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]/,$e="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Ve=RegExp("["+$e+"]"),We=RegExp("["+$e+"ͱ-ʹ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),Ue=/[\n\r\u2028\u2029]/,Qe=/\r\n|[\n\r\u2028\u2029]/g,Xe=t.isIdentifierStart=function(t){return 65>t?36===t:91>t||(97>t?95===t:123>t||t>=170&&Ve.test(String.fromCharCode(t)))},Ye=t.isIdentifierChar=function(t){return 48>t?36===t:58>t||!(65>t)&&(91>t||(97>t?95===t:123>t||t>=170&&We.test(String.fromCharCode(t))))},Je={kind:"loop"},Ze={kind:"switch"}});var PaperScript=this.PaperScript=new function(){function _$_(t,e,n){var i=binaryOperators[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function $_(t,e){var n=unaryOperators[t];if(n&&e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function compile(t){function e(t){for(var e=0,n=s.length;e<n;e++){var i=s[e];if(i[0]>=t)break;t+=i[1]}return t}function n(n){return t.substring(e(n.range[0]),e(n.range[1]))}function i(n,i){for(var r=e(n.range[0]),o=e(n.range[1]),a=0,u=s.length-1;u>=0;u--)if(r>s[u][0]){a=u+1;break}s.splice(a,0,[r,i.length-o+r]),t=t.substring(0,r)+i+t.substring(o)}function r(t){for(var e in t)if("range"!==e){var s=t[e];if(Array.isArray(s))for(var o=0,a=s.length;o<a;o++)r(s[o]);else s&&"object"==typeof s&&r(s)}switch(t&&t.type){case"BinaryExpression":if(t.operator in binaryOperators&&"Literal"!==t.left.type){var u=n(t.left),l=n(t.right);i(t,"_$_("+u+', "'+t.operator+'", '+l+")")}break;case"AssignmentExpression":if(/^.=$/.test(t.operator)&&"Literal"!==t.left.type){var u=n(t.left),l=n(t.right);i(t,u+" = _$_("+u+', "'+t.operator[0]+'", '+l+")")}break;case"UpdateExpression":if(!t.prefix){var c=n(t.argument);i(t,c+" = _$_("+c+', "'+t.operator[0]+'", 1)')}break;case"UnaryExpression":if(t.operator in unaryOperators&&"Literal"!==t.argument.type){var c=n(t.argument);i(t,'$_("'+t.operator+'", '+c+")")}}}var s=[];return r(acorn.parse(t,{ranges:!0})),t}function evaluate(code,scope){paper=scope;var view=scope.project&&scope.project.view,res;with(scope)(function(){var onActivate,onDeactivate,onEditOptions,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize;res=eval(compile(code)),/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&Base.each(Tool.prototype._events,function(key){var value=eval(key);value&&(scope.getTool()[key]=value)}),view&&(view.setOnResize(onResize),view.fire("resize",{size:view.size,delta:new Point}),view.setOnFrame(onFrame),view.draw())}).call(scope);return res}function request(t,e){var n=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return n.open("GET",t,!0),n.overrideMimeType&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){if(4===n.readyState)return evaluate(n.responseText,e)},n.send(null)}function load(){for(var t=document.getElementsByTagName("script"),e=0,n=t.length;e<n;e++){var i=t[e];if(/^text\/(?:x-|)paperscript$/.test(i.type)&&!i.getAttribute("data-paper-ignore")){var r=PaperScript.getAttribute(i,"canvas"),s=PaperScope.get(r)||new PaperScope(i).setup(r);i.src?request(i.src,s):evaluate(i.innerHTML,s),i.setAttribute("data-paper-ignore",!0)}}}function handleAttribute(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}var binaryOperators={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"modulo","==":"equals","!=":"equals"},unaryOperators={"-":"negate","+":null};return"complete"===document.readyState?setTimeout(load):DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load,getAttribute:handleAttribute("get"),hasAttribute:handleAttribute("has")}};return this.enumerable=!0,new(PaperScope.inject(this))};define("image-annotation-wrapper",["jquery-noconflict","paper"],function(t,e){require(["image-annotation"])}),define("countdown-timer",["jquery-noconflict"],function(t){function e(){function e(t){var s=t<1e12?s=performance.now?performance.now()+performance.timing.navigationStart:Date.now():t||(new Date).getTime();s-i>=1e3&&(r._updateTargets(),i=s),n(e)}this.regional=[],this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1},this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},t.extend(this._defaults,this.regional[""]),this._serverSyncs=[];var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,i=0;!n||t.noRequestAnimationFrame?(t.noRequestAnimationFrame=null,setInterval(function(){r._updateTargets()},980)):(i=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||(new Date).getTime(),n(e))}function n(e,n){return"option"==e&&(0==n.length||1==n.length&&"string"==typeof n[0])||t.inArray(e,i)>-1}t.extend(e.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(e){this._resetExtraLabels(this._defaults,e),t.extend(this._defaults,e||{})},UTCDate:function(t,e,n,i,r,s,o,a){"object"==typeof e&&e.constructor==Date&&(a=e.getMilliseconds(),o=e.getSeconds(),s=e.getMinutes(),r=e.getHours(),i=e.getDate(),n=e.getMonth(),e=e.getFullYear());var u=new Date;return u.setUTCFullYear(e),u.setUTCDate(1),u.setUTCMonth(n||0),u.setUTCDate(i||1),u.setUTCHours(r||0),u.setUTCMinutes((s||0)-(Math.abs(t)<30?60*t:t)),u.setUTCSeconds(o||0),u.setUTCMilliseconds(a||0),u},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},_attachPlugin:function(e,n){if(e=t(e),!e.hasClass(this.markerClassName)){var i={options:t.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};e.addClass(this.markerClassName).data(this.propertyName,i),this._optionPlugin(e,n)}},_addTarget:function(t){this._hasTarget(t)||this._timerTargets.push(t)},_hasTarget:function(e){return t.inArray(e,this._timerTargets)>-1},_removeTarget:function(e){this._timerTargets=t.map(this._timerTargets,function(t){return t==e?null:t})},_updateTargets:function(){for(var t=this._timerTargets.length-1;t>=0;t--)this._updateCountdown(this._timerTargets[t])},_optionPlugin:function(e,n,i){e=t(e);var r=e.data(this.propertyName);if(!n||"string"==typeof n&&null==i){var s=n;return n=(r||{}).options,n&&s?n[s]:n}if(e.hasClass(this.markerClassName)){if("string"==typeof(n=n||{})){var s=n;n={},n[s]=i}this._resetExtraLabels(r.options,n),t.extend(r.options,n),this._adjustSettings(e,r);var o=new Date;(r._since&&r._since<o||r._until&&r._until>o)&&this._addTarget(e[0]),this._updateCountdown(e,r)}},_updateCountdown:function(e,n){var i=t(e);if(n=n||i.data(this.propertyName)){if(i.html(this._generateHTML(n)).toggleClass(this._rtlClass,n.options.isRTL),t.isFunction(n.options.onTick)){var r="lap"!=n._hold?n._periods:this._calculatePeriods(n,n._show,n.options.significant,new Date);1!=n.options.tickInterval&&this.periodsToSeconds(r)%n.options.tickInterval!=0||n.options.onTick.apply(e,[r])}if("pause"!=n._hold&&(n._since?n._now.getTime()<n._since.getTime():n._now.getTime()>=n._until.getTime())&&!n._expiring){if(n._expiring=!0,this._hasTarget(e)||n.options.alwaysExpire){if(this._removeTarget(e),t.isFunction(n.options.onExpiry)&&n.options.onExpiry.apply(e,[]),n.options.expiryText){var s=n.options.layout;n.options.layout=n.options.expiryText,this._updateCountdown(e,n),n.options.layout=s}n.options.expiryUrl&&(window.location=n.options.expiryUrl)}n._expiring=!1}else"pause"==n._hold&&this._removeTarget(e);i.data(this.propertyName,n)}},_resetExtraLabels:function(t,e){var n=!1;for(var i in e)if("whichLabels"!=i&&i.match(/[Ll]abels/)){n=!0;break}if(n)for(var i in t)i.match(/[Ll]abels[02-9]/)&&(t[i]=null)},_adjustSettings:function(e,n){for(var i,r=0,s=null,o=0;o<this._serverSyncs.length;o++)if(this._serverSyncs[o][0]==n.options.serverSync){s=this._serverSyncs[o][1];break}if(null!=s)r=n.options.serverSync?s:0,i=new Date;else{var a=t.isFunction(n.options.serverSync)?n.options.serverSync.apply(e,[]):null;i=new Date,r=a?i.getTime()-a.getTime():0,this._serverSyncs.push([n.options.serverSync,r])}var u=n.options.timezone;u=null==u?-i.getTimezoneOffset():u,n._since=n.options.since,null!=n._since&&(n._since=this.UTCDate(u,this._determineTime(n._since,null)),n._since&&r&&n._since.setMilliseconds(n._since.getMilliseconds()+r)),n._until=this.UTCDate(u,this._determineTime(n.options.until,i)),r&&n._until.setMilliseconds(n._until.getMilliseconds()+r),n._show=this._determineShow(n)},_destroyPlugin:function(e){e=t(e),e.hasClass(this.markerClassName)&&(this._removeTarget(e[0]),e.removeClass(this.markerClassName).empty().removeData(this.propertyName))},_pausePlugin:function(t){this._hold(t,"pause")},_lapPlugin:function(t){this._hold(t,"lap")},_resumePlugin:function(t){this._hold(t,null)},_hold:function(e,n){var i=t.data(e,this.propertyName);if(i){if("pause"==i._hold&&!n){i._periods=i._savePeriods;var r=i._since?"-":"+";i[i._since?"_since":"_until"]=this._determineTime(r+i._periods[0]+"y"+r+i._periods[1]+"o"+r+i._periods[2]+"w"+r+i._periods[3]+"d"+r+i._periods[4]+"h"+r+i._periods[5]+"m"+r+i._periods[6]+"s"),this._addTarget(e)}i._hold=n,i._savePeriods="pause"==n?i._periods:null,t.data(e,this.propertyName,i),this._updateCountdown(e,i)}},_getTimesPlugin:function(e){var n=t.data(e,this.propertyName);return n?n._hold?this._calculatePeriods(n,n._show,n.options.significant,new Date):n._periods:null},_determineTime:function(t,e){var n=null==t?e:"string"==typeof t?function(t){t=t.toLowerCase();for(var e=new Date,n=e.getFullYear(),i=e.getMonth(),s=e.getDate(),o=e.getHours(),a=e.getMinutes(),u=e.getSeconds(),l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,c=l.exec(t);c;){switch(c[2]||"s"){case"s":u+=parseInt(c[1],10);break;case"m":a+=parseInt(c[1],10);break;case"h":o+=parseInt(c[1],10);break;case"d":s+=parseInt(c[1],10);break;case"w":s+=7*parseInt(c[1],10);break;case"o":i+=parseInt(c[1],10),s=Math.min(s,r._getDaysInMonth(n,i));break;case"y":n+=parseInt(c[1],10),s=Math.min(s,r._getDaysInMonth(n,i))}c=l.exec(t)}return new Date(n,i,s,o,a,u,0)}(t):"number"==typeof t?function(t){var e=new Date;return e.setTime(e.getTime()+1e3*t),e}(t):t;return n&&n.setMilliseconds(0),n},_getDaysInMonth:function(t,e){return 32-new Date(t,e,32).getDate()},_normalLabels:function(t){return t},_generateHTML:function(e){var n=this;e._periods=e._hold?e._periods:this._calculatePeriods(e,e._show,e.options.significant,new Date);for(var i=!1,s=0,o=e.options.significant,a=t.extend({},e._show),u=0;u<=6;u++)i|="?"==e._show[u]&&e._periods[u]>0,a[u]="?"!=e._show[u]||i?e._show[u]:null,s+=a[u]?1:0,o-=e._periods[u]>0?1:0;for(var l=[!1,!1,!1,!1,!1,!1,!1],u=6;u>=0;u--)e._show[u]&&(e._periods[u]?l[u]=!0:(l[u]=o>0,o--));var c=e.options.compact?e.options.compactLabels:e.options.labels,h=e.options.whichLabels||this._normalLabels,d=function(t){var i=e.options["compactLabels"+h(e._periods[t])];return a[t]?n._translateDigits(e,e._periods[t])+(i?i[t]:c[t])+" ":""},f=function(t){var i=e.options["labels"+h(e._periods[t])];return!e.options.significant&&a[t]||e.options.significant&&l[t]?'<span class="'+r._sectionClass+'"><span class="'+r._amountClass+'">'+n._translateDigits(e,e._periods[t])+"</span><br/>"+(i?i[t]:c[t])+"</span>":""}
;return e.options.layout?this._buildLayout(e,a,e.options.layout,e.options.compact,e.options.significant,l):(e.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(e._hold?" "+this._holdingClass:"")+'">'+d(0)+d(1)+d(2)+d(3)+(a[4]?this._minDigits(e,e._periods[4],2):"")+(a[5]?(a[4]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[5],2):"")+(a[6]?(a[4]||a[5]?e.options.timeSeparator:"")+this._minDigits(e,e._periods[6],2):""):'<span class="'+this._rowClass+" "+this._showClass+(e.options.significant||s)+(e._hold?" "+this._holdingClass:"")+'">'+f(0)+f(1)+f(2)+f(3)+f(4)+f(5)+f(6))+"</span>"+(e.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+e.options.description+"</span>":"")},_buildLayout:function(e,n,i,r,s,o){for(var a=e.options[r?"compactLabels":"labels"],u=e.options.whichLabels||this._normalLabels,l=function(t){return(e.options[(r?"compactLabels":"labels")+u(e._periods[t])]||a)[t]},c=function(t,n){return e.options.digits[Math.floor(t/n)%10]},h={desc:e.options.description,sep:e.options.timeSeparator,yl:l(0),yn:this._minDigits(e,e._periods[0],1),ynn:this._minDigits(e,e._periods[0],2),ynnn:this._minDigits(e,e._periods[0],3),y1:c(e._periods[0],1),y10:c(e._periods[0],10),y100:c(e._periods[0],100),y1000:c(e._periods[0],1e3),ol:l(1),on:this._minDigits(e,e._periods[1],1),onn:this._minDigits(e,e._periods[1],2),onnn:this._minDigits(e,e._periods[1],3),o1:c(e._periods[1],1),o10:c(e._periods[1],10),o100:c(e._periods[1],100),o1000:c(e._periods[1],1e3),wl:l(2),wn:this._minDigits(e,e._periods[2],1),wnn:this._minDigits(e,e._periods[2],2),wnnn:this._minDigits(e,e._periods[2],3),w1:c(e._periods[2],1),w10:c(e._periods[2],10),w100:c(e._periods[2],100),w1000:c(e._periods[2],1e3),dl:l(3),dn:this._minDigits(e,e._periods[3],1),dnn:this._minDigits(e,e._periods[3],2),dnnn:this._minDigits(e,e._periods[3],3),d1:c(e._periods[3],1),d10:c(e._periods[3],10),d100:c(e._periods[3],100),d1000:c(e._periods[3],1e3),hl:l(4),hn:this._minDigits(e,e._periods[4],1),hnn:this._minDigits(e,e._periods[4],2),hnnn:this._minDigits(e,e._periods[4],3),h1:c(e._periods[4],1),h10:c(e._periods[4],10),h100:c(e._periods[4],100),h1000:c(e._periods[4],1e3),ml:l(5),mn:this._minDigits(e,e._periods[5],1),mnn:this._minDigits(e,e._periods[5],2),mnnn:this._minDigits(e,e._periods[5],3),m1:c(e._periods[5],1),m10:c(e._periods[5],10),m100:c(e._periods[5],100),m1000:c(e._periods[5],1e3),sl:l(6),sn:this._minDigits(e,e._periods[6],1),snn:this._minDigits(e,e._periods[6],2),snnn:this._minDigits(e,e._periods[6],3),s1:c(e._periods[6],1),s10:c(e._periods[6],10),s100:c(e._periods[6],100),s1000:c(e._periods[6],1e3)},d=i,f=0;f<=6;f++){var p="yowdhms".charAt(f),g=new RegExp("\\{"+p+"<\\}(.*)\\{"+p+">\\}","g");d=d.replace(g,!s&&n[f]||s&&o[f]?"$1":"")}return t.each(h,function(t,e){var n=new RegExp("\\{"+t+"\\}","g");d=d.replace(n,e)}),d},_minDigits:function(t,e,n){return e=""+e,e.length>=n?this._translateDigits(t,e):(e="0000000000"+e,this._translateDigits(t,e.substr(e.length-n)))},_translateDigits:function(t,e){return(""+e).replace(/[0-9]/g,function(e){return t.options.digits[e]})},_determineShow:function(t){var e=t.options.format,n=[];return n[0]=e.match("y")?"?":e.match("Y")?"!":null,n[1]=e.match("o")?"?":e.match("O")?"!":null,n[2]=e.match("w")?"?":e.match("W")?"!":null,n[3]=e.match("d")?"?":e.match("D")?"!":null,n[4]=e.match("h")?"?":e.match("H")?"!":null,n[5]=e.match("m")?"?":e.match("M")?"!":null,n[6]=e.match("s")?"?":e.match("S")?"!":null,n},_calculatePeriods:function(t,e,n,i){t._now=i,t._now.setMilliseconds(0);var s=new Date(t._now.getTime());t._since?i.getTime()<t._since.getTime()?t._now=i=s:i=t._since:(s.setTime(t._until.getTime()),i.getTime()>t._until.getTime()&&(t._now=i=s));var o=[0,0,0,0,0,0,0];if(e[0]||e[1]){var a=r._getDaysInMonth(i.getFullYear(),i.getMonth()),u=r._getDaysInMonth(s.getFullYear(),s.getMonth()),l=s.getDate()==i.getDate()||s.getDate()>=Math.min(a,u)&&i.getDate()>=Math.min(a,u),c=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},h=Math.max(0,12*(s.getFullYear()-i.getFullYear())+s.getMonth()-i.getMonth()+(s.getDate()<i.getDate()&&!l||l&&c(s)<c(i)?-1:0));o[0]=e[0]?Math.floor(h/12):0,o[1]=e[1]?h-12*o[0]:0,i=new Date(i.getTime());var d=i.getDate()==a,f=r._getDaysInMonth(i.getFullYear()+o[0],i.getMonth()+o[1]);i.getDate()>f&&i.setDate(f),i.setFullYear(i.getFullYear()+o[0]),i.setMonth(i.getMonth()+o[1]),d&&i.setDate(f)}var p=Math.floor((s.getTime()-i.getTime())/1e3),g=function(t,n){o[t]=e[t]?Math.floor(p/n):0,p-=o[t]*n};if(g(2,604800),g(3,86400),g(4,3600),g(5,60),g(6,1),p>0&&!t._since)for(var m=[1,12,4.3482,7,24,60,60],v=6,_=1,y=6;y>=0;y--)e[y]&&(o[v]>=_&&(o[v]=0,p=1),p>0&&(o[y]++,p=0,v=y,_=1)),_*=m[y];if(n)for(var y=0;y<=6;y++)n&&o[y]?n--:n||(o[y]=0);return o}});var i=["getTimes"];t.fn.countdown=function(t){var e=Array.prototype.slice.call(arguments,1);return n(t,e)?r["_"+t+"Plugin"].apply(r,[this[0]].concat(e)):this.each(function(){if("string"==typeof t){if(!r["_"+t+"Plugin"])throw"Unknown command: "+t;r["_"+t+"Plugin"].apply(r,[this].concat(e))}else r._attachPlugin(this,t||{})})};var r=t.countdown=new e}),define("timer",["jquery-noconflict","countdown-timer"],function(t){var e={};return e.startCountdownAndShowTimerToUser=function(e){t("#remaining-time").countdown({until:+e,format:"MS",compact:!0}),t("#countdown_timer").fadeIn()},e.init=function(t,n){if(e.timeRemainingInSecsForAssignment=n.remainingTimeInSeconds,e.timeRemainingInSecsForAssignment){var i=e.timeRemainingInSecsForAssignment;e.startCountdownAndShowTimerToUser(i)}},e}),define("guiders-amd",["jquery-noconflict"],function(t){return function(t){var e={};e.version="1.3.0",e._defaultSettings={attachTo:null,autoFocus:!1,buttons:[{name:"Close"}],buttonCustomHTML:"",classString:null,closeOnEscape:!1,description:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.",highlight:null,isHashable:!0,offset:{top:null,left:null},onClose:null,onHide:null,onShow:null,overlay:!1,position:0,shouldSkip:function(){},title:"Sample title goes here",width:400,xButton:!1},e._htmlSkeleton=["<div class='guider'>","  <div class='guiders_content'>","    <h1 class='guiders_title'></h1>","    <div class='guiders_close'></div>","    <p class='guiders_description'></p>","    <div class='guiders_buttons_container'>","    </div>","  </div>","  <div class='guiders_arrow'>","  </div>","</div>"].join(""),e._arrowSize=42,e._backButtonTitle="Back",e._buttonAttributes={href:"javascript:void(0);"},e._buttonClassName="btn btn-default pull-right",e._buttonClickEvent="click touch",e._buttonElement="<a></a>",e._closeButtonTitle="Close",e._currentGuiderID=null,e._fixedOrAbsolute="fixed",e._guiders={},e._lastCreatedGuiderID=null,e._nextButtonTitle="Next",e._offsetNameMapping={topLeft:11,top:12,topRight:1,rightTop:2,right:3,rightBottom:4,bottomRight:5,bottom:6,bottomLeft:7,leftBottom:8,left:9,leftTop:10},e._windowHeight=0;var n=navigator.userAgent.match("MSIE (.)");e._isIE=n&&n.length>1,e._ieVersion=n&&n.length>1?Number(n[1]):-1,e._addButtons=function(n){var i=n.elem.find(".guiders_buttons_container");if(null===n.buttons||0===n.buttons.length)return void i.remove();for(var r=n.buttons.length-1;r>=0;r--){var s=n.buttons[r],o=t(e._buttonElement,t.extend({class:e._buttonClassName,html:s.name},e._buttonAttributes,s.html||{}));void 0!==s.classString&&null!==s.classString&&o.addClass(s.classString),i.append(o);var a=s.name.toLowerCase();if(s.onclick)o.bind(e._buttonClickEvent,s.onclick);else switch(a){case e._closeButtonTitle.toLowerCase():o.bind(e._buttonClickEvent,function(){e.hideAll(),n.onClose&&n.onClose(n,!1)});break;case e._nextButtonTitle.toLowerCase():o.bind(e._buttonClickEvent,function(){!n.elem.data("locked")&&e.next()});break;case e._backButtonTitle.toLowerCase():o.bind(e._buttonClickEvent,function(){!n.elem.data("locked")&&e.prev()})}}if(""!==n.buttonCustomHTML){var u=t(n.buttonCustomHTML);n.elem.find(".guiders_buttons_container").append(u)}0===n.buttons.length&&i.remove()},e._addXButton=function(n){var i=n.elem.find(".guiders_close"),r=t("<div></div>",{class:"guiders_x_button",role:"button"});i.append(r),r.click(function(){e.hideAll(),n.onClose&&n.onClose(n,!0)})},e._wireEscape=function(n){t(document).keydown(function(t){if(27==t.keyCode||27==t.which)return e.hideAll(),n.onClose&&n.onClose(n,!0),!1})},e._unWireEscape=function(e){t(document).unbind("keydown")},e._attach=function(n){if("object"==typeof n){var i=t(n.attachTo),r=n.elem.innerHeight(),s=n.elem.innerWidth();if(0===n.position||0===i.length){var o="fixed";return e._isIE&&e._ieVersion<9&&(o="absolute"),n.elem.css("position",o),n.elem.css("top",(t(window).height()-r)/3+"px"),void n.elem.css("left",(t(window).width()-s)/2+"px")}var a=i.offset(),u=a.top,l=a.left;u-=t("body").outerHeight(!0)-t("body").outerHeight(!1),e._offsetNameMapping[n.position]&&(n.position=e._offsetNameMapping[n.position]);var c=i.innerHeight(),h=i.innerWidth(),d=.9*e._arrowSize,f={1:[-d-r,h-s],2:[0,d+h],3:[c/2-r/2,d+h],4:[c-r,d+h],5:[d+c,h-s],6:[d+c,h/2-s/2],7:[d+c,0],8:[c-r,-s-d],9:[c/2-r/2,-s-d],10:[0,-s-d],11:[-d-r,0],12:[-d-r,h/2-s/2]},p=f[n.position];u+=p[0],l+=p[1];var g="absolute";return"fixed"===i.css("position")&&"fixed"===e._fixedOrAbsolute&&(g="fixed",u-=t(window).scrollTop(),l-=t(window).scrollLeft()),null!==n.offset.top&&(u+=n.offset.top),null!==n.offset.left&&(l+=n.offset.left),e._styleArrow(n),n.elem.css({position:g,top:u,left:l}),n}},e._guiderById=function(t){if(void 0===e._guiders[t])throw"Cannot find guider with id "+t;return e._guiders[t]},e._showOverlay=function(){t("#guiders_overlay").fadeIn("fast",function(){this.style.removeAttribute&&this.style.removeAttribute("filter")}),e._isIE&&t("#guiders_overlay").css("position","absolute")},e._highlightElement=function(e){t(e).addClass("guiders_highlight")},e._dehighlightElement=function(e){t(e).removeClass("guiders_highlight")},e._hideOverlay=function(){t("#guiders_overlay").fadeOut("fast")},e._initializeOverlay=function(){0===t("#guiders_overlay").length&&t("<div id='guiders_overlay'></div>").hide().appendTo("body")},e._styleArrow=function(n){var i=n.position||0;if(i){var r=t(n.elem.find(".guiders_arrow")),s={1:"guiders_arrow_down",2:"guiders_arrow_left",3:"guiders_arrow_left",4:"guiders_arrow_left",5:"guiders_arrow_up",6:"guiders_arrow_up",7:"guiders_arrow_up",8:"guiders_arrow_right",9:"guiders_arrow_right",10:"guiders_arrow_right",11:"guiders_arrow_down",12:"guiders_arrow_down"};r.addClass(s[i]);var o=n.elem.innerHeight(),a=n.elem.innerWidth(),u=e._arrowSize/2,l={1:["right",u],2:["top",u],3:["top",o/2-u],4:["bottom",u],5:["right",u],6:["left",a/2-u],7:["left",u],8:["bottom",u],9:["top",o/2-u],10:["top",u],11:["left",u],12:["left",a/2-u]},i=l[n.position];r.css(i[0],i[1]+"px")}},e._showIfHashed=function(t){var n=window.location.hash.indexOf("guider=");if(-1!==n){var i=window.location.hash.substr(n+"guider=".length);t.id.toLowerCase()===i.toLowerCase()&&e.show(t.id)}},e.reposition=function(){var t=e._guiders[e._currentGuiderID];e._attach(t)},e.next=function(){var t=e._guiders[e._currentGuiderID];if(void 0!==t){t.elem.data("locked",!0);var n=t.next||null;if(null!==n&&""!==n){var i=e._guiderById(n),r=!!i.overlay;if(e.hideAll(r,!0),t&&t.highlight&&e._dehighlightElement(t.highlight),i.shouldSkip&&i.shouldSkip())return e._currentGuiderID=i.id,void e.next();e.show(n)}}},e.prev=function(){var t=e._guiders[e._currentGuiderID];if(void 0!==t&&null!==t.prev){var n=e._guiders[t.prev];n.elem.data("locked",!0);var i=n.id||null;if(null!==i&&""!==i){var r=e._guiderById(i),s=!!r.overlay;e.hideAll(s,!0),n&&n.highlight&&e._dehighlightElement(n.highlight),e.show(i)}}},e.createGuider=function(n){null!==n&&void 0!==n||(n={}),myGuider=t.extend({},e._defaultSettings,n),myGuider.id=myGuider.id||String(Math.floor(1e3*Math.random()));var i=t(e._htmlSkeleton);return myGuider.elem=i,void 0!==myGuider.classString&&null!==myGuider.classString&&myGuider.elem.addClass(myGuider.classString),myGuider.elem.css("width",myGuider.width+"px"),i.find(".guiders_title").html(myGuider.title),i.find(".guiders_description").html(myGuider.description),e._addButtons(myGuider),myGuider.xButton&&e._addXButton(myGuider),i.hide(),i.appendTo("body"),i.attr("id",myGuider.id),void 0!==myGuider.attachTo&&null!==myGuider&&e._attach(myGuider),e._initializeOverlay(),e._guiders[myGuider.id]=myGuider,null!=e._lastCreatedGuiderID&&(myGuider.prev=e._lastCreatedGuiderID),e._lastCreatedGuiderID=myGuider.id,myGuider.isHashable&&e._showIfHashed(myGuider),e},e.hideAll=function(n,i){i=i||!1,t(".guider:visible").each(function(n,r){var s=e._guiderById(t(r).attr("id"));s.onHide&&s.onHide(s,i)}),t(".guider").fadeOut("fast");var r=e._guiders[e._currentGuiderID];return r&&r.highlight&&e._dehighlightElement(r.highlight),void 0!==n&&!0===n||e._hideOverlay(),e},e.show=function(n){!n&&e._lastCreatedGuiderID&&(n=e._lastCreatedGuiderID);var i=e._guiderById(n);i.overlay&&(e._showOverlay(),i.highlight&&e._highlightElement(i.highlight)),i.closeOnEscape?e._wireEscape(i):e._unWireEscape(i),i.onShow&&i.onShow(i),e._attach(i),i.elem.fadeIn("fast").data("locked",!1),e._currentGuiderID=n;var r=e._windowHeight=t(window).height(),s=t(window).scrollTop(),o=i.elem.offset(),a=i.elem.height(),u=s+r<o.top+a,l=o.top<s;return i.autoFocus&&(u||l)&&setTimeout(e.scrollToCurrent,10),t(i.elem).trigger("guiders.show"),e},e.scrollToCurrent=function(){var n=e._guiders[e._currentGuiderID];if(void 0!==n){var i=e._windowHeight,r=(t(window).scrollTop(),n.elem.offset()),s=n.elem.height(),o=Math.round(Math.max(r.top+s/2-i/2,0));window.scrollTo(0,o)}};var i=void 0;return t(window).resize(function(){void 0!==i&&clearTimeout(i),i=setTimeout(function(){i=void 0,void 0!==e&&e.reposition()},20)}),e}.call(this,t)}),function(t){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery-noconflict"],t):t("object"==typeof exports?require("jquery-noconflict"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function n(t){return a.raw?t:decodeURIComponent(t)}function i(t){return e(a.json?JSON.stringify(t):String(t))}function r(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(o," ")),a.json?JSON.parse(t):t}catch(t){}}function s(e,n){var i=a.raw?e:r(e);return t.isFunction(n)?n(i):i}var o=/\+/g,a=t.cookie=function(r,o,u){if(void 0!==o&&!t.isFunction(o)){if(u=t.extend({},a.defaults,u),"number"==typeof u.expires){var l=u.expires,c=u.expires=new Date;c.setTime(+c+864e5*l)}return document.cookie=[e(r),"=",i(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}for(var h=r?void 0:{},d=document.cookie?document.cookie.split("; "):[],f=0,p=d.length;f<p;f++){var g=d[f].split("="),m=n(g.shift()),v=g.join("=");if(r&&r===m){h=s(v,o);break}r||void 0===(v=s(v))||(h[m]=v)}return h};a.defaults={},t.removeCookie=function(e,n){return void 0!==t.cookie(e)&&(t.cookie(e,"",t.extend({},n,{expires:-1})),!t.cookie(e))}}),define("welcome-guiders",["./guiders-amd","jquery-noconflict","./jquery.cookie"],function(t,e,n){var i={};return i.init=function(){i.workerMode=e("#guiders").data("workerMode"),i.cookieKey=i.workerMode+"_tour",i.tourText=e("#guiders").data("tourText"),i.guiderPosition=0,i.guiderSequence=[],setTimeout(function(){e("#guiders a").click(function(){self.startTour()})},100),self.registerGuider=function(t){return 0==e(t).length?"tour-skip-"+t:"tour-"+(i.guiderSequence.push(t)-1)},self.nextGuider=function(t){return 0!=e(t).length&&(next=i.guiderPosition,i.guiderPosition+=1,"tour-"+next)};const n={name:i.tourText.buttons.next,onclick:t.next},r={name:i.tourText.buttons.close,onclick:t.hideAll};self.createTourGuiders=function(){switch(i.workerMode){case"quiz":t.createGuider({id:"initial-tour-guider",title:i.tourText.welcome.title.replace(/\{\{COMPANY_NAME\}\}/g,CF.CLIENT.COMPANY_NAME),description:i.tourText.welcome.description.replace(/\{\{COMPANY_NAME\}\}/g,CF.CLIENT.COMPANY_NAME),overlay:!0,buttons:[n],next:"tour-toolbar"}).show(),t.createGuider({id:"tour-toolbar",attachTo:"#site-navi",position:6,title:i.tourText.toolbar.title,description:i.tourText.toolbar.description.replace(/\{\{COMPANY_NAME_WITH_INDEFINITE_ARTICLE\}\}/g,CF.CLIENT.COMPANY_NAME_WITH_INDEFINITE_ARTICLE),buttons:[r,n],next:"tour-mode-gauge"}),t.createGuider({id:"tour-mode-gauge",attachTo:".worker-mode-gauge",position:7,title:i.tourText[i.workerMode+"_mode"].title,description:i.tourText[i.workerMode+"_mode"].description,buttons:[r,n],next:self.nextGuider(".worker-mode-gauge")}),self.createToolbarGuiders();break;case"work":t.createGuider({id:"initial-tour-guider",attachTo:".worker-mode-gauge",position:7,title:i.tourText[i.workerMode+"_mode"].title,description:i.tourText[i.workerMode+"_mode"].description.replace(/\{\{COMPANY_NAME_WITH_INDEFINITE_ARTICLE\}\}/g,CF.CLIENT.COMPANY_NAME_WITH_INDEFINITE_ARTICLE),buttons:[r,n],next:self.nextGuider(".worker-mode-gauge")}).show(),self.createToolbarGuiders();break;case"entrance_exam":t.createGuider({id:"initial-tour-guider",attachTo:".worker-mode-gauge",position:7,title:i.tourText[i.workerMode+"_mode"].title,description:i.tourText[i.workerMode+"_mode"].description,buttons:[r,n],next:self.nextGuider(".worker-mode-gauge")}).show(),self.createToolbarGuiders()}},self.createToolbarGuiders=function(){t.createGuider({id:self.registerGuider(".accuracy-gauge"),attachTo:".accuracy-gauge",position:6,title:i.tourText.accuracy.title,description:i.tourText.accuracy.description,buttons:[r,n],next:self.nextGuider(".accuracy-gauge")}),t.createGuider({id:self.registerGuider(".progress-gauge"),attachTo:".progress-gauge",position:6,title:i.tourText.progress.title,description:i.tourText.progress.description,buttons:[r,n],next:self.nextGuider(".progress-gauge")}),t.createGuider({id:self.registerGuider(".gold-units-threshold-gauge"),attachTo:".gold-units-threshold-gauge",position:6,title:i.tourText.gold_units_threshold.title,description:i.tourText.gold_units_threshold.description,buttons:[r,n],next:self.nextGuider(".gold-units-threshold-gauge")}),t.createGuider({id:self.registerGuider(".earned-gauge"),attachTo:".earned-gauge",position:6,title:i.tourText.earned.title,description:i.tourText.earned.description,buttons:[r,n],next:self.nextGuider(".earned-gauge")}),t.createGuider({id:self.registerGuider(".completed-gauge"),attachTo:".completed-gauge",position:6,title:i.tourText.completed.title,description:i.tourText.completed.description,buttons:[r,n],next:self.nextGuider(".completed-gauge")}),t.createGuider({id:self.registerGuider(".banked-gauge"),attachTo:".banked-gauge",position:6,title:i.tourText.banked.title,description:i.tourText.banked.description,buttons:[r,n],next:self.nextGuider(".banked-gauge")}),t.createGuider({id:self.registerGuider(".give-up"),attachTo:".give-up",position:6,title:i.tourText.give_up.title,description:i.tourText.give_up.description,buttons:[r,n],next:self.nextGuider(".give-up")}),t.createGuider({id:self.registerGuider(".help-links"),attachTo:".help-links",position:6,title:i.tourText.help.title,description:i.tourText.help.description.replace(/\{\{COMPANY_NAME\}\}/g,CF.CLIENT.COMPANY_NAME).replace(/\{\{COMPANY_NAME_WITH_INDEFINITE_ARTICLE\}\}/g,CF.CLIENT.COMPANY_NAME_WITH_INDEFINITE_ARTICLE),buttons:[r,n],next:self.nextGuider(".help-links")}),t.createGuider({id:self.registerGuider(".account-links"),attachTo:".account-links",position:5,title:i.tourText.account.title,description:i.tourText.account.description.replace(/\{\{COMPANY_NAME\}\}/g,CF.CLIENT.COMPANY_NAME),buttons:[r]})},self.startTour=function(){0===i.guiderPosition&&self.createTourGuiders(),t.show("initial-tour-guider")},"work"!=i.workerMode&&"quiz"!=i.workerMode&&"entrance_exam"!=i.workerMode||(localStorage?localStorage.getItem(i.cookieKey)||(localStorage.setItem(i.cookieKey,!0),self.startTour()):e.cookie(i.cookieKey)||(e.cookie(i.cookieKey,"displayed"),self.startTour()))},i}),define("notifications-menu-item",["jquery-noconflict"],function(t){var e={};return e.init=function(e,n){t(function(){t(document).on("ajax:success","#notifications-nav-item a.delete-notification-button",function(e,n,i,r){var s=t(e.target),o=s.data("note-id"),a=s.data("divider-id");1==t("li.notification-item").length?t("#navbar-notification-item-"+o).text("No new notifications."):t("#navbar-notification-item-"+o).remove(),t("#navbar-divider-item-"+a).remove()}),t("#notifications-nav-toggle").on("click",function(e){var n=t(this);t.ajax({url:n.attr("href"),type:"PUT",headers:{"X-CSRF-Token":$("meta[name=csrf-token]").attr("content")},success:function(){t("#notifications-nav-item span.badge").removeClass("badge-warning"),t("#notification_count").text(" 0")}})})})},e}),define("clone-tracker",["jquery-noconflict"],function(t){var e={};return e.init=function(e,n){null!=n.workerId&&null!=n.akonId&&t(function(){for(var e=navigator.plugins||[],i=[],r=0;r<e.length;r++){var s=e[r];i[r]=[s.name,s.description,s.type,s.suffixes,s[0].type,s[0].suffixes]}t.ajax({type:"POST",url:CF.CLIENT.HOST_APP_URL+"/request_details?val1="+n.workerId+"&val2="+n.jobId,data:JSON.stringify([navigator.userAgent,screen.width,screen.height,screen.colorDepth,(new Date).getTimezoneOffset(),!!window.sessionStorage,!!window.localStorage,i])}),t.ajax({type:"POST",url:n.contributorStatsUrl,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({akon_id:n.akonId,job_id:n.jobId,accept_language:n.acceptLanguage,country:n.country,timezone:(new Date).getTimezoneOffset()})})})},e}),define("rails",["jquery-noconflict"],function(t){!function(t,e){var n;t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var n=t('meta[name="csrf-token"]').attr("content");n&&e.setRequestHeader("X-CSRF-Token",n)},fire:function(e,n,i){var r=t.Event(n);return e.trigger(r,i),!1!==r.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(e){var i,r,s,o,a,u;if(n.fire(e,"ajax:before")){if(o=e.data("cross-domain")||null,a=e.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,e.is("form")){i=e.attr("method"),r=e.attr("action"),s=e.serializeArray();var l=e.data("ujs:submit-button");l&&(s.push(l),e.data("ujs:submit-button",null))}else e.is(n.inputChangeSelector)?(i=e.data("method"),r=e.data("url"),s=e.serialize(),e.data("params")&&(s=s+"&"+e.data("params"))):(i=e.data("method"),r=n.href(e),s=e.data("params")||null);return u={type:i||"GET",data:s,dataType:a,crossDomain:o,beforeSend:function(t,i){return void 0===i.dataType&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(e,"ajax:beforeSend",[t,i])},success:function(t,n,i){e.trigger("ajax:success",[t,n,i])},complete:function(t,n){e.trigger("ajax:complete",[t,n])},error:function(t,n,i){e.trigger("ajax:error",[t,n,i])}},r&&(u.url=r),n.ajax(u)}return!1},handleMethod:function(e){var i=n.href(e),r=e.data("method"),s=e.attr("target"),o=t("meta[name=csrf-token]").attr("content"),a=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+r+'" type="hidden" />';void 0!==a&&void 0!==o&&(l+='<input name="'+a+'" value="'+o+'" type="hidden" />'),s&&u.attr("target",s),u.hide().append(l).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with",e[n]()),e[n](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),n=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[n](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,i=t.data("confirm"),r=!1;return!i||(n.fire(t,"confirm")&&(r=n.confirm(i),e=n.fire(t,"confirm:complete",[r])),r&&e)},blankInputs:function(e,n,i){var r,s=t(),o=n||"input,textarea";return e.find(o).each(function(){r=t(this),(i?r.val():!r.val())&&(s=s.add(r))}),!!s.length&&s},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(e,n){var i=e.data("events"),r=!0;return void 0!==i&&void 0!==i.submit&&t.each(i.submit,function(t,e){if("function"==typeof e.handler)return r=e.handler(n)}),r},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){void 0!==t.data("ujs:enable-with")&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},t.ajaxPrefilter(function(t,e,i){t.crossDomain||n.CSRFProtection(i)}),t(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),t(document).delegate(n.linkClickSelector,"click.rails",function(e){var i=t(this),r=i.data("method"),s=i.data("params");return n.allowAction(i)?(i.is(n.linkDisableSelector)&&n.disableElement(i),void 0!==i.data("remote")?!(!e.metaKey&&!e.ctrlKey||r&&"GET"!==r||s)||(!1===n.handleRemote(i)&&n.enableElement(i),!1):i.data("method")?(n.handleMethod(i),!1):void 0):n.stopEverything(e)}),t(document).delegate(n.inputChangeSelector,"change.rails",function(e){var i=t(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(e)}),t(document).delegate(n.formSubmitSelector,"submit.rails",function(e){var i=t(this),r=void 0!==i.data("remote"),s=n.blankInputs(i,n.requiredInputSelector),o=n.nonBlankInputs(i,n.fileInputSelector);return n.allowAction(i)?s&&void 0==i.attr("novalidate")&&n.fire(i,"ajax:aborted:required",[s])?n.stopEverything(e):r?o?n.fire(i,"ajax:aborted:file",[o]):!t.support.submitBubbles&&t().jquery<"1.7"&&!1===n.callFormSubmitBindings(i,e)?n.stopEverything(e):(n.handleRemote(i),!1):void setTimeout(function(){n.disableFormElements(i)},13):n.stopEverything(e)}),t(document).delegate(n.formInputClickSelector,"click.rails",function(e){var i=t(this);if(!n.allowAction(i))return n.stopEverything(e);var r=i.attr("name"),s=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",s)}),t(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),t(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){csrf_token=t("meta[name=csrf-token]").attr("content"),csrf_param=t("meta[name=csrf-param]").attr("content"),t('form input[name="'+csrf_param+'"]').val(csrf_token)})}(t)}),define("exit-survey",["jquery-noconflict","rails"],function(t){var e={};return e.init=function(n,i){e.showMessage=function(e){t("#new_exit_survey").fadeOut("slow",function(){t("#new_exit_survey").html("<h2>"+e+"</h2>"),t("#new_exit_survey").fadeIn()})},e.showSuccessMessage=function(e){t("#new_exit_survey").fadeOut("slow",function(){t(".hero-unit h1").text(e.successPageHeading),t(".hero-unit p:first").text(e.successPageText)})},t("#new_exit_survey").bind("ajax:success",function(t,n,r,s){e.showSuccessMessage(i)}).bind("ajax:error",function(t,n){e.showMessage(i.errorMsg)})},e}),define("contention-voting",["jquery-noconflict"],function(t){function e(t){r.ajax(GOLDFINGER_URL+"/v1/contentions/"+t+"/upvote",{data:{_request:"put",id:t},contentType:"json",dataType:"jsonp"}).success(n(t)).error(function(t){console.log(t)})}function n(t){return function(){var e=r("#contention-"+t);e.children(".arrows").replaceWith("<div class='span1' style='font-weight: bold;'>Upvoted!</div>"),e.siblings().hide()}}var i={},r=window.jQuery;return r(".upvote").click(function(){e(r(this).data("contention-id"))}),i}),function(){define("desk",["jquery-noconflict"],function(t){return t(function(){var e,n;return n=t("#desk-support-form"),e=t("#desk-contact-form"),n.on("show.bs.modal",function(){return e.attr("src",e.attr("data-src"))}),n.on("hide.bs.modal",function(){return e.attr("data-loaded","no")}),t("#desk-support-form-report-button").on("click",function(t){return t.preventDefault(),n.modal("show")}),e.on("load",function(){var e;return"yes"!==t(this).attr("data-loaded")?t(this).attr("data-loaded","yes"):(n.modal("hide"),void 0!==(e=t("#exam_report_assignment").attr("href"))&&null!=e?window.location.assign(e):void 0)}),t("#zendesk-ticket-form").bind("ajax:success",function(e,n){if(!0===n.success)return t("#zendesk-form").modal("hide"),t("#zendesk-submitted").modal("show")})})})}.call(this),define("logout",["jquery-noconflict"],function(t){t("#site-navi").on("click",".js-logout-link",function(){sessionStorage.removeItem("jwtToken")})}),require(["crowdflower_js/module-activator","bootstrap-alert","bootstrap-dropdown","bootstrap-collapse","bootstrap-modal","bootstrap-transition","hideable-instructions","gatekeeper","global-banner","image-annotation-wrapper","timer","welcome-guiders","notifications-menu-item","clone-tracker","exit-survey","contention-voting","desk","logout"],function(t){t.execute()}),define("builder_worker",function(){});